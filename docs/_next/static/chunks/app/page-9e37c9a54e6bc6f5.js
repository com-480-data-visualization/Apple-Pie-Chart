(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5937:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>y});var r=a(5155),n=a(8334),o=a.n(n),l=a(2115),i=a(1436),s=a(6758);let c=t=>{let{cultureId:e="usa-general",width:a=400,height:n=300}=t,o=(0,l.useRef)(null),[c,d]=(0,l.useState)(null),[p,g]=(0,l.useState)(!0),[x,h]=(0,l.useState)(null),[u,m]=(0,l.useState)(!1),y=(0,l.useRef)(null);(0,l.useEffect)(()=>((async()=>{try{y.current=new s.Bh(s.RG,{oscillator:{type:"sine"},envelope:{attack:.02,decay:.2,sustain:.3,release:1}}).toDestination();let t=new s.zb({decay:1.5,wet:.3}).toDestination();y.current.connect(t),m(!0)}catch(t){console.warn("Audio initialization failed:",t)}})(),()=>{y.current&&y.current.dispose()}),[]);let f=t=>{let e=t.replace(/maj|major/i,"").replace(/min|minor/i,"m").trim(),a={C:["C4","E4","G4"],D:["D4","F#4","A4"],E:["E4","G#4","B4"],F:["F4","A4","C5"],G:["G4","B4","D5"],A:["A4","C#5","E5"],B:["B4","D#5","F#5"],Am:["A4","C5","E5"],Bm:["B4","D5","F#5"],Cm:["C4","Eb4","G4"],Dm:["D4","F4","A4"],Em:["E4","G4","B4"],Fm:["F4","Ab4","C5"],Gm:["G4","Bb4","D5"],Am7:["A4","C5","E5","G5"],Em7:["E4","G4","B4","D5"],Cmaj7:["C4","E4","G4","B4"],Dmaj7:["D4","F#4","A4","C#5"],Fmaj7:["F4","A4","C5","E5"],Gmaj7:["G4","B4","D5","F#5"],C7:["C4","E4","G4","Bb4"],D7:["D4","F#4","A4","C5"],E7:["E4","G#4","B4","D5"],F7:["F4","A4","C5","Eb5"],G7:["G4","B4","D5","F5"],A7:["A4","C#5","E5","G5"],B7:["B4","D#5","F#5","A5"]};if(a[e])return a[e];let r=e.charAt(0).toUpperCase();return e.toLowerCase().includes("m")&&!e.toLowerCase().includes("maj")?a[r+"m"]||a[r]||["C4","E4","G4"]:a[r]||["C4","E4","G4"]},b=async t=>{if(!u||!y.current)try{await s.ni(),m(!0)}catch(t){console.warn("Could not start audio:",t);return}if(y.current){let e=f(t);y.current.triggerAttackRelease(e,"1n")}},_=async t=>{g(!0),h(null);try{let e=await fetch("".concat("/Apple-Pie-Chart","/data/").concat(t,".json"));if(e.ok){let t=await e.json();d(t)}else console.error("Failed to load data for culture: ".concat(t,", status: ").concat(e.status)),h("Failed to load data for ".concat(t,". Status: ").concat(e.status)),d({nodes:[{id:"N/A",pagerank:.1}],links:[]})}catch(e){console.error("Error fetching or parsing data:",e),h("Error loading data for ".concat(t,".")),d({nodes:[{id:"Error",pagerank:.1}],links:[]})}finally{g(!1)}};return((0,l.useEffect)(()=>{_(e)},[e]),(0,l.useEffect)(()=>{if(!c||p)return;let t=i.Ltv(o.current);t.selectAll("*").remove();let e=i.m4Y().domain(i.Xxv(c.nodes,t=>t.pagerank)||[0,1]).range([8,25]),r=i.m4Y().domain(i.Xxv(c.links,t=>t.prob)||[0,1]).range([1,4]),l=c.nodes.map(t=>({...t})),s=c.links.map(t=>({source:t.source,target:t.target,prob:t.prob})),d=i.tXi(l).force("link",i.kJC(s).id(t=>t.id).strength(.1).distance(80)).force("charge",i.xJS().strength(-350)).force("center",i.jTM(a/2,n/2)).force("collision",i.eRw().radius(t=>e(t.pagerank)+6)),g=i.Ltv("body").append("div").attr("class","chord-tooltip").style("position","absolute").style("visibility","hidden").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","10px").style("border-radius","6px").style("font-size","12px").style("pointer-events","none").style("z-index","1000").style("box-shadow","0 4px 12px rgba(0,0,0,0.3)");t.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#888");let x=t.append("g").attr("class","links").selectAll("line").data(s).enter().append("line").attr("stroke","#888").attr("stroke-opacity",.6).attr("stroke-width",t=>r(t.prob)).attr("marker-end","url(#arrow)"),h=t.append("g").attr("class","nodes").selectAll("circle").data(l).enter().append("circle").attr("r",t=>e(t.pagerank)).attr("fill","#4A90E2").attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").call(i.$Er().on("start",(t,e)=>{t.active||d.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",(t,e)=>{e.fx=t.x,e.fy=t.y}).on("end",(t,e)=>{t.active||d.alphaTarget(0),e.fx=null,e.fy=null})),u=t.append("g").attr("class","labels").selectAll("text").data(l).enter().append("text").text(t=>t.id).attr("font-size",11).attr("font-family","Arial, sans-serif").attr("font-weight","bold").attr("text-anchor","middle").attr("dy",".35em").attr("fill","#333").style("pointer-events","none");return h.on("click",async(t,a)=>{t.stopPropagation(),await b(a.id),i.Ltv(t.currentTarget).transition().duration(100).attr("r",1.4*e(a.pagerank)).attr("fill","#FF6B6B").transition().duration(300).attr("r",e(a.pagerank)).attr("fill","#4A90E2")}).on("mouseover",(t,e)=>{let a=s.filter(t=>("object"==typeof t.source?t.source.id:t.source)===e.id),r="<strong>".concat(e.id,"</strong><br/>");r+="Importance: ".concat((100*e.pagerank).toFixed(1),"%<br/>"),a.length>0&&(r+="<br/><strong>Common progressions:</strong><br/>",a.forEach(t=>{let e=t.target,a=t.source;r+="".concat(a.id," → ").concat(e.id,": ").concat((100*t.prob).toFixed(0),"%<br/>")})),r+="<br/><em>Click to play chord!</em>",g.style("visibility","visible").html(r),h.style("opacity",t=>t===e||a.some(e=>e.target.id===t.id)?1:.3),x.style("opacity",t=>t.source.id===e.id?1:.1),u.style("opacity",t=>t===e||a.some(e=>e.target.id===t.id)?1:.3)}).on("mousemove",t=>{g.style("top",t.pageY-10+"px").style("left",t.pageX+10+"px")}).on("mouseout",()=>{g.style("visibility","hidden"),h.style("opacity",1),x.style("opacity",.6),u.style("opacity",1)}),d.on("tick",()=>{x.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),h.attr("cx",t=>t.x).attr("cy",t=>t.y),u.attr("x",t=>t.x).attr("y",t=>t.y)}),()=>{d.stop(),g.remove()}},[c,a,n,p]),p)?(0,r.jsx)("div",{style:{width:a,height:n,display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:(0,r.jsxs)("div",{style:{textAlign:"center",color:"#6c757d"},children:[(0,r.jsx)("div",{style:{marginBottom:"8px"},children:"\uD83C\uDFB5"}),(0,r.jsx)("div",{children:"Loading chords..."})]})}):x?(0,r.jsx)("div",{style:{width:a,height:n,display:"flex",alignItems:"center",justifyContent:"center",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb"},children:(0,r.jsxs)("div",{style:{color:"#721c24",textAlign:"center",fontSize:"14px"},children:[(0,r.jsx)("div",{children:"⚠️ Could not load chord data"}),(0,r.jsx)("div",{style:{fontSize:"12px",marginTop:"4px"},children:"Using fallback data"})]})}):(0,r.jsxs)("div",{style:{width:a,height:n,position:"relative"},children:[(0,r.jsx)("svg",{ref:o,width:a,height:n,style:{background:"#fafafa",borderRadius:"8px",border:"1px solid #e9ecef"}}),(0,r.jsx)("div",{style:{position:"absolute",top:8,right:8,background:"rgba(74, 144, 226, 0.9)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"bold"},children:"\uD83C\uDFB9 Click chords to play"})]})},d=t=>{let{onMoodChange:e}=t,a=(0,l.useRef)(null),n={mainAxisStrokeColor:"#B0B0B0",diagonalStrokeColor:"#EAEAEA",circleStrokeColor:"#4A90E2",textColor:"#333",sectorColors:["#FFD1DC","#E1F5FE","#FFE4B5","#D8BFD8","#FFB6C1","#ADD8E6","#F5F5DC","#E6E6FA"],sectorLabels:["Energetic/Joyful","Excited/Surprised","Agitated/Angry","Heavy/Majestic","Dark/Depressed","Tragic/Yearning","Dreamy/Sentimental","Calm/Relaxed"]},o=i.y17(8).map(t=>({index:t,startAngle:Math.PI/4*t,endAngle:Math.PI/4*(t+1),label:n.sectorLabels[t],color:n.sectorColors[t]})),s=(0,l.useRef)(Math.PI/8),c=(0,l.useRef)(0);return(0,l.useEffect)(()=>{if(!a.current)return;let t=i.Ltv(a.current);t.selectAll("*").remove();let r=t.append("g").attr("class","wheel-container"),l=i.JLW().innerRadius(0).outerRadius(160).startAngle(t=>t.startAngle).endAngle(t=>t.endAngle),d=r.selectAll(".sector").data(o).enter().append("path").attr("class","sector").attr("d",l).attr("transform","translate(".concat(200,",").concat(200,")")).attr("fill","transparent").attr("stroke",n.diagonalStrokeColor).attr("stroke-width",.5).attr("opacity",.2);r.append("line").attr("x1",20).attr("y1",200).attr("x2",380).attr("y2",200).attr("stroke",n.mainAxisStrokeColor).attr("stroke-width",1.5),r.append("line").attr("x1",200).attr("y1",20).attr("x2",200).attr("y2",380).attr("stroke",n.mainAxisStrokeColor).attr("stroke-width",1.5),r.append("circle").attr("cx",200).attr("cy",200).attr("r",160).attr("fill","none").attr("stroke",n.circleStrokeColor).attr("stroke-width",2);let p=r.append("circle").attr("class","mood-button").attr("r",8).attr("fill",n.circleStrokeColor).attr("stroke","white").attr("stroke-width",2).style("cursor","grab"),g=r.append("text").attr("class","active-sector-label").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill",n.textColor).style("pointer-events","none");function x(t){s.current=t,c.current=Math.floor(t/(Math.PI/4))%8;let a=200+160*Math.cos(t),r=200-160*Math.sin(t);if(p.attr("cx",a).attr("cy",r),d.attr("fill",t=>t.index===c.current?t.color:"transparent").attr("opacity",t=>t.index===c.current?.5:.2),c.current>=0&&n.sectorLabels[c.current]){let t=c.current*(Math.PI/4)+Math.PI/8,e=200+104*Math.cos(t),a=200-104*Math.sin(t);g.attr("x",e).attr("y",a).text(n.sectorLabels[c.current])}else g.text("");e&&e({x:Math.cos(t),y:Math.sin(t),sector:c.current,angle:180*t/Math.PI})}r.append("text").attr("x",200).attr("y",15).attr("text-anchor","middle").attr("font-size","13px").attr("font-weight","600").attr("fill",n.textColor).text("Arousal+"),r.append("text").attr("x",200).attr("y",395).attr("text-anchor","middle").attr("font-size","13px").attr("font-weight","600").attr("fill",n.textColor).text("Arousal-"),r.append("text").attr("x",395).attr("y",205).attr("text-anchor","end").attr("font-size","13px").attr("font-weight","600").attr("fill",n.textColor).text("Valence+"),r.append("text").attr("x",15).attr("y",205).attr("text-anchor","start").attr("font-size","13px").attr("font-weight","600").attr("fill",n.textColor).text("Valence-");let h=i.$Er().on("start",function(t){i.Ltv(this).style("cursor","grabbing")}).on("drag",function(t){let e=i.WnM(t,r.node()),a=e[0]-200,n=Math.atan2(-(e[1]-200),a);n<0&&(n+=2*Math.PI),x(n)}).on("end",function(){i.Ltv(this).style("cursor","grab")});p.call(h),x(s.current),t.attr("width",400).attr("height",400).style("font-family","Helvetica, Arial, sans-serif")},[e,n,o]),(0,r.jsx)("svg",{ref:a})},p=t=>{let{data:e,title:a,width:n=400,height:o=300}=t,s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var t,a;if(!e||0===e.length)return;let r=i.Ltv(s.current);r.selectAll("*").remove();let l={top:20,right:30,bottom:40,left:50},c=n-l.left-l.right,d=o-l.top-l.bottom,p=r.attr("width",n).attr("height",o).append("g").attr("transform","translate(".concat(l.left,",").concat(l.top,")")),g=i.i2o(e)||0,x=i.JZy(e)||0,h=i.Xxv(e),u=i.JWi().domain(h).thresholds(20)(e),m=i.m4Y().domain(h).range([0,c]),y=i.m4Y().domain([0,i.T9B(u,t=>t.length)||0]).range([d,0]);p.selectAll(".bar").data(u).enter().append("rect").attr("class","bar").attr("x",t=>m(t.x0||0)).attr("y",t=>y(t.length)).attr("width",t=>Math.max(0,m(t.x1||0)-m(t.x0||0)-1)).attr("height",t=>d-y(t.length)).attr("fill","#3b82f6").attr("fill-opacity",.7).attr("stroke","#1e40af").attr("stroke-width",1).on("mouseover",function(t,e){var a,r;i.Ltv(this).attr("fill-opacity",.9);let n=i.Ltv("body").append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);n.transition().duration(200).style("opacity",1),n.html("Range: ".concat(null==(a=e.x0)?void 0:a.toFixed(2)," - ").concat(null==(r=e.x1)?void 0:r.toFixed(2),"<br/>Count: ").concat(e.length)).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")}).on("mouseout",function(){i.Ltv(this).attr("fill-opacity",.7),i.Ubm(".tooltip").remove()});let f=(t=function(t){return function(e){return 1>=Math.abs(e/=.5)?.75*(1-e*e)/t:0}}(.5),a=m.ticks(100),function(e){return a.map(function(a){return[a,i.i2o(e,function(e){return t(a-e)})||0]})})(e),b=i.n8j().x(t=>m(t[0])).y(t=>y(t[1]*e.length*(h[1]-h[0])/20)).curve(i.qrM);p.append("path").datum(f).attr("fill","none").attr("stroke","#dc2626").attr("stroke-width",2).attr("d",b),p.append("line").attr("x1",m(g)).attr("x2",m(g)).attr("y1",0).attr("y2",d).attr("stroke","#dc2626").attr("stroke-width",2).attr("stroke-dasharray","4,4"),p.append("line").attr("x1",m(x)).attr("x2",m(x)).attr("y1",0).attr("y2",d).attr("stroke","#16a34a").attr("stroke-width",2).attr("stroke-dasharray","4,4"),p.append("g").attr("transform","translate(0,".concat(d,")")).call(i.l78(m)).append("text").attr("x",c/2).attr("y",35).attr("fill","black").style("text-anchor","middle").text("Gain"),p.append("g").call(i.V4s(y)).append("text").attr("transform","rotate(-90)").attr("y",-35).attr("x",-d/2).attr("fill","black").style("text-anchor","middle").text("Frequency");let _=p.append("g").attr("transform","translate(".concat(c-120,", 20)"));_.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0).attr("stroke","#dc2626").attr("stroke-width",2).attr("stroke-dasharray","4,4"),_.append("text").attr("x",20).attr("y",0).attr("dy","0.35em").attr("font-size","12px").text("Mean: ".concat(g.toFixed(2))),_.append("line").attr("x1",0).attr("x2",15).attr("y1",15).attr("y2",15).attr("stroke","#16a34a").attr("stroke-width",2).attr("stroke-dasharray","4,4"),_.append("text").attr("x",20).attr("y",15).attr("dy","0.35em").attr("font-size","12px").text("Median: ".concat(x.toFixed(2)))},[e,n,o]),(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)("svg",{ref:s})})},g=t=>{let{data:e,title:a,width:n=400,height:o=300}=t,s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var t,a;if(!e||0===e.length)return;let r=i.Ltv(s.current);r.selectAll("*").remove();let l={top:20,right:30,bottom:40,left:50},c=n-l.left-l.right,d=o-l.top-l.bottom,p=r.attr("width",n).attr("height",o).append("g").attr("transform","translate(".concat(l.left,",").concat(l.top,")")),g=i.i2o(e)||0,x=i.JZy(e)||0,h=i.Xxv(e),u=i.JWi().domain(h).thresholds(25)(e),m=i.m4Y().domain(h).range([0,c]),y=i.m4Y().domain([0,i.T9B(u,t=>t.length)||0]).range([d,0]);p.selectAll(".bar").data(u).enter().append("rect").attr("class","bar").attr("x",t=>m(t.x0||0)).attr("y",t=>y(t.length)).attr("width",t=>Math.max(0,m(t.x1||0)-m(t.x0||0)-1)).attr("height",t=>d-y(t.length)).attr("fill","#059669").attr("fill-opacity",.7).attr("stroke","#047857").attr("stroke-width",1).on("mouseover",function(t,e){i.Ltv(this).attr("fill-opacity",.9);let a=i.Ltv("body").append("div").attr("class","tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);a.transition().duration(200).style("opacity",1),a.html("Range: ".concat(Math.round(e.x0||0)," - ").concat(Math.round(e.x1||0)," BPM<br/>Count: ").concat(e.length)).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")}).on("mouseout",function(){i.Ltv(this).attr("fill-opacity",.7),i.Ubm(".tooltip").remove()});let f=(t=function(t){return function(e){return 1>=Math.abs(e/=2)?.75*(1-e*e)/t:0}}(2),a=m.ticks(100),function(e){return a.map(function(a){return[a,i.i2o(e,function(e){return t(a-e)})||0]})})(e),b=i.n8j().x(t=>m(t[0])).y(t=>y(t[1]*e.length*(h[1]-h[0])/25)).curve(i.qrM);p.append("path").datum(f).attr("fill","none").attr("stroke","#dc2626").attr("stroke-width",2).attr("d",b),p.append("line").attr("x1",m(g)).attr("x2",m(g)).attr("y1",0).attr("y2",d).attr("stroke","#dc2626").attr("stroke-width",2).attr("stroke-dasharray","4,4"),p.append("line").attr("x1",m(x)).attr("x2",m(x)).attr("y1",0).attr("y2",d).attr("stroke","#16a34a").attr("stroke-width",2).attr("stroke-dasharray","4,4"),[{value:60,label:"Slow",color:"#6b7280"},{value:120,label:"Moderate",color:"#6b7280"},{value:180,label:"Fast",color:"#6b7280"}].forEach(t=>{t.value>=h[0]&&t.value<=h[1]&&(p.append("line").attr("x1",m(t.value)).attr("x2",m(t.value)).attr("y1",0).attr("y2",d).attr("stroke",t.color).attr("stroke-width",1).attr("stroke-dasharray","2,2").attr("opacity",.5),p.append("text").attr("x",m(t.value)).attr("y",-5).attr("text-anchor","middle").attr("font-size","10px").attr("fill",t.color).text(t.label))}),p.append("g").attr("transform","translate(0,".concat(d,")")).call(i.l78(m).tickFormat(t=>"".concat(t))).append("text").attr("x",c/2).attr("y",35).attr("fill","black").style("text-anchor","middle").text("BPM (Beats Per Minute)"),p.append("g").call(i.V4s(y)).append("text").attr("transform","rotate(-90)").attr("y",-35).attr("x",-d/2).attr("fill","black").style("text-anchor","middle").text("Frequency");let _=p.append("g").attr("transform","translate(".concat(c-120,", 20)"));_.append("line").attr("x1",0).attr("x2",15).attr("y1",0).attr("y2",0).attr("stroke","#dc2626").attr("stroke-width",2).attr("stroke-dasharray","4,4"),_.append("text").attr("x",20).attr("y",0).attr("dy","0.35em").attr("font-size","12px").text("Mean: ".concat(g.toFixed(1))),_.append("line").attr("x1",0).attr("x2",15).attr("y1",15).attr("y2",15).attr("stroke","#16a34a").attr("stroke-width",2).attr("stroke-dasharray","4,4"),_.append("text").attr("x",20).attr("y",15).attr("dy","0.35em").attr("font-size","12px").text("Median: ".concat(x.toFixed(1)))},[e,n,o]),(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)("svg",{ref:s})})},x=[{id:"france",name:"France"},{id:"usa-south",name:"USA (South)"},{id:"argentina-latin-america",name:"Argentina/Latin America"},{id:"caribbean",name:"Caribbean"},{id:"brazil",name:"Brazil"},{id:"uk-scotland-ireland",name:"UK (Scotland/Ireland)"},{id:"germany",name:"Germany"},{id:"uk-england",name:"UK (England)"},{id:"mexico",name:"Mexico"},{id:"spain",name:"Spain"},{id:"nordic",name:"Nordic"},{id:"portugal",name:"Portugal"},{id:"italy",name:"Italy"},{id:"japan",name:"Japan"}],h=[{emoji:"\uD83D\uDE22",percentage:15},{emoji:"\uD83D\uDE21",percentage:9},{emoji:"\uD83D\uDE0A❤️",percentage:55},{emoji:"\uD83D\uDE0A",percentage:4},{emoji:"\uD83D\uDE34",percentage:15}],u=["Tenderness","Surprise","Excited","Fear","Anger","Sadness","Tired","Relaxed"],m=[{key:"0-45 deg (e.g., Energetic/Joyful)",angle:22.5,label:"Energetic/Joyful"},{key:"45-90 deg (e.g., Excited/Surprised)",angle:67.5,label:"Excited/Surprised"},{key:"90-135 deg (e.g., Tense/Aggressive)",angle:112.5,label:"Tense/Aggressive"},{key:"135-180 deg (e.g., Angry/Frustrated)",angle:157.5,label:"Angry/Frustrated"},{key:"180-225 deg (e.g., Sad/Depressed)",angle:202.5,label:"Sad/Depressed"},{key:"225-270 deg (e.g., Bored/Tired)",angle:247.5,label:"Bored/Tired"},{key:"270-315 deg (e.g., Calm/Peaceful)",angle:292.5,label:"Calm/Peaceful"},{key:"315-360 deg (e.g., Content/Happy)",angle:337.5,label:"Content/Happy"}];function y(){var t,e;let[a,n]=(0,l.useState)("cultureToChord"),[i,s]=(0,l.useState)(null),[y,f]=(0,l.useState)(0),[b,_]=(0,l.useState)(0),[j,k]=(0,l.useState)(x[0]),[v,C]=(0,l.useState)({}),[B,w]=(0,l.useState)({gain:[],bpm:[]}),[A,D]=(0,l.useState)("0-45 deg (e.g., Energetic/Joyful)");(0,l.useEffect)(()=>{(async()=>{try{var t;let e=await fetch("/data/cluster_data_emotion.json"),a=await e.json();C(a);let r=null==(t=m[0])?void 0:t.key;r&&a[r]&&(D(r),w(a[r]),console.log("Initial data loaded for sector:",r,a[r]))}catch(t){console.error("Error loading emotion data:",t)}})()},[]);let E=(0,l.useCallback)(t=>{if(s({x:t.x,y:t.y}),_(t.angle),t.sector!==y){var e;f(t.sector);let a=null==(e=m[t.sector])?void 0:e.key;a&&v[a]&&a!==A&&(D(a),w(v[a]))}console.log("Page - Current Mood Data:",t)},[y,A,v]),F=(0,l.useCallback)(t=>{k(t)},[]);return(0,r.jsxs)("main",{className:o().main,children:[(0,r.jsx)("header",{className:o().brand,children:"Moved to the Core"}),(0,r.jsx)("h1",{className:o().title,children:"Welcome to your exploration of the music chords world"}),(0,r.jsxs)("div",{className:o().buttonContainer,children:[(0,r.jsx)("button",{className:"".concat(o().button," ").concat("cultureToChord"===a?o().activeButton:""),onClick:()=>n("cultureToChord"),children:"Culture to Chord"}),(0,r.jsx)("button",{className:"".concat(o().button," ").concat("moodToHarmony"===a?o().activeButton:""),onClick:()=>n("moodToHarmony"),children:"Mood to Harmony"})]}),"cultureToChord"===a&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:o().gallery,children:[(0,r.jsxs)("section",{className:o().genreExplorer,children:[(0,r.jsx)("h2",{className:o().genreExplorerTitle,children:"Choose a culture to explore!"}),(0,r.jsx)("div",{className:o().genreBubblesContainer,children:x.map(t=>(0,r.jsx)("div",{className:"".concat(o().bubble," ").concat(o()[t.id]," ").concat(j.id===t.id?o().selectedBubble:""),onClick:()=>F(t),style:{cursor:"pointer"},children:(0,r.jsx)("span",{className:o().genreName,children:t.name})},t.id))})]}),(0,r.jsxs)("section",{className:o().genreDetailPanel,children:[(0,r.jsxs)("h2",{className:o().detailPanelTitle,children:["Details for:\xa0",(0,r.jsx)("span",{className:o().selectedGenreNameText,children:j.name})]}),(0,r.jsxs)("div",{className:o().chordAndEmojiContainer,children:[(0,r.jsx)("div",{className:o().chordGraph,children:(0,r.jsx)(c,{cultureId:j.id,width:400,height:300})}),(0,r.jsxs)("div",{className:o().emojiBoard,children:[(0,r.jsx)("h3",{className:o().panelSubTitle,children:"Emoji mood board of your selection"}),(0,r.jsx)("div",{className:o().emojiContainer,children:h.map((t,e)=>(0,r.jsxs)("div",{className:o().emojiItem,children:[(0,r.jsx)("span",{className:o().emoji,children:t.emoji}),(0,r.jsxs)("span",{className:o().percentage,children:[t.percentage,"%"]})]},e))})]})]}),(0,r.jsxs)("div",{className:o().cultureInfo,children:[(0,r.jsxs)("h3",{className:o().panelSubTitle,children:["Musical characteristics of ",j.name]}),(0,r.jsxs)("div",{className:o().cultureDescription,children:[(0,r.jsxs)("p",{children:["Explore the unique chord progressions and harmonic patterns that define the musical traditions of ",j.name,". Click on any chord in the network above to hear how it sounds and discover the most common progressions used in this culture's music."]}),(0,r.jsxs)("div",{className:o().networkStats,children:[(0,r.jsxs)("div",{className:o().statItem,children:[(0,r.jsx)("strong",{children:"\uD83C\uDFB5 Interactive Network:"})," Click nodes to play chords"]}),(0,r.jsxs)("div",{className:o().statItem,children:[(0,r.jsx)("strong",{children:"\uD83D\uDCCA Data-Driven:"})," Based on analysis of popular songs"]}),(0,r.jsxs)("div",{className:o().statItem,children:[(0,r.jsx)("strong",{children:"\uD83D\uDD17 Chord Transitions:"})," Arrow thickness shows probability"]})]})]})]})]})]})}),"moodToHarmony"===a&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:o().gallery,children:(0,r.jsxs)("div",{className:o().moodToHarmonyLayout,children:[(0,r.jsx)("div",{className:o().leftBox,children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},children:[(0,r.jsx)("div",{style:{marginBottom:"2rem"},children:(0,r.jsx)(d,{onMoodChange:E})}),(0,r.jsxs)("div",{style:{width:"100%",maxWidth:"400px",padding:"20px",backgroundColor:"#e6f0fa",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("h3",{style:{marginTop:"0",marginBottom:"15px",fontSize:"1.2rem",color:"#1a365d",textAlign:"center"},children:"Current Mood State"}),i?(0,r.jsxs)("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:[(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"Sector:"})," ",u[y]," (#",y+1,")"]}),(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"Angle:"})," ",b.toFixed(1),"\xb0"]}),(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"X:"})," ",i.x.toFixed(3)," | ",(0,r.jsx)("strong",{children:"Y:"})," ",i.y.toFixed(3)]}),(0,r.jsxs)("div",{style:{marginTop:"15px",padding:"12px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"6px"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem"},children:"Suggested Music Features:"}),0===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Tender, warm melodies"}),1===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Bright, surprising elements"}),2===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Fast-paced, high-energy music"}),3===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Tense, suspenseful sounds"}),4===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Intense, fiery music"}),5===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Slow, emotionally rich music"}),6===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Low-energy, reflective tunes"}),7===y&&(0,r.jsx)("p",{style:{margin:"0"},children:"\uD83C\uDFB5 Soothing, relaxing rhythms"})]})]}):(0,r.jsx)("p",{style:{textAlign:"center",color:"#666"},children:"Please drag the button on the circle to select a mood state."})]})]})}),(0,r.jsxs)("div",{className:o().rightColumn,children:[(0,r.jsxs)("div",{className:o().rightTopBox,style:{backgroundColor:"#e6f0fa",padding:"20px",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",marginBottom:"1.5rem",minHeight:"300px"},children:[(0,r.jsx)("h3",{style:{marginTop:"0",marginBottom:"15px",textAlign:"center",fontSize:"1.2rem",color:"#1a365d"},children:"Gain Distribution"}),B.gain.length>0?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(p,{data:B.gain,title:(null==(t=m[y])?void 0:t.label)||"Selected Emotion",width:400,height:220})}):(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#666",flexDirection:"column"},children:[(0,r.jsx)("p",{children:"Loading gain data..."}),(0,r.jsxs)("small",{children:["Sector: ",y,", Data length: ",B.gain.length]})]})]}),(0,r.jsxs)("div",{className:o().rightBottomBox,style:{backgroundColor:"#e6f0fa",padding:"20px",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",minHeight:"300px"},children:[(0,r.jsx)("h3",{style:{marginTop:"0",marginBottom:"15px",textAlign:"center",fontSize:"1.2rem",color:"#1a365d"},children:"BPM Distribution"}),B.bpm.length>0?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(g,{data:B.bpm,title:(null==(e=m[y])?void 0:e.label)||"Selected Emotion",width:400,height:220})}):(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#666",flexDirection:"column"},children:[(0,r.jsx)("p",{children:"Loading BPM data..."}),(0,r.jsxs)("small",{children:["Sector: ",y,", Data length: ",B.bpm.length]})]})]})]})]})})}),(0,r.jsxs)("footer",{className:o().contactSection,children:[(0,r.jsx)("h3",{className:o().contactTitle,children:"Contact information"}),(0,r.jsxs)("div",{className:o().contactBox,children:[(0,r.jsx)("p",{className:o().teamName,children:"Team Apple-Pie-Chart"}),(0,r.jsxs)("ul",{className:o().memberList,children:[(0,r.jsxs)("li",{children:["Yiwei\xa0Liu ：",(0,r.jsx)("a",{href:"mailto:blabla@blabla.com",children:"blabla@blabla.com"})]}),(0,r.jsxs)("li",{children:["Tianhao\xa0Dai ：",(0,r.jsx)("a",{href:"mailto:blibli@blibli.com",children:"blibli@blibli.com"})]}),(0,r.jsxs)("li",{children:["Ewan\xa0Golfier ：",(0,r.jsx)("a",{href:"mailto:bloblo@bloblo.com",children:"bloblo@bloblo.com"})]})]})]})]})]})}},8334:t=>{t.exports={main:"page_main__GlU4n",brand:"page_brand__f_q1F",title:"page_title__3jonF",gallery:"page_gallery__sJw99",genreExplorer:"page_genreExplorer__mEB43",genreExplorerTitle:"page_genreExplorerTitle__BFKbg",genreBubblesContainer:"page_genreBubblesContainer__y2w_S",bubble:"page_bubble__XiY2Y",genreName:"page_genreName__ZvEKw","usa-general":"page_usa-general___HB8K",france:"page_france__bhdhA","usa-south":"page_usa-south__U69bu","argentina-latin-america":"page_argentina-latin-america__pqAOt",caribbean:"page_caribbean__xo9Fs",brazil:"page_brazil__xdbS3","uk-scotland-ireland":"page_uk-scotland-ireland__McmY9",germany:"page_germany__qZ9O9","uk-england":"page_uk-england__BhgRh",mexico:"page_mexico__gq_DD",spain:"page_spain__i2mdp",nordic:"page_nordic__42M5l",portugal:"page_portugal__KfiXh",italy:"page_italy__1dOJx",japan:"page_japan__jNLyk",turkey:"page_turkey__SiSQ5",genreDetailPanel:"page_genreDetailPanel__M7Wzn",chordAndEmojiContainer:"page_chordAndEmojiContainer__U8Ycj",chordGraph:"page_chordGraph__TS7Oi",emojiBoard:"page_emojiBoard__O51id",emojiContainer:"page_emojiContainer__JcbEh",emojiItem:"page_emojiItem__TLgxh",emoji:"page_emoji__AOGjQ",percentage:"page_percentage__CpU53",chordContainer:"page_chordContainer__316Ie",chordCircle:"page_chordCircle___rdmg",songSelector:"page_songSelector__fawQE",songContainer:"page_songContainer__VgDZH",panelSubTitle:"page_panelSubTitle__5X2Iq",detailPanelTitle:"page_detailPanelTitle__SLDbf",chordColumnContainer:"page_chordColumnContainer__pAgLQ",chordColumn:"page_chordColumn__SVdHd",chordActive:"page_chordActive__QO8Fs",contactSection:"page_contactSection__TxMLV",contactTitle:"page_contactTitle__f9zlz",contactBox:"page_contactBox__sJivB",teamName:"page_teamName__6FxOC",memberList:"page_memberList__XXbZ_",buttonContainer:"page_buttonContainer__XCXUY",button:"page_button__vnlhW",activeButton:"page_activeButton__QMdXl",moodToHarmonyLayout:"page_moodToHarmonyLayout__s7BbR",leftBox:"page_leftBox__oucaR",rightColumn:"page_rightColumn__j8an9",rightTopBox:"page_rightTopBox__ksecX",rightBottomBox:"page_rightBottomBox__nsJqa",sliderContainer:"page_sliderContainer__9hu_f",sliderLabel:"page_sliderLabel__D6Mca",slider:"page_slider__ByN4U"}},9006:(t,e,a)=>{Promise.resolve().then(a.bind(a,5937))}},t=>{var e=e=>t(t.s=e);t.O(0,[397,395,441,684,358],()=>e(9006)),_N_E=t.O()}]);