(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{1436:(t,e,n)=>{"use strict";function i(t,e){let n,i;if(void 0===e)for(let e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(void 0===n?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}n.d(e,{JLW:()=>ib,l78:()=>j,V4s:()=>$,qrM:()=>iE,$Er:()=>ng,Xxv:()=>i,jTM:()=>nv,eRw:()=>nN,kJC:()=>nR,xJS:()=>nj,tXi:()=>nF,JWi:()=>k,n8j:()=>iS,T9B:()=>S,i2o:()=>M,JZy:()=>D,WnM:()=>no,y17:()=>I,m4Y:()=>function t(){var e,n=(function(){var t,e,n,i,r,s,o=nB,a=nB,l=n$,u=nz;function h(){var t,e,n,l=Math.min(o.length,a.length);return u!==nz&&(t=o[0],e=o[l-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),i=l>2?nY:nX,r=s=null,c}function c(e){return null==e||isNaN(e*=1)?n:(r||(r=i(o.map(t),a,l)))(t(u(e)))}return c.invert=function(n){return u(e((s||(s=i(a,o.map(t),t3)))(n)))},c.domain=function(t){return arguments.length?(o=Array.from(t,nW),h()):o.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),l=nL,h()},c.clamp=function(t){return arguments.length?(u=!!t||nz,h()):u!==nz},c.interpolate=function(t){return arguments.length?(l=t,h()):l},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,h()}})()(nz,nz);return n.copy=function(){return t().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())},nG.apply(n,arguments),e=n.domain,n.ticks=function(t){var n=e();return T(n[0],n[n.length-1],null==t?10:t)},n.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var r,s,o,u=function(t,e,n){e*=1,t*=1,n*=1;let i=e<t,r=i?A(e,t,n):A(t,e,n);return(i?-1:1)*(r<0?-(1/r):r)}(t,e,n);switch((i=nZ(null==i?",f":i)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nK(h)/3)))-nK(Math.abs(u))))||(i.precision=o),l(i,h);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Math.max(0,nK(Math.abs(Math.max(Math.abs(t),Math.abs(e)))-(r=Math.abs(r=u)))-nK(r))+1)||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Math.max(0,-nK(Math.abs(u))))||(i.precision=o-("%"===i.type)*2)}return a(i)}(i[0],i[i.length-1],null==t?10:t,n)},n.nice=function(t){null==t&&(t=10);var i,r,s=e(),o=0,a=s.length-1,l=s[o],u=s[a],h=10;for(u<l&&(r=l,l=u,u=r,r=o,o=a,a=r);h-- >0;){if((r=A(l,u,t))===i)return s[o]=l,s[a]=u,e(s);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else if(r<0)l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r;else break;i=r}return n},n},Ltv:()=>ns,Ubm:()=>n4});var r,s,o,a,l,u=Array.prototype,h=u.slice;function c(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function d(t){let e,n,i;function r(t,i,s=0,o=t.length){if(s<o){if(0!==e(i,i))return o;do{let e=s+o>>>1;0>n(t[e],i)?s=e+1:o=e}while(s<o)}return s}return 2!==t.length?(e=c,n=(e,n)=>c(t(e),n),i=(e,n)=>t(e)-n):(e=t===c||t===p?t:f,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){let o=r(t,e,n,s-1);return o>n&&i(t[o-1],e)>-i(t[o],e)?o-1:o},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{let e=r+s>>>1;0>=n(t[e],i)?r=e+1:s=e}while(r<s)}return r}}}function f(){return 0}u.map;let m=d(c),g=m.right;m.left,d(function(t){return null===t?NaN:+t}).center;function v(t){return t}let y=Math.sqrt(50),x=Math.sqrt(10),w=Math.sqrt(2);function b(t,e,n){let i,r,s,o=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(o)),l=o/Math.pow(10,a),u=l>=y?10:l>=x?5:l>=w?2:1;return(a<0?(i=Math.round(t*(s=Math.pow(10,-a)/u)),r=Math.round(e*s),i/s<t&&++i,r/s>e&&--r,s=-s):(i=Math.round(t/(s=Math.pow(10,a)*u)),r=Math.round(e/s),i*s<t&&++i,r*s>e&&--r),r<i&&.5<=n&&n<2)?b(t,e,2*n):[i,r,s]}function T(t,e,n){if(e*=1,t*=1,!((n*=1)>0))return[];if(t===e)return[t];let i=e<t,[r,s,o]=i?b(e,t,n):b(t,e,n);if(!(s>=r))return[];let a=s-r+1,l=Array(a);if(i)if(o<0)for(let t=0;t<a;++t)l[t]=-((s-t)/o);else for(let t=0;t<a;++t)l[t]=(s-t)*o;else if(o<0)for(let t=0;t<a;++t)l[t]=-((r+t)/o);else for(let t=0;t<a;++t)l[t]=(r+t)*o;return l}function A(t,e,n){return b(t*=1,e*=1,n*=1)[2]}function C(t){return Math.max(1,Math.ceil(Math.log(function(t,e){let n=0;for(let e of t)null!=e&&(e*=1)>=e&&++n;return n}(t))/Math.LN2)+1)}function k(){var t=v,e=i,n=C;function r(r){Array.isArray(r)||(r=Array.from(r));var s,o,a,l=r.length,u=Array(l);for(s=0;s<l;++s)u[s]=t(r[s],s,r);var h=e(u),c=h[0],p=h[1],d=n(u,c,p);if(!Array.isArray(d)){let t=p,n=+d;if(e===i&&([c,p]=function(t,e,n){let i;for(;;){let r=A(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}(c,p,n)),(d=T(c,p,n))[0]<=c&&(a=A(c,p,n)),d[d.length-1]>=p)if(t>=p&&e===i){let t=A(c,p,n);isFinite(t)&&(t>0?p=(Math.floor(p/t)+1)*t:t<0&&(p=-((Math.ceil(-(p*t))+1)/t)))}else d.pop()}for(var f=d.length,m=0,v=f;d[m]<=c;)++m;for(;d[v-1]>p;)--v;(m||v<f)&&(d=d.slice(m,v),f=v-m);var y,x=Array(f+1);for(s=0;s<=f;++s)(y=x[s]=[]).x0=s>0?d[s-1]:c,y.x1=s<f?d[s]:p;if(isFinite(a)){if(a>0)for(s=0;s<l;++s)null!=(o=u[s])&&c<=o&&o<=p&&x[Math.min(f,Math.floor((o-c)/a))].push(r[s]);else if(a<0){for(s=0;s<l;++s)if(null!=(o=u[s])&&c<=o&&o<=p){let t=Math.floor((c-o)*a);x[Math.min(f,t+(d[t]<=o))].push(r[s])}}}else for(s=0;s<l;++s)null!=(o=u[s])&&c<=o&&o<=p&&x[g(d,o,0,f)].push(r[s]);return x}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:()=>e,r):t},r.domain=function(t){var n;return arguments.length?(e="function"==typeof t?t:(n=[t[0],t[1]],()=>n),r):e},r.thresholds=function(t){var e;return arguments.length?(n="function"==typeof t?t:(e=Array.isArray(t)?h.call(t):t,()=>e),r):n},r}function S(t,e){let n;if(void 0===e)for(let e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function M(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e*=1)>=e&&(++n,i+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s*=1)>=s&&(++n,i+=s)}if(n)return i/n}function O(t,e){let n;if(void 0===e)for(let e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function E(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:+(t>e))}function N(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function D(t,e){var n=t,i=.5;if(!(!(r=(n=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e*=1)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i*=1)>=i&&(yield i)}}(n,e))).length)||isNaN(i*=1))){if(i<=0||r<2)return O(n);if(i>=1)return S(n);var r,s=(r-1)*i,o=Math.floor(s),a=S((function t(e,n,i=0,r=1/0,s){if(n=Math.floor(n),i=Math.floor(Math.max(0,i)),r=Math.floor(Math.min(e.length-1,r)),!(i<=n&&n<=r))return e;for(s=void 0===s?E:function(t=c){if(t===c)return E;if("function"!=typeof t)throw TypeError("compare is not a function");return(e,n)=>{let i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}(s);r>i;){if(r-i>600){let o=r-i+1,a=n-i+1,l=Math.log(o),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(o-u)/o)*(a-o/2<0?-1:1),c=Math.max(i,Math.floor(n-a*u/o+h)),p=Math.min(r,Math.floor(n+(o-a)*u/o+h));t(e,n,c,p,s)}let o=e[n],a=i,l=r;for(N(e,i,n),s(e[r],o)>0&&N(e,i,r);a<l;){for(N(e,a,l),++a,--l;0>s(e[a],o);)++a;for(;s(e[l],o)>0;)--l}0===s(e[i],o)?N(e,i,l):N(e,++l,r),l<=n&&(i=l+1),n<=l&&(r=l-1)}return e})(n,o).subarray(0,o+1));return a+(O(n.subarray(o+1))-a)*(s-o)}}function I(t,e,n){t*=1,e*=1,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=Array(r);++i<r;)s[i]=t+i*n;return s}function R(t){return t}function V(t){return"translate("+t+",0)"}function P(t){return"translate(0,"+t+")"}function q(){return!this.__axis}function F(t,e){var n=[],i=null,r=null,s=6,o=6,a=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,u=1===t||4===t?-1:1,h=4===t||2===t?"x":"y",c=1===t||3===t?V:P;function p(p){var d=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,f=null==r?e.tickFormat?e.tickFormat.apply(e,n):R:r,m=Math.max(s,0)+a,g=e.range(),v=+g[0]+l,y=+g[g.length-1]+l,x=(e.bandwidth?function(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}:function(t){return e=>+t(e)})(e.copy(),l),w=p.selection?p.selection():p,b=w.selectAll(".domain").data([null]),T=w.selectAll(".tick").data(d,e).order(),A=T.exit(),C=T.enter().append("g").attr("class","tick"),k=T.select("line"),S=T.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(C),k=k.merge(C.append("line").attr("stroke","currentColor").attr(h+"2",u*s)),S=S.merge(C.append("text").attr("fill","currentColor").attr(h,u*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),p!==w&&(b=b.transition(p),T=T.transition(p),k=k.transition(p),S=S.transition(p),A=A.transition(p).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=x(t))?c(t+l):this.getAttribute("transform")}),C.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return c((e&&isFinite(e=e(t))?e:x(t))+l)})),A.remove(),b.attr("d",4===t||2===t?o?"M"+u*o+","+v+"H"+l+"V"+y+"H"+u*o:"M"+l+","+v+"V"+y:o?"M"+v+","+u*o+"V"+l+"H"+y+"V"+u*o:"M"+v+","+l+"H"+y),T.attr("opacity",1).attr("transform",function(t){return c(x(t)+l)}),k.attr(h+"2",u*s),S.attr(h,u*m).text(f),w.filter(q).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each(function(){this.__axis=x})}return p.scale=function(t){return arguments.length?(e=t,p):e},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),p):n.slice()},p.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),p):i&&i.slice()},p.tickFormat=function(t){return arguments.length?(r=t,p):r},p.tickSize=function(t){return arguments.length?(s=o=+t,p):s},p.tickSizeInner=function(t){return arguments.length?(s=+t,p):s},p.tickSizeOuter=function(t){return arguments.length?(o=+t,p):o},p.tickPadding=function(t){return arguments.length?(a=+t,p):a},p.offset=function(t){return arguments.length?(l=+t,p):l},p}function j(t){return F(3,t)}function $(t){return F(4,t)}function L(){}function W(t){return null==t?L:function(){return this.querySelector(t)}}function B(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function z(){return[]}function U(t){return null==t?z:function(){return this.querySelectorAll(t)}}function X(t){return function(){return this.matches(t)}}function Y(t){return function(e){return e.matches(t)}}var G=Array.prototype.find;function H(){return this.firstElementChild}var Z=Array.prototype.filter;function Q(){return Array.from(this.children)}function J(t){return Array(t.length)}function K(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function tt(t,e,n,i,r,s){for(var o,a=0,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new K(t,s[a]);for(;a<l;++a)(o=e[a])&&(r[a]=o)}function te(t,e,n,i,r,s,o){var a,l,u,h=new Map,c=e.length,p=s.length,d=Array(c);for(a=0;a<c;++a)(l=e[a])&&(d[a]=u=o.call(l,l.__data__,a,e)+"",h.has(u)?r[a]=l:h.set(u,l));for(a=0;a<p;++a)u=o.call(t,s[a],a,s)+"",(l=h.get(u))?(i[a]=l,l.__data__=s[a],h.delete(u)):n[a]=new K(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&h.get(d[a])===l&&(r[a]=l)}function tn(t){return t.__data__}function ti(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}K.prototype={constructor:K,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var tr="http://www.w3.org/1999/xhtml";let ts={svg:"http://www.w3.org/2000/svg",xhtml:tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function to(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ts.hasOwnProperty(e)?{space:ts[e],local:t}:t}function ta(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tl(t,e){return t.style.getPropertyValue(e)||ta(t).getComputedStyle(t,null).getPropertyValue(e)}function tu(t){return t.trim().split(/^|\s+/)}function th(t){return t.classList||new tc(t)}function tc(t){this._node=t,this._names=tu(t.getAttribute("class")||"")}function tp(t,e){for(var n=th(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function td(t,e){for(var n=th(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function tf(){this.textContent=""}function tm(){this.innerHTML=""}function t_(){this.nextSibling&&this.parentNode.appendChild(this)}function tg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tv(t){var e=to(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tr&&e.documentElement.namespaceURI===tr?e.createElement(t):e.createElementNS(n,t)}})(e)}function ty(){return null}function tx(){var t=this.parentNode;t&&t.removeChild(this)}function tw(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tb(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tT(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)(n=e[i],t.type&&n.type!==t.type||n.name!==t.name)?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function tA(t,e,n){return function(){var i,r=this.__on,s=function(t){e.call(this,t,this.__data__)};if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function tC(t,e,n){var i=ta(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}tc.prototype={add:function(t){0>this._names.indexOf(t)&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var tk=[null];function tS(t,e){this._groups=t,this._parents=e}function tM(){return new tS([[document.documentElement]],tk)}tS.prototype=tM.prototype={constructor:tS,select:function(t){"function"!=typeof t&&(t=W(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var s,o,a=e[r],l=a.length,u=i[r]=Array(l),h=0;h<l;++h)(s=a[h])&&(o=t.call(s,s.__data__,h,a))&&("__data__"in s&&(o.__data__=s.__data__),u[h]=o);return new tS(i,this._parents)},selectAll:function(t){if("function"==typeof t){var e;e=t,t=function(){return B(e.apply(this,arguments))}}else t=U(t);for(var n=this._groups,i=n.length,r=[],s=[],o=0;o<i;++o)for(var a,l=n[o],u=l.length,h=0;h<u;++h)(a=l[h])&&(r.push(t.call(a,a.__data__,h,l)),s.push(a));return new tS(r,s)},selectChild:function(t){var e;return this.select(null==t?H:(e="function"==typeof t?t:Y(t),function(){return G.call(this.children,e)}))},selectChildren:function(t){var e;return this.selectAll(null==t?Q:(e="function"==typeof t?t:Y(t),function(){return Z.call(this.children,e)}))},filter:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,l=i[r]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new tS(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,tn);var n=e?te:tt,i=this._parents,r=this._groups;"function"!=typeof t&&(y=t,t=function(){return y});for(var s=r.length,o=Array(s),a=Array(s),l=Array(s),u=0;u<s;++u){var h=i[u],c=r[u],p=c.length,d="object"==typeof(v=t.call(h,h&&h.__data__,u,i))&&"length"in v?v:Array.from(v),f=d.length,m=a[u]=Array(f),g=o[u]=Array(f);n(h,c,m,g,l[u]=Array(p),d,e);for(var v,y,x,w,b=0,T=0;b<f;++b)if(x=m[b]){for(b>=T&&(T=b+1);!(w=g[T])&&++T<f;);x._next=w||null}}return(o=new tS(o,i))._enter=a,o._exit=l,o},enter:function(){return new tS(this._enter||this._groups.map(J),this._parents)},exit:function(){return new tS(this._exit||this._groups.map(J),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=Array(r),l=0;l<o;++l)for(var u,h=n[l],c=i[l],p=h.length,d=a[l]=Array(p),f=0;f<p;++f)(u=h[f]||c[f])&&(d[f]=u);for(;l<r;++l)a[l]=n[l];return new tS(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ti);for(var n=this._groups,i=n.length,r=Array(i),s=0;s<i;++s){for(var o,a=n[s],l=a.length,u=r[s]=Array(l),h=0;h<l;++h)(o=a[h])&&(u[h]=o);u.sort(e)}return new tS(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(let e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var n=to(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):tl(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=tu(t+"");if(arguments.length<2){for(var i=th(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?tp:td)(this,t)}}:e?function(t){return function(){tp(this,t)}}:function(t){return function(){td(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?tf:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?tm:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(t_)},lower:function(){return this.each(tg)},append:function(t){var e="function"==typeof t?t:tv(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:tv(t),i=null==e?ty:"function"==typeof e?e:W(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(tx)},clone:function(t){return this.select(t?tb:tw)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var l,u=0,h=a.length;u<h;++u)for(i=0,l=a[u];i<o;++i)if((r=s[i]).type===l.type&&r.name===l.name)return l.value}return}for(i=0,a=e?tA:tT;i<o;++i)this.each(a(s[i],e,n));return this},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return tC(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return tC(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,o=r.length;s<o;++s)(i=r[s])&&(yield i)}};var tO={value:()=>{}};function tE(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw Error("illegal type: "+t);i[t]=[]}return new tN(i)}function tN(t){this._=t}function tD(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=tO,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}tN.prototype=tE.prototype={constructor:tN,on:function(t,e){var n,i=this._,r=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((n=(t=r[s]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=tD(i[n],t.name,e);else if(null==e)for(n in i)i[n]=tD(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new tN(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(i=this._[t],s=0,n=i.length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var tI,tR,tV=0,tP=0,tq=0,tF=0,tj=0,t$=0,tL="object"==typeof performance&&performance.now?performance:Date,tW="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tB(){return tj||(tW(tz),tj=tL.now()+t$)}function tz(){tj=0}function tU(){this._call=this._time=this._next=null}function tX(t,e,n){var i=new tU;return i.restart(t,e,n),i}function tY(){tj=(tF=tL.now())+t$,tV=tP=0;try{tB(),++tV;for(var t,e=tI;e;)(t=tj-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tV}finally{tV=0,function(){for(var t,e,n=tI,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:tI=e);tR=t,tH(i)}(),tj=0}}function tG(){var t=tL.now(),e=t-tF;e>1e3&&(t$-=e,tF=t)}function tH(t){!tV&&(tP&&(tP=clearTimeout(tP)),t-tj>24?(t<1/0&&(tP=setTimeout(tY,t-tL.now()-t$)),tq&&(tq=clearInterval(tq))):(tq||(tF=tL.now(),tq=setInterval(tG,1e3)),tV=1,tW(tY)))}function tZ(t,e,n){var i=new tU;return e=null==e?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,n),i}tU.prototype=tX.prototype={constructor:tU,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?tB():+n)+(null==e?0:+e),this._next||tR===this||(tR?tR._next=this:tI=this,tR=this),this._call=t,this._time=n,tH()},stop:function(){this._call&&(this._call=null,this._time=1/0,tH())}};var tQ=tE("start","end","cancel","interrupt"),tJ=[];function tK(t,e,n,i,r,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(l){var u,h,c,p;if(1!==n.state)return a();for(u in r)if((p=r[u]).name===n.name){if(3===p.state)return tZ(s);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=6,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(tZ(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(u=0,n.state=3,i=Array(c=n.tween.length),h=-1;u<c;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),s=-1,o=i.length;++s<o;)i[s].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=tX(function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:tQ,tween:tJ,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function t0(t,e){var n=t2(t,e);if(n.state>0)throw Error("too late; already scheduled");return n}function t1(t,e){var n=t2(t,e);if(n.state>3)throw Error("too late; already running");return n}function t2(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw Error("transition not found");return n}function t3(t,e){return t*=1,e*=1,function(n){return t*(1-n)+e*n}}var t8=180/Math.PI,t4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function t6(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*t8,skewX:Math.atan(l)*t8,scaleX:o,scaleY:a}}function t5(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,o){var a,l,u,h,c=[],p=[];return s=t(s),o=t(o),!function(t,i,r,s,o,a){if(t!==r||i!==s){var l=o.push("translate(",null,e,null,n);a.push({i:l-4,x:t3(t,r)},{i:l-2,x:t3(i,s)})}else(r||s)&&o.push("translate("+r+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,c,p),a=s.rotate,l=o.rotate,a!==l?(a-l>180?l+=360:l-a>180&&(a+=360),p.push({i:c.push(r(c)+"rotate(",null,i)-2,x:t3(a,l)})):l&&c.push(r(c)+"rotate("+l+i),u=s.skewX,h=o.skewX,u!==h?p.push({i:c.push(r(c)+"skewX(",null,i)-2,x:t3(u,h)}):h&&c.push(r(c)+"skewX("+h+i),!function(t,e,n,i,s,o){if(t!==n||e!==i){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:t3(t,n)},{i:a-2,x:t3(e,i)})}else(1!==n||1!==i)&&s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,c,p),s=o=null,function(t){for(var e,n=-1,i=p.length;++n<i;)c[(e=p[n]).i]=e.x(t);return c.join("")}}}var t9=t5(function(t){let e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?t4:t6(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),t7=t5(function(t){return null==t?t4:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",t),t=r.transform.baseVal.consolidate())?t6((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):t4},", ",")",")");function et(t,e,n){var i=t._id;return t.each(function(){var t=t1(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return t2(t,i).value[e]}}function ee(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function en(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ei(){}var er="\\s*([+-]?\\d+)\\s*",es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ea=/^#([0-9a-f]{3,8})$/,el=RegExp(`^rgb\\(${er},${er},${er}\\)$`),eu=RegExp(`^rgb\\(${eo},${eo},${eo}\\)$`),eh=RegExp(`^rgba\\(${er},${er},${er},${es}\\)$`),ec=RegExp(`^rgba\\(${eo},${eo},${eo},${es}\\)$`),ep=RegExp(`^hsl\\(${es},${eo},${eo}\\)$`),ed=RegExp(`^hsla\\(${es},${eo},${eo},${es}\\)$`),ef={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function em(){return this.rgb().formatHex()}function e_(){return this.rgb().formatRgb()}function eg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ea.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ev(e):3===n?new ew(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ey(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ey(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=el.exec(t))?new ew(e[1],e[2],e[3],1):(e=eu.exec(t))?new ew(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=eh.exec(t))?ey(e[1],e[2],e[3],e[4]):(e=ec.exec(t))?ey(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ep.exec(t))?eS(e[1],e[2]/100,e[3]/100,1):(e=ed.exec(t))?eS(e[1],e[2]/100,e[3]/100,e[4]):ef.hasOwnProperty(t)?ev(ef[t]):"transparent"===t?new ew(NaN,NaN,NaN,0):null}function ev(t){return new ew(t>>16&255,t>>8&255,255&t,1)}function ey(t,e,n,i){return i<=0&&(t=e=n=NaN),new ew(t,e,n,i)}function ex(t,e,n,i){var r;return 1==arguments.length?((r=t)instanceof ei||(r=eg(r)),r)?new ew((r=r.rgb()).r,r.g,r.b,r.opacity):new ew:new ew(t,e,n,null==i?1:i)}function ew(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function eb(){return`#${ek(this.r)}${ek(this.g)}${ek(this.b)}`}function eT(){let t=eA(this.opacity);return`${1===t?"rgb(":"rgba("}${eC(this.r)}, ${eC(this.g)}, ${eC(this.b)}${1===t?")":`, ${t})`}`}function eA(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eC(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ek(t){return((t=eC(t))<16?"0":"")+t.toString(16)}function eS(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new eO(t,e,n,i)}function eM(t){if(t instanceof eO)return new eO(t.h,t.s,t.l,t.opacity);if(t instanceof ei||(t=eg(t)),!t)return new eO;if(t instanceof eO)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(o=e===s?(n-i)/a+(n<i)*6:n===s?(i-e)/a+2:(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new eO(o,a,l,t.opacity)}function eO(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function eE(t){return(t=(t||0)%360)<0?t+360:t}function eN(t){return Math.max(0,Math.min(1,t||0))}function eD(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function eI(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}ee(ei,eg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:em,formatHex:em,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return eM(this).formatHsl()},formatRgb:e_,toString:e_}),ee(ew,ex,en(ei,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new ew(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ew(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ew(eC(this.r),eC(this.g),eC(this.b),eA(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eb,formatHex:eb,formatHex8:function(){return`#${ek(this.r)}${ek(this.g)}${ek(this.b)}${ek((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:eT,toString:eT})),ee(eO,function(t,e,n,i){return 1==arguments.length?eM(t):new eO(t,e,n,null==i?1:i)},en(ei,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new eO(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new eO(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ew(eD(t>=240?t-240:t+120,r,i),eD(t,r,i),eD(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new eO(eE(this.h),eN(this.s),eN(this.l),eA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=eA(this.opacity);return`${1===t?"hsl(":"hsla("}${eE(this.h)}, ${100*eN(this.s)}%, ${100*eN(this.l)}%${1===t?")":`, ${t})`}`}}));let eR=t=>()=>t;function eV(t,e){var n,i,r=e-t;return r?(n=t,i=r,function(t){return n+t*i}):eR(isNaN(t)?e:t)}let eP=function t(e){var n,i=1==(n=+e)?eV:function(t,e){var i,r,s;return e-t?(i=t,r=e,i=Math.pow(i,s=n),r=Math.pow(r,s)-i,s=1/s,function(t){return Math.pow(i+t*r,s)}):eR(isNaN(t)?e:t)};function r(t,e){var n=i((t=ex(t)).r,(e=ex(e)).r),r=i(t.g,e.g),s=i(t.b,e.b),o=eV(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function eq(t){return function(e){var n,i,r=e.length,s=Array(r),o=Array(r),a=Array(r);for(n=0;n<r;++n)i=ex(e[n]),s[n]=i.r||0,o[n]=i.g||0,a[n]=i.b||0;return s=t(s),o=t(o),a=t(a),i.opacity=1,function(t){return i.r=s(t),i.g=o(t),i.b=a(t),i+""}}}eq(function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return eI((n-i/e)*e,o,r,s,a)}}),eq(function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],o=t[(i+1)%e],a=t[(i+2)%e];return eI((n-i/e)*e,r,s,o,a)}});var eF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ej=RegExp(eF.source,"g");function e$(t,e){var n,i,r,s,o,a=eF.lastIndex=ej.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(r=eF.exec(t))&&(s=ej.exec(e));)(o=s.index)>a&&(o=e.slice(a,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,h.push({i:l,x:t3(r,s)})),a=ej.lastIndex;return a<e.length&&(o=e.slice(a),u[l]?u[l]+=o:u[++l]=o),u.length<2?h[0]?(n=h[0].x,function(t){return n(t)+""}):(i=e,function(){return i}):(e=h.length,function(t){for(var n,i=0;i<e;++i)u[(n=h[i]).i]=n.x(t);return u.join("")})}function eL(t,e){var n;return("number"==typeof e?t3:e instanceof eg?eP:(n=eg(e))?(e=n,eP):e$)(t,e)}var eW=tM.prototype.constructor;function eB(t){return function(){this.style.removeProperty(t)}}var ez=0;function eU(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}var eX=tM.prototype;eU.prototype=(function(t){return tM().transition(t)}).prototype={constructor:eU,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=W(t));for(var i=this._groups,r=i.length,s=Array(r),o=0;o<r;++o)for(var a,l,u=i[o],h=u.length,c=s[o]=Array(h),p=0;p<h;++p)(a=u[p])&&(l=t.call(a,a.__data__,p,u))&&("__data__"in a&&(l.__data__=a.__data__),c[p]=l,tK(c[p],e,n,p,c,t2(a,n)));return new eU(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=U(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l,u=i[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var p,d=t.call(l,l.__data__,c,u),f=t2(l,n),m=0,g=d.length;m<g;++m)(p=d[m])&&tK(p,e,n,m,d,f);s.push(d),o.push(l)}return new eU(s,o,e,n)},selectChild:eX.selectChild,selectChildren:eX.selectChildren,filter:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,l=i[r]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new eU(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw Error();for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=Array(i),a=0;a<s;++a)for(var l,u=e[a],h=n[a],c=u.length,p=o[a]=Array(c),d=0;d<c;++d)(l=u[d]||h[d])&&(p[d]=l);for(;a<i;++a)o[a]=e[a];return new eU(o,this._parents,this._name,this._id)},selection:function(){return new eW(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++ez,i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],l=a.length,u=0;u<l;++u)if(o=a[u]){var h=t2(o,e);tK(o,t,n,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new eU(i,this._parents,t,n)},call:eX.call,nodes:eX.nodes,node:eX.node,size:eX.size,empty:eX.empty,each:eX.each,on:function(t,e){var n,i,r,s,o,a,l=this._id;return arguments.length<2?t2(this.node(),l).on.on(t):this.each((n=l,i=t,r=e,a=(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?t0:t1,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(i,r),t.on=o}))},attr:function(t,e){var n=to(t),i="transform"===n?t7:eL;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,r,s;return function(){var o,a,l=n(this);return null==l?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,l))}}:function(t,e,n){var i,r,s;return function(){var o,a,l=n(this);return null==l?void this.removeAttribute(t):(o=this.getAttribute(t))===(a=l+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,l))}})(n,i,et(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i?r:r=e(i=o,n)}}:function(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===i?r:r=e(i=o,n)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();var i=to(t);return this.tween(n,(i.local?function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e){this.setAttributeNS(t.space,t.local,r.call(this,e))}),n}return r._value=e,r}:function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e){this.setAttribute(t,r.call(this,e))}),n}return r._value=e,r})(i,e))},style:function(t,e,n){var i,r,s,o,a,l,u,h,c,p,d,f,m,g,v,y,x,w,b,T,A,C="transform"==(t+="")?t9:eL;return null==e?this.styleTween(t,(i=t,function(){var t=tl(this,i),e=(this.style.removeProperty(i),tl(this,i));return t===e?null:t===r&&e===s?o:o=C(r=t,s=e)})).on("end.style."+t,eB(t)):"function"==typeof e?this.styleTween(t,(a=t,l=et(this,"style."+t,e),function(){var t=tl(this,a),e=l(this),n=e+"";return null==e&&(this.style.removeProperty(a),n=e=tl(this,a)),t===n?null:t===u&&n===h?c:(h=n,c=C(u=t,e))})).each((p=this._id,x="end."+(y="style."+(d=t)),function(){var t=t1(this,p),e=t.on,n=null==t.value[y]?v||(v=eB(d)):void 0;(e!==f||g!==n)&&(m=(f=e).copy()).on(x,g=n),t.on=m})):this.styleTween(t,(w=t,A=e+"",function(){var t=tl(this,w);return t===A?null:t===b?T:T=C(b=t,e)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw Error();return this.tween(i,function(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&function(e){this.style.setProperty(t,s.call(this,e),n)}),i}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){var e,n;return this.tween("text","function"==typeof t?(e=et(this,"text",t),function(){var t=e(this);this.textContent=null==t?"":t}):(n=null==t?"":t+"",function(){this.textContent=n}))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw Error();return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){this.textContent=i.call(this,t)}),e}return i._value=t,i}(t))},remove:function(){var t;return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=t2(this.node(),n).tween,s=0,o=r.length;s<o;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var r=t1(this,t),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}}r.tween=i}}:function(t,e,n){var i,r;if("function"!=typeof n)throw Error();return function(){var s=t1(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}s.tween=r}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){t0(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e*=1,function(){t0(this,t).delay=e}})(e,t)):t2(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){t1(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e*=1,function(){t1(this,t).duration=e}})(e,t)):t2(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw Error();return function(){t1(this,t).ease=e}}(e,t)):t2(this.node(),e).ease},easeVarying:function(t){var e;if("function"!=typeof t)throw Error();return this.each((e=this._id,function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw Error();t1(this,e).ease=n}))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){0==--r&&s()}};n.each(function(){var n=t1(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e}),0===r&&s()})},[Symbol.iterator]:eX[Symbol.iterator]};var eY={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};tM.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,i,r,s=t.__transition,o=!0;if(s){for(r in e=null==e?null:e+"",s){if((n=s[r]).name!==e){o=!1;continue}i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]}o&&delete t.__transition}}(this,t)})},tM.prototype.transition=function(t){var e,n;t instanceof eU?(e=t._id,t=t._name):(e=++ez,(n=eY).time=tB(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],l=a.length,u=0;u<l;++u)(o=a[u])&&tK(o,t,e,u,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw Error(`transition ${e} not found`);return n}(o,e));return new eU(i,this._parents,t,e)};var eG={name:"drag"},eH={name:"space"},eZ={name:"handle"},eQ={name:"center"};let{abs:eJ,max:eK,min:e0}=Math;function e1(t){return[+t[0],+t[1]]}function e2(t){return[e1(t[0]),e1(t[1])]}var e3={name:"x",handles:["w","e"].map(nt),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},e8={name:"y",handles:["n","s"].map(nt),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},e4=(["n","w","e","s","nw","ne","sw","se"].map(nt),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),e6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},e5={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},e9={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},e7={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function nt(t){return{type:t}}function ne(t){return!t.ctrlKey&&!t.button}function nn(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ni(){return navigator.maxTouchPoints||"ontouchstart"in this}function nr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ns(t){return"string"==typeof t?new tS([[document.querySelector(t)]],[document.documentElement]):new tS([[t]],tk)}function no(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}let na={passive:!1},nl={capture:!0,passive:!1};function nu(t){t.stopImmediatePropagation()}function nh(t){t.preventDefault(),t.stopImmediatePropagation()}let nc=t=>()=>t;function np(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:s,x:o,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function nd(t){return!t.ctrlKey&&!t.button}function nf(){return this.parentNode}function nm(t,e){return null==e?{x:t.x,y:t.y}:e}function n_(){return navigator.maxTouchPoints||"ontouchstart"in this}function ng(){var t,e,n,i,r=nd,s=nf,o=nm,a=n_,l={},u=tE("start","drag","end"),h=0,c=0;function p(t){t.on("mousedown.drag",d).filter(a).on("touchstart.drag",g).on("touchmove.drag",v,na).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(o,a){if(!i&&r.call(this,o,a)){var l,u,h,c=x(this,s.call(this,o,a),o,a,"mouse");c&&(ns(o.view).on("mousemove.drag",f,nl).on("mouseup.drag",m,nl),u=(l=o.view).document.documentElement,h=ns(l).on("dragstart.drag",nh,nl),"onselectstart"in u?h.on("selectstart.drag",nh,nl):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none"),nu(o),n=!1,t=o.clientX,e=o.clientY,c("start",o))}}function f(i){if(nh(i),!n){var r=i.clientX-t,s=i.clientY-e;n=r*r+s*s>c}l.mouse("drag",i)}function m(t){var e,i,r,s;ns(t.view).on("mousemove.drag mouseup.drag",null),e=t.view,i=n,r=e.document.documentElement,s=ns(e).on("dragstart.drag",null),i&&(s.on("click.drag",nh,nl),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in r?s.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),nh(t),l.mouse("end",t)}function g(t,e){if(r.call(this,t,e)){var n,i,o=t.changedTouches,a=s.call(this,t,e),l=o.length;for(n=0;n<l;++n)(i=x(this,a,t,e,o[n].identifier,o[n]))&&(nu(t),i("start",t,o[n]))}}function v(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=l[i[e].identifier])&&(nh(t),n("drag",t,i[e]))}function y(t){var e,n,r=t.changedTouches,s=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),e=0;e<s;++e)(n=l[r[e].identifier])&&(nu(t),n("end",t,r[e]))}function x(t,e,n,i,r,s){var a,c,d,f=u.copy(),m=no(s||n,e);if(null!=(d=o.call(t,new np("beforestart",{sourceEvent:n,target:p,identifier:r,active:h,x:m[0],y:m[1],dx:0,dy:0,dispatch:f}),i)))return a=d.x-m[0]||0,c=d.y-m[1]||0,function n(s,o,u){var g,v=m;switch(s){case"start":l[r]=n,g=h++;break;case"end":delete l[r],--h;case"drag":m=no(u||o,e),g=h}f.call(s,t,new np(s,{sourceEvent:o,subject:d,target:p,identifier:r,active:g,x:m[0]+a,y:m[1]+c,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:f}),i)}}return p.filter=function(t){return arguments.length?(r="function"==typeof t?t:nc(!!t),p):r},p.container=function(t){return arguments.length?(s="function"==typeof t?t:nc(t),p):s},p.subject=function(t){return arguments.length?(o="function"==typeof t?t:nc(t),p):o},p.touchable=function(t){return arguments.length?(a="function"==typeof t?t:nc(!!t),p):a},p.on=function(){var t=u.on.apply(u,arguments);return t===u?p:t},p.clickDistance=function(t){return arguments.length?(c=(t*=1)*t,p):Math.sqrt(c)},p}function nv(t,e){var n,i=1;function r(){var r,s,o=n.length,a=0,l=0;for(r=0;r<o;++r)a+=(s=n[r]).x,l+=s.y;for(a=(a/o-t)*i,l=(l/o-e)*i,r=0;r<o;++r)s=n[r],s.x-=a,s.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r}function ny(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s,o,a,l,u,h,c,p,d=t._root,f={data:i},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=f,t;for(;d.length;)if((u=e>=(s=(m+v)/2))?m=s:v=s,(h=n>=(o=(g+y)/2))?g=o:y=o,r=d,!(d=d[c=h<<1|u]))return r[c]=f,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return f.next=d,r?r[c]=f:t._root=f,t;do r=r?r[c]=[,,,,]:t._root=[,,,,],(u=e>=(s=(m+v)/2))?m=s:v=s,(h=n>=(o=(g+y)/2))?g=o:y=o;while((c=h<<1|u)==(p=(l>=o)<<1|a>=s));return r[p]=d,r[c]=f,t}function nx(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function nw(t){return t[0]}function nb(t){return t[1]}function nT(t,e,n){var i=new nA(null==e?nw:e,null==n?nb:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function nA(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function nC(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}np.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var nk=nT.prototype=nA.prototype;function nS(t){return function(){return t}}function nM(t){return(t()-.5)*1e-6}function nO(t){return t.x+t.vx}function nE(t){return t.y+t.vy}function nN(t){var e,n,i,r=1,s=1;function o(){for(var t,o,l,u,h,c,p,d=e.length,f=0;f<s;++f)for(t=0,o=nT(e,nO,nE).visitAfter(a);t<d;++t)p=(c=n[(l=e[t]).index])*c,u=l.x+l.vx,h=l.y+l.vy,o.visit(m);function m(t,e,n,s,o){var a=t.data,d=t.r,f=c+d;if(a){if(a.index>l.index){var m=u-a.x-a.vx,g=h-a.y-a.vy,v=m*m+g*g;v<f*f&&(0===m&&(v+=(m=nM(i))*m),0===g&&(v+=(g=nM(i))*g),v=(f-(v=Math.sqrt(v)))/v*r,l.vx+=(m*=v)*(f=(d*=d)/(p+d)),l.vy+=(g*=v)*f,a.vx-=m*(f=1-f),a.vy-=g*f)}return}return e>u+f||s<u-f||n>h+f||o<h-f}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,s=e.length;for(i=0,n=Array(s);i<s;++i)n[(r=e[i]).index]=+t(r,i,e)}}return"function"!=typeof t&&(t=nS(null==t?1:+t)),o.initialize=function(t,n){e=t,i=n,l()},o.iterations=function(t){return arguments.length?(s=+t,o):s},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:nS(+e),l(),o):t},o}function nD(t){return t.index}function nI(t,e){var n=t.get(e);if(!n)throw Error("node not found: "+e);return n}function nR(t){var e,n,i,r,s,o,a=nD,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},u=nS(30),h=1;function c(i){for(var r=0,a=t.length;r<h;++r)for(var l,u,c,p,d,f,m,g=0;g<a;++g)u=(l=t[g]).source,f=((f=Math.sqrt((p=(c=l.target).x+c.vx-u.x-u.vx||nM(o))*p+(d=c.y+c.vy-u.y-u.vy||nM(o))*d))-n[g])/f*i*e[g],p*=f,d*=f,c.vx-=p*(m=s[g]),c.vy-=d*m,u.vx+=p*(m=1-m),u.vy+=d*m}function p(){if(i){var o,l,u=i.length,h=t.length,c=new Map(i.map((t,e)=>[a(t,e,i),t]));for(o=0,r=Array(u);o<h;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=nI(c,l.source)),"object"!=typeof l.target&&(l.target=nI(c,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(o=0,s=Array(h);o<h;++o)l=t[o],s[o]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=Array(h),d(),n=Array(h),f()}}function d(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function f(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){i=t,o=e,p()},c.links=function(e){return arguments.length?(t=e,p(),c):t},c.id=function(t){return arguments.length?(a=t,c):a},c.iterations=function(t){return arguments.length?(h=+t,c):h},c.strength=function(t){return arguments.length?(l="function"==typeof t?t:nS(+t),d(),c):l},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:nS(+t),f(),c):u},c}function nV(t){return t.x}function nP(t){return t.y}nk.copy=function(){var t,e,n=new nA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=nC(i),n;for(t=[{source:i,target:n._root=[,,,,]}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=[,,,,]}):i.target[r]=nC(e));return n},nk.add=function(t){let e=+this._x.call(null,t),n=+this._y.call(null,t);return ny(this.cover(e,n),e,n,t)},nk.addAll=function(t){var e,n,i,r,s=t.length,o=Array(s),a=Array(s),l=1/0,u=1/0,h=-1/0,c=-1/0;for(n=0;n<s;++n)!(isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e)))&&(o[n]=i,a[n]=r,i<l&&(l=i),i>h&&(h=i),r<u&&(u=r),r>c&&(c=r));if(l>h||u>c)return this;for(this.cover(l,u).cover(h,c),n=0;n<s;++n)ny(this,o[n],a[n],t[n]);return this},nk.cover=function(t,e){if(isNaN(t*=1)||isNaN(e*=1))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o,a,l=r-n||1,u=this._root;n>t||t>=r||i>e||e>=s;)switch(a=(e<i)<<1|t<n,(o=[,,,,])[a]=u,u=o,l*=2,a){case 0:r=n+l,s=i+l;break;case 1:n=r-l,s=i+l;break;case 2:r=n+l,i=s-l;break;case 3:n=r-l,i=s-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},nk.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},nk.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nk.find=function(t,e,n){var i,r,s,o,a,l,u,h=this._x0,c=this._y0,p=this._x1,d=this._y1,f=[],m=this._root;for(m&&f.push(new nx(m,h,c,p,d)),null==n?n=1/0:(h=t-n,c=e-n,p=t+n,d=e+n,n*=n);l=f.pop();)if((m=l.node)&&!((r=l.x0)>p)&&!((s=l.y0)>d)&&!((o=l.x1)<h)&&!((a=l.y1)<c))if(m.length){var g=(r+o)/2,v=(s+a)/2;f.push(new nx(m[3],g,v,o,a),new nx(m[2],r,v,g,a),new nx(m[1],g,s,o,v),new nx(m[0],r,s,g,v)),(u=(e>=v)<<1|t>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-u],f[f.length-1-u]=l)}else{var y=t-this._x.call(null,m.data),x=e-this._y.call(null,m.data),w=y*y+x*x;if(w<n){var b=Math.sqrt(n=w);h=t-b,c=e-b,p=t+b,d=e+b,i=m.data}}return i},nk.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,s,o,a,l,u,h,c,p,d=this._root,f=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=s>=(a=(f+g)/2))?f=a:g=a,(h=o>=(l=(m+v)/2))?m=l:v=l,e=d,!(d=d[c=h<<1|u]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,p=c)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return((r=d.next)&&delete d.next,i)?r?i.next=r:delete i.next:e?(r?e[c]=r:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[p]=d:this._root=d)):this._root=r,this},nk.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},nk.root=function(){return this._root},nk.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},nk.visit=function(t){var e,n,i,r,s,o,a=[],l=this._root;for(l&&a.push(new nx(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,s=e.x1,o=e.y1)&&l.length){var u=(i+s)/2,h=(r+o)/2;(n=l[3])&&a.push(new nx(n,u,h,s,o)),(n=l[2])&&a.push(new nx(n,i,h,u,o)),(n=l[1])&&a.push(new nx(n,u,r,s,h)),(n=l[0])&&a.push(new nx(n,i,r,u,h))}return this},nk.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new nx(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var s,o=e.x0,a=e.y0,l=e.x1,u=e.y1,h=(o+l)/2,c=(a+u)/2;(s=r[0])&&n.push(new nx(s,o,a,h,c)),(s=r[1])&&n.push(new nx(s,h,a,l,c)),(s=r[2])&&n.push(new nx(s,o,c,h,u)),(s=r[3])&&n.push(new nx(s,h,c,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},nk.x=function(t){return arguments.length?(this._x=t,this):this._x},nk.y=function(t){return arguments.length?(this._y=t,this):this._y};var nq=Math.PI*(3-Math.sqrt(5));function nF(t){let e;var n,i=1,r=.001,s=1-Math.pow(.001,1/300),o=0,a=.6,l=new Map,u=tX(p),h=tE("tick","end"),c=(e=1,()=>(e=(1664525*e+0x3c6ef35f)%0x100000000)/0x100000000);function p(){d(),h.call("tick",n),i<r&&(u.stop(),h.call("end",n))}function d(e){var r,u,h=t.length;void 0===e&&(e=1);for(var c=0;c<e;++c)for(i+=(o-i)*s,l.forEach(function(t){t(i)}),r=0;r<h;++r)null==(u=t[r]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return n}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),s=n*nq;e.x=r*Math.cos(s),e.y=r*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function m(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),n={tick:d,restart:function(){return u.restart(p),n},stop:function(){return u.stop(),n},nodes:function(e){return arguments.length?(t=e,f(),l.forEach(m),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(s=+t,n):+s},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(c=t,l.forEach(m),n):c},force:function(t,e){return arguments.length>1?(null==e?l.delete(t):l.set(t,m(e)),n):l.get(t)},find:function(e,n,i){var r,s,o,a,l,u=0,h=t.length;for(null==i?i=1/0:i*=i,u=0;u<h;++u)(o=(r=e-(a=t[u]).x)*r+(s=n-a.y)*s)<i&&(l=a,i=o);return l},on:function(t,e){return arguments.length>1?(h.on(t,e),n):h.on(t)}}}function nj(){var t,e,n,i,r,s=nS(-30),o=1,a=1/0,l=.81;function u(n){var r,s=t.length,o=nT(t,nV,nP).visitAfter(c);for(i=n,r=0;r<s;++r)e=t[r],o.visit(p)}function h(){if(t){var e,n,i=t.length;for(e=0,r=Array(i);e<i;++e)r[(n=t[e]).index]=+s(n,e,t)}}function c(t){var e,n,i,s,o,a=0,l=0;if(t.length){for(i=s=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,i+=n*e.x,s+=n*e.y);t.x=i/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do a+=r[e.data.index];while(e=e.next)}t.value=a}function p(t,s,u,h){if(!t.value)return!0;var c=t.x-e.x,p=t.y-e.y,d=h-s,f=c*c+p*p;if(d*d/l<f)return f<a&&(0===c&&(f+=(c=nM(n))*c),0===p&&(f+=(p=nM(n))*p),f<o&&(f=Math.sqrt(o*f)),e.vx+=c*t.value*i/f,e.vy+=p*t.value*i/f),!0;if(!t.length&&!(f>=a)){(t.data!==e||t.next)&&(0===c&&(f+=(c=nM(n))*c),0===p&&(f+=(p=nM(n))*p),f<o&&(f=Math.sqrt(o*f)));do t.data!==e&&(d=r[t.data.index]*i/f,e.vx+=c*d,e.vy+=p*d);while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,h()},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:nS(+t),h(),u):s},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function n$(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?eR(e):("number"===r?t3:"string"===r?(i=eg(e))?(e=i,eP):e$:e instanceof eg?eP:e instanceof Date?function(t,e){var n=new Date;return t*=1,e*=1,function(i){return n.setTime(t*(1-i)+e*i),n}}:!ArrayBuffer.isView(n=e)||n instanceof DataView?Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=Array(r),o=Array(i);for(n=0;n<r;++n)s[n]=n$(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=s[n](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)n in t?i[n]=n$(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:t3:function(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}})(t,e)}function nL(t,e){return t*=1,e*=1,function(n){return Math.round(t*(1-n)+e*n)}}function nW(t){return+t}var nB=[0,1];function nz(t){return t}function nU(t,e){var n;return(e-=t*=1)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n})}function nX(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=nU(r,i),s=n(o,s)):(i=nU(i,r),s=n(s,o)),function(t){return s(i(t))}}function nY(t,e,n){var i=Math.min(t.length,e.length)-1,r=Array(i),s=Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=nU(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=g(t,e,1,i)-1;return s[n](r[n](e))}}function nG(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var nH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nZ(t){var e;if(!(e=nH.exec(t)))throw Error("invalid format: "+t);return new nQ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function nQ(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function nJ(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function nK(t){return(t=nJ(Math.abs(t)))?t[1]:NaN}function n0(t,e){var n=nJ(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+Array(r-i.length+2).join("0")}nZ.prototype=nQ.prototype,nQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let n1={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>n0(100*t,e),r:n0,s:function(t,e){var n=nJ(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(s=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+Array(1-o).join("0")+nJ(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n2(t){return t}var n3=Array.prototype.map,n8=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function n4(t){return"string"==typeof t?new tS([document.querySelectorAll(t)],[document.documentElement]):new tS([B(t)],tk)}function n6(t){return function(){return t}}a=(o=function(t){var e,n,i,r=void 0===t.grouping||void 0===t.thousands?n2:(e=n3.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?n2:(i=n3.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return i[+t]})}),h=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",p=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=nZ(t)).fill,n=t.align,i=t.sign,d=t.symbol,f=t.zero,m=t.width,g=t.comma,v=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):n1[x]||(void 0===v&&(v=12),y=!0,x="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var w="$"===d?o:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===d?a:/[%p]/.test(x)?h:"",T=n1[x],A=/[defgprs%]/.test(x);function C(t){var o,a,h,d=w,C=b;if("c"===x)C=T(t)+C,t="";else{var k=(t*=1)<0||1/t<0;if(t=isNaN(t)?p:T(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==i&&(k=!1),d=(k?"("===i?i:c:"-"===i||"("===i?"":i)+d,C=("s"===x?n8[8+s/3]:"")+C+(k&&"("===i?")":""),A){for(o=-1,a=t.length;++o<a;)if(48>(h=t.charCodeAt(o))||h>57){C=(46===h?l+t.slice(o+1):t.slice(o))+C,t=t.slice(0,o);break}}}g&&!f&&(t=r(t,1/0));var S=d.length+t.length+C.length,M=S<m?Array(m-S+1).join(e):"";switch(g&&f&&(t=r(M+t,M.length?m-C.length:1/0),M=""),n){case"<":t=d+t+C+M;break;case"=":t=d+M+t+C;break;case"^":t=M.slice(0,S=M.length>>1)+d+t+C+M.slice(S);break;default:t=M+d+t+C}return u(t)}return v=void 0===v?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),C.toString=function(){return t+""},C}return{format:d,formatPrefix:function(t,e){var n=d(((t=nZ(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(nK(e)/3))),r=Math.pow(10,-i),s=n8[8+i/3];return function(t){return n(r*t)+s}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,l=o.formatPrefix;let n5=Math.abs,n9=Math.atan2,n7=Math.cos,it=Math.max,ie=Math.min,ii=Math.sin,ir=Math.sqrt,is=Math.PI,io=is/2,ia=2*is;function il(t){return t>=1?io:t<=-1?-io:Math.asin(t)}let iu=Math.PI,ih=2*iu,ic=ih-1e-6;function ip(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class id{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?ip:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return ip;let n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,s){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+s}`}arcTo(t,e,n,i,r){if(t*=1,e*=1,n*=1,i*=1,(r*=1)<0)throw Error(`negative radius: ${r}`);let s=this._x1,o=this._y1,a=n-t,l=i-e,u=s-t,h=o-e,c=u*u+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(c>1e-6)if(Math.abs(h*a-l*u)>1e-6&&r){let p=n-s,d=i-o,f=a*a+l*l,m=Math.sqrt(f),g=Math.sqrt(c),v=r*Math.tan((iu-Math.acos((f+c-(p*p+d*d))/(2*m*g)))/2),y=v/g,x=v/m;Math.abs(y-1)>1e-6&&this._append`L${t+y*u},${e+y*h}`,this._append`A${r},${r},0,0,${+(h*p>u*d)},${this._x1=t+x*a},${this._y1=e+x*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,i,r,s){if(t*=1,e*=1,n*=1,s=!!s,n<0)throw Error(`negative radius: ${n}`);let o=n*Math.cos(i),a=n*Math.sin(i),l=t+o,u=e+a,h=1^s,c=s?i-r:r-i;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&this._append`L${l},${u}`,n&&(c<0&&(c=c%ih+ih),c>ic?this._append`A${n},${n},0,1,${h},${t-o},${e-a}A${n},${n},0,1,${h},${this._x1=l},${this._y1=u}`:c>1e-6&&this._append`A${n},${n},0,${+(c>=iu)},${h},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n*=1}v${+i}h${-n}Z`}toString(){return this._}}function im(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{let t=Math.floor(n);if(!(t>=0))throw RangeError(`invalid digits: ${n}`);e=t}return t},()=>new id(e)}function i_(t){return t.innerRadius}function ig(t){return t.outerRadius}function iv(t){return t.startAngle}function iy(t){return t.endAngle}function ix(t){return t&&t.padAngle}function iw(t,e,n,i,r,s,o){var a=t-n,l=e-i,u=(o?s:-s)/ir(a*a+l*l),h=u*l,c=-u*a,p=t+h,d=e+c,f=n+h,m=i+c,g=(p+f)/2,v=(d+m)/2,y=f-p,x=m-d,w=y*y+x*x,b=r-s,T=p*m-f*d,A=(x<0?-1:1)*ir(it(0,b*b*w-T*T)),C=(T*x-y*A)/w,k=(-T*y-x*A)/w,S=(T*x+y*A)/w,M=(-T*y+x*A)/w,O=C-g,E=k-v,N=S-g,D=M-v;return O*O+E*E>N*N+D*D&&(C=S,k=M),{cx:C,cy:k,x01:-h,y01:-c,x11:C*(r/b-1),y11:k*(r/b-1)}}function ib(){var t=i_,e=ig,n=n6(0),i=null,r=iv,s=iy,o=ix,a=null,l=im(u);function u(){var u,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),d=r.apply(this,arguments)-io,f=s.apply(this,arguments)-io,m=n5(f-d),g=f>d;if(a||(a=u=l()),p<c&&(h=p,p=c,c=h),p>1e-12)if(m>ia-1e-12)a.moveTo(p*n7(d),p*ii(d)),a.arc(0,0,p,d,f,!g),c>1e-12&&(a.moveTo(c*n7(f),c*ii(f)),a.arc(0,0,c,f,d,g));else{var v,y,x=d,w=f,b=d,T=f,A=m,C=m,k=o.apply(this,arguments)/2,S=k>1e-12&&(i?+i.apply(this,arguments):ir(c*c+p*p)),M=ie(n5(p-c)/2,+n.apply(this,arguments)),O=M,E=M;if(S>1e-12){var N=il(S/c*ii(k)),D=il(S/p*ii(k));(A-=2*N)>1e-12?(N*=g?1:-1,b+=N,T-=N):(A=0,b=T=(d+f)/2),(C-=2*D)>1e-12?(D*=g?1:-1,x+=D,w-=D):(C=0,x=w=(d+f)/2)}var I=p*n7(x),R=p*ii(x),V=c*n7(T),P=c*ii(T);if(M>1e-12){var q,F=p*n7(w),j=p*ii(w),$=c*n7(b),L=c*ii(b);if(m<is)if(q=function(t,e,n,i,r,s,o,a){var l=n-t,u=i-e,h=o-r,c=a-s,p=c*l-h*u;if(!(p*p<1e-12))return p=(h*(e-s)-c*(t-r))/p,[t+p*l,e+p*u]}(I,R,$,L,F,j,V,P)){var W,B=I-q[0],z=R-q[1],U=F-q[0],X=j-q[1],Y=1/ii(((W=(B*U+z*X)/(ir(B*B+z*z)*ir(U*U+X*X)))>1?0:W<-1?is:Math.acos(W))/2),G=ir(q[0]*q[0]+q[1]*q[1]);O=ie(M,(c-G)/(Y-1)),E=ie(M,(p-G)/(Y+1))}else O=E=0}C>1e-12?E>1e-12?(v=iw($,L,I,R,p,E,g),y=iw(F,j,V,P,p,E,g),a.moveTo(v.cx+v.x01,v.cy+v.y01),E<M?a.arc(v.cx,v.cy,E,n9(v.y01,v.x01),n9(y.y01,y.x01),!g):(a.arc(v.cx,v.cy,E,n9(v.y01,v.x01),n9(v.y11,v.x11),!g),a.arc(0,0,p,n9(v.cy+v.y11,v.cx+v.x11),n9(y.cy+y.y11,y.cx+y.x11),!g),a.arc(y.cx,y.cy,E,n9(y.y11,y.x11),n9(y.y01,y.x01),!g))):(a.moveTo(I,R),a.arc(0,0,p,x,w,!g)):a.moveTo(I,R),c>1e-12&&A>1e-12?O>1e-12?(v=iw(V,P,F,j,c,-O,g),y=iw(I,R,$,L,c,-O,g),a.lineTo(v.cx+v.x01,v.cy+v.y01),O<M?a.arc(v.cx,v.cy,O,n9(v.y01,v.x01),n9(y.y01,y.x01),!g):(a.arc(v.cx,v.cy,O,n9(v.y01,v.x01),n9(v.y11,v.x11),!g),a.arc(0,0,c,n9(v.cy+v.y11,v.cx+v.x11),n9(y.cy+y.y11,y.cx+y.x11),g),a.arc(y.cx,y.cy,O,n9(y.y11,y.x11),n9(y.y01,y.x01),!g))):a.arc(0,0,c,T,b,g):a.lineTo(V,P)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-is/2;return[n7(i)*n,ii(i)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:n6(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:n6(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:n6(+t),u):n},u.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:n6(+t),u):i},u.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:n6(+t),u):r},u.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:n6(+t),u):s},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:n6(+t),u):o},u.context=function(t){return arguments.length?(a=null==t?null:t,u):a},u}function iT(t){this._context=t}function iA(t){return new iT(t)}function iC(t){return t[0]}function ik(t){return t[1]}function iS(t,e){var n=n6(!0),i=null,r=iA,s=null,o=im(a);function a(a){var l,u,h,c,p=(a="object"==typeof(l=a)&&"length"in l?l:Array.from(l)).length,d=!1;for(null==i&&(s=r(c=o())),u=0;u<=p;++u)!(u<p&&n(h=a[u],u,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,u,a),+e(h,u,a));if(c)return s=null,c+""||null}return t="function"==typeof t?t:void 0===t?iC:n6(t),e="function"==typeof e?e:void 0===e?ik:n6(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:n6(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:n6(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:n6(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),a):i},a}function iM(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function iO(t){this._context=t}function iE(t){return new iO(t)}function iN(t,e,n){this.k=t,this.x=e,this.y=n}id.prototype,Array.prototype.slice,iT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t*=1,e*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},iO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t*=1,e*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iM(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},iN.prototype={constructor:iN,scale:function(t){return 1===t?this:new iN(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new iN(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var iD=new iN(1,0,0);iN.prototype},1727:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},2419:t=>{t.exports=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},3539:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},4250:function(t,e,n){(function(t,e,n,i){"use strict";var r=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},s=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},o=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},l=function(t,e,n){var i=n.startTime,r=n.target;return r+(e-r)*Math.exp((i-t)/n.timeConstant)},u=function(t){return"exponentialRampToValue"===t.type},h=function(t){return"linearRampToValue"===t.type},c=function(t){return u(t)||h(t)},p=function(t){return"setValue"===t.type},d=function(t){return"setValueCurve"===t.type},f=function(t,e,n,i){var r=t[e];return void 0===r?i:c(r)||p(r)?r.value:d(r)?r.values[r.values.length-1]:l(n,f(t,e-1,r.startTime,i),r)},m=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:c(n)?[n.endTime,n.value]:p(n)?[n.startTime,n.value]:d(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(t,e-1,n.startTime,r)]},g=function(t){return"cancelAndHold"===t.type},v=function(t){return"cancelScheduledValues"===t.type},y=function(t){return g(t)||v(t)?t.cancelTime:u(t)||h(t)?t.endTime:t.startTime},x=function(t,e,n,i){var r=i.endTime,s=i.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(t-e)/(r-e)):0},w=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},b=function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},T=function(t,e){var n=e.duration,i=e.startTime,r=e.values,s=(t-i)/n*(r.length-1);return b(r,s)},A=function(t){return"setTarget"===t.type};t.AutomationEventList=i(function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=y(t);if(g(t)||v(t)){var n=this._automationEvents.findIndex(function(n){return v(t)&&d(n)?n.startTime+n.duration>=e:y(n)>=e}),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(t)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&c(i)){if(void 0!==l&&A(l))throw Error("The internal list is malformed.");var p=void 0===l?i.insertTime:d(l)?l.startTime+l.duration:y(l),f=void 0===l?this._defaultValue:d(l)?l.values[l.values.length-1]:l.value,m=u(i)?x(e,p,f,i):w(e,p,f,i),b=u(i)?r(m,e,this._currenTime):s(m,e,this._currenTime);this._automationEvents.push(b)}if(void 0!==l&&A(l)&&this._automationEvents.push(o(this.getValue(e),e)),void 0!==l&&d(l)&&l.startTime+l.duration>e){var T=e-l.startTime,C=(l.values.length-1)/l.duration,k=Math.max(2,1+Math.ceil(T*C)),S=T/(k-1)*C,M=l.values.slice(0,k);if(S<1)for(var O=1;O<k;O+=1){var E=S*O%1;M[O]=l.values[O-1]*(1-E)+l.values[O]*E}this._automationEvents[this._automationEvents.length-1]=a(M,l.startTime,T)}}}else{var N=this._automationEvents.findIndex(function(t){return y(t)>e}),D=-1===N?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[N-1];if(void 0!==D&&d(D)&&y(D)+D.duration>e)return!1;var I=u(t)?r(t.value,t.endTime,this._currenTime):h(t)?s(t.value,e,this._currenTime):t;if(-1===N)this._automationEvents.push(I);else{if(d(t)&&e+t.duration>y(this._automationEvents[N]))return!1;this._automationEvents.splice(N,0,I)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return y(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];A(i)&&n.unshift(o(f(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(e){return y(e)>t}),i=this._automationEvents[n],r=(-1===n?this._automationEvents.length:n)-1,s=this._automationEvents[r];if(void 0!==s&&A(s)&&(void 0===i||!c(i)||i.insertTime>t))return l(t,f(this._automationEvents,r-1,s.startTime,this._defaultValue),s);if(void 0!==s&&p(s)&&(void 0===i||!c(i)))return s.value;if(void 0!==s&&d(s)&&(void 0===i||!c(i)||s.startTime+s.duration>t))return t<s.startTime+s.duration?T(t,s):s.values[s.values.length-1];if(void 0!==s&&c(s)&&(void 0===i||!c(i)))return s.value;if(void 0!==i&&u(i)){var o=e(m(this._automationEvents,r,s,i,this._defaultValue),2);return x(t,o[0],o[1],i)}if(void 0!==i&&h(i)){var a=e(m(this._automationEvents,r,s,i,this._defaultValue),2);return w(t,a[0],a[1],i)}return this._defaultValue}}]),t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=o,t.createSetValueCurveAutomationEvent=a})(e,n(5593),n(2419),n(6045))},4514:(t,e,n)=>{var i=n(3539);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},4947:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},5593:(t,e,n)=>{var i=n(4947),r=n(1727),s=n(4514),o=n(7034);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},6045:(t,e,n)=>{var i=n(6346);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},6346:(t,e,n)=>{var i=n(7382).default,r=n(8919);t.exports=function(t){var e=r(t,"string");return"symbol"==i(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},6758:(t,e,n)=>{"use strict";let i,r,s,o,a,l,u,h,c,p,d,f,m,g;n.d(e,{Bh:()=>sh,zb:()=>s_,RG:()=>so,ni:()=>re});let v="15.1.22";var y,x,w,b=n(4250);let T=new WeakSet,A=new WeakMap,C=new WeakMap,k=new WeakMap,S=new WeakMap,M=new WeakMap,O=new WeakMap,E=new WeakMap,N=new WeakMap,D=new WeakMap,I={construct:()=>I},R=t=>{try{new new Proxy(t,I)}catch{return!1}return!0},V=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,P=(t,e)=>{let n=[],i=t.replace(/^[\s]+/,""),r=i.match(V);for(;null!==r;){let t=r[1].slice(1,-1),s=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(s),r=(i=i.slice(r[0].length).replace(/^[\s]+/,"")).match(V)}return[n.join(";"),i]},q=t=>{if(void 0!==t&&!Array.isArray(t))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},F=t=>{if(!R(t))throw TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},j=(t,e)=>{let n=t.get(e);if(void 0===n)throw Error("A value with the given key could not be found.");return n},$=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");let[i]=n;return t.delete(i),i},L=(t,e,n,i)=>{let r=j(t,e),s=$(r,t=>t[0]===n&&t[1]===i);return 0===r.size&&t.delete(e),s},W=t=>j(O,t),B=t=>{if(T.has(t))throw Error("The AudioNode is already stored.");T.add(t),W(t).forEach(t=>t(!0))},z=t=>"port"in t,U=t=>{if(!T.has(t))throw Error("The AudioNode is not stored.");T.delete(t),W(t).forEach(t=>t(!1))},X=(t,e)=>{!z(t)&&e.every(t=>0===t.size)&&U(t)},Y={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},G=(t,e)=>t.context===e,H=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Z=()=>new DOMException("","IndexSizeError"),Q=t=>{let e;e=t.getChannelData,t.getChannelData=n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw Z();throw t}}},J={numberOfChannels:1},K=t=>T.has(t),tt={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},te=t=>"playbackRate"in t,tn=t=>"frequency"in t&&"gain"in t,ti=t=>"offset"in t,tr=t=>!("frequency"in t)&&"gain"in t,ts=t=>"detune"in t&&"frequency"in t&&!("gain"in t),to=t=>"pan"in t,ta=t=>j(A,t),tl=t=>j(k,t),tu=(t,e)=>{let{activeInputs:n}=ta(t);for(let i of(n.forEach(n=>n.forEach(([n])=>{e.includes(t)||tu(n,[...e,t])})),te(t)?[t.playbackRate]:z(t)?Array.from(t.parameters.values()):tn(t)?[t.Q,t.detune,t.frequency,t.gain]:ti(t)?[t.offset]:tr(t)?[t.gain]:ts(t)?[t.detune,t.frequency]:to(t)?[t.pan]:[])){let t=tl(i);void 0!==t&&t.activeInputs.forEach(([t])=>tu(t,e))}K(t)&&U(t)},th=t=>{tu(t.destination,[])},tc=t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t),tp=t=>"context"in t,td=t=>tp(t[0]),tf=(t,e,n,i)=>{for(let e of t)if(n(e)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},tm=(t,e,[n,i],r)=>{tf(t,[e,n,i],t=>t[0]===e&&t[1]===n,r)},t_=(t,[e,n,i],r)=>{let s=t.get(e);void 0===s?t.set(e,new Set([[n,i]])):tf(s,[n,i],t=>t[0]===n,r)},tg=t=>"inputs"in t,tv=(t,e,n,i)=>{if(tg(e)){let r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},ty=(t,e,n)=>{for(let i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},tx=(t,e,n)=>$(t,t=>t[0]===e&&t[1]===n),tw=(t,e)=>{if(!W(t).delete(e))throw Error("Missing the expected event listener.")},tb=(t,e,n)=>{let i=j(t,e),r=$(i,t=>t[0]===n);return 0===i.size&&t.delete(e),r},tT=(t,e,n,i)=>{tg(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},tA=t=>j(C,t),tC=t=>j(S,t),tk=t=>E.has(t),tS=t=>!T.has(t),tM=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{let e=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),s=r.getChannelData(0);s[0]=1,s[1]=1;let o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(e).connect(t.destination),o.connect(i),o.disconnect(i),e.onaudioprocess=i=>{let r=i.inputBuffer.getChannelData(0);Array.prototype.some.call(r,t=>1===t)?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}}),tO=(t,e)=>{let n=new Map;for(let e of t)for(let t of e){let e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},tE=t=>"context"in t,tN=t=>{let e,n=new Map;t.connect=(t=>(e,i=0,r=0)=>{let s=tE(e)?t(e,i,r):t(e,i),o=n.get(e);return void 0===o?n.set(e,[{input:r,output:i}]):o.every(t=>t.input!==r||t.output!==i)&&o.push({input:r,output:i}),s})(t.connect.bind(t)),e=t.disconnect,t.disconnect=(i,r,s)=>{if(e.apply(t),void 0===i)n.clear();else if("number"==typeof i)for(let[t,e]of n){let r=e.filter(t=>t.output!==i);0===r.length?n.delete(t):n.set(t,r)}else if(n.has(i))if(void 0===r)n.delete(i);else{let t=n.get(i);if(void 0!==t){let e=t.filter(t=>t.output!==r&&(t.input!==s||void 0===s));0===e.length?n.delete(i):n.set(i,e)}}for(let[e,i]of n)i.forEach(n=>{tE(e)?t.connect(e,n.output,n.input):t.connect(e,n.output)})}},tD=(t,e,n,i)=>{let{activeInputs:r,passiveInputs:s}=tl(e),{outputs:o}=ta(t),a=W(t),l=o=>{let a=tA(t),l=tC(e);if(o){let e=tb(s,t,n);tm(r,t,e,!1),i||tk(t)||a.connect(l,n)}else t_(s,tx(r,t,n),!1),i||tk(t)||a.disconnect(l,n)};return!!tf(o,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(a.add(l),K(t)?tm(r,t,[n,l],!0):t_(s,[t,n,l],!0),!0)},tI=(t,e,n,i)=>{let{activeInputs:r,passiveInputs:s}=ta(e),o=ty(r[i],t,n);return null===o?[L(s,t,n,i)[2],!1]:[o[2],!0]},tR=(t,e,n)=>{let{activeInputs:i,passiveInputs:r}=tl(e),s=ty(i,t,n);return null===s?[tb(r,t,n)[1],!1]:[s[2],!0]},tV=(t,e,n,i,r)=>{let[s,o]=tI(t,n,i,r);if(null!==s&&(tw(t,s),!o||e||tk(t)||tT(tA(t),tA(n),i,r)),K(n)){let{activeInputs:t}=ta(n);X(n,t)}},tP=(t,e,n,i)=>{let[r,s]=tR(t,n,i);null!==r&&(tw(t,r),!s||e||tk(t)||tA(t).disconnect(tC(n),i))},tq=(t,e)=>{let n=ta(t),i=[];for(let r of n.outputs)td(r)?tV(t,e,...r):tP(t,e,...r),i.push(r[0]);return n.outputs.clear(),i},tF=(t,e,n)=>{let i=ta(t),r=[];for(let s of i.outputs)s[1]===n&&(td(s)?tV(t,e,...s):tP(t,e,...s),r.push(s[0]),i.outputs.delete(s));return r},tj=(t,e,n,i,r)=>{let s=ta(t);return Array.from(s.outputs).filter(t=>t[0]===n&&(void 0===i||t[1]===i)&&(void 0===r||t[2]===r)).map(n=>(td(n)?tV(t,e,...n):tP(t,e,...n),s.outputs.delete(n),n[0]))};class t${constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,i)=>t.call(e,n,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}let tL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function tW(t,e,n,i,r){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{let s=t.getChannelData(i);if(0===e[n].byteLength)e[n]=s.slice(r,r+128);else{let t=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}let tB=(t,e,n,i,r)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},tz=(t,e)=>{let n=[];for(let i=0;i<t;i+=1){let t=[],r="number"==typeof e?e:e[i];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},tU=(t,e)=>{let n=j(D,t);return j(n,tA(e))},tX=async(t,e,n,i,r,s,o)=>{let a=null===e?128*Math.ceil(t.context.length/128):e.length,l=i.channelCount*i.numberOfInputs,u=r.reduce((t,e)=>t+e,0),h=0===u?null:n.createBuffer(u,a,n.sampleRate);if(void 0===s)throw Error("Missing the processor constructor.");let c=ta(t),p=await tU(n,t),d=tz(i.numberOfInputs,i.channelCount),f=tz(i.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let u=0;u<a;u+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)tW(e,d[t],n,n,u);void 0!==s.parameterDescriptors&&null!==e&&s.parameterDescriptors.forEach(({name:t},n)=>{tW(e,m,t,l+n,u)});for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{let t=d.map((t,e)=>0===c.activeInputs[e].size?[]:t),e=o(u/n.sampleRate,n.sampleRate,()=>p.process(t,f,m));if(null!==h)for(let t=0,e=0;t<i.numberOfOutputs;t+=1){for(let n=0;n<r[t];n+=1)tB(h,f[t],n,e+n,u);e+=r[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return h},tY={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tG={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tH={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},tZ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tQ={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tJ=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{let r=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},tK={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},t0=t=>"delayTime"in t,t1=(t,e,n)=>{let i=e[n];if(void 0===i)throw t();return i},t2={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},t3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},t8=()=>new DOMException("","InvalidStateError"),t4=()=>new DOMException("","InvalidAccessError"),t6=t=>{let e;e=t.getFrequencyResponse,t.getFrequencyResponse=(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw t4();return e.call(t,n,i,r)}},t5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},t9=(t,e,n,i,r,s,o,a,l,u,h)=>{let c=u.length,p=a;for(let a=0;a<c;a+=1){let c=n[0]*u[a];for(let e=1;e<r;e+=1){let i=p-e&l-1;c+=n[e]*s[i],c-=t[e]*o[i]}for(let t=r;t<i;t+=1)c+=n[t]*s[p-t&l-1];for(let n=r;n<e;n+=1)c-=t[n]*o[p-n&l-1];s[p]=u[a],o[p]=c,p=p+1&l-1,h[a]=c}return p},t7=(t,e,n,i)=>{let r=n instanceof Float64Array?n:new Float64Array(n),s=i instanceof Float64Array?i:new Float64Array(i),o=r.length,a=s.length,l=Math.min(o,a);if(1!==r[0]){for(let t=0;t<o;t+=1)s[t]/=r[0];for(let t=1;t<a;t+=1)r[t]/=r[0]}let u=new Float32Array(32),h=new Float32Array(32),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let e=0;e<p;e+=1){let n=t.getChannelData(e),i=c.getChannelData(e);u.fill(0),h.fill(0),t9(r,o,s,a,l,u,h,0,32,n,i)}return c},et={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ee=t=>{let e=new Uint32Array([0x46464952,40,0x45564157,0x20746d66,16,131073,44100,176400,1048580,0x61746164,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});if(void 0===n)return!1;return n.catch(()=>{}),!0}catch{}return!1},en=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},ei=(t,e)=>{en(t,e,"channelCount"),en(t,e,"channelCountMode"),en(t,e,"channelInterpretation")},er=t=>"function"==typeof t.getFloatTimeDomainData,es=t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=(n[t]-128)*.0078125;return e}},eo=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},ea=t=>{t.start=(e=>{let n=!1;return(i=0,r=0,s)=>{if(n)throw t8();e.call(t,i,r,s),n=!0}})(t.start)},el=t=>{let e;e=t.start,t.start=(n=0,i=0,r)=>{if("number"==typeof r&&r<0||i<0||n<0)throw RangeError("The parameters can't be negative.");e.call(t,n,i,r)}},eu=t=>{let e;e=t.stop,t.stop=(n=0)=>{if(n<0)throw RangeError("The parameter can't be negative.");e.call(t,n)}},eh=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},ec=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),ep=t=>new Promise((e,n)=>{let{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:t})=>{i.close(),r.close(),e(t)},i.onmessageerror=({data:t})=>{i.close(),r.close(),n(t)},r.postMessage(t)}),ed=async(t,e)=>new t(await ep(e)),ef=(t,e,n,i)=>{let r=D.get(t);void 0===r&&(r=new WeakMap,D.set(t,r));let s=ed(n,i);return r.set(e,s),s},em=(t,e)=>{let n=t.createBiquadFilter();return ei(n,e),eo(n,e,"Q"),eo(n,e,"detune"),eo(n,e,"frequency"),eo(n,e,"gain"),en(n,e,"type"),n},e_=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw t8()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw t8()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw t8()}})},eg=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return ei(n,e),e_(n),n},ev=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),ey=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return ei(n,e),eo(n,e,"delayTime"),n},ex=(t,e)=>{let n=t.createGain();return ei(n,e),eo(n,e,"gain"),n};function ew(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1){var i;n=[(i=n)[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]],n[0]+=t[r]}return n}let eb=(t,e,n,i)=>t.createScriptProcessor(e,n,i),eT=()=>new DOMException("","NotSupportedError"),eA={numberOfChannels:1},eC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ek={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},eS={disableNormalization:!1},eM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},eO=()=>new DOMException("","UnknownError"),eE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},eN=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),eD=t=>{if(null===t)return!1;let e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},eI=(t,e,n,i)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);let{get:s,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(s),set:i(o)})},eR=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;eR(t,e,n+1e-7)}},eV=t=>{let e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},eP=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},eq=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},eF=(t,e)=>{let n,i=e.createGain();t.connect(i);let r=(n=t.disconnect,()=>{n.call(t,i),t.removeEventListener("ended",r)});t.addEventListener("ended",r),ev(t,i),t.stop=(e=>{let n=!1;return (r=0)=>{if(n)try{e.call(t,r)}catch{i.gain.setValueAtTime(0,r)}else e.call(t,r),n=!0}})(t.stop)},ej=(t,e)=>n=>{let i={value:t};return(Object.defineProperties(n,{currentTarget:i,target:i}),"function"==typeof e)?e.call(t,n):e.handleEvent.call(t,n)},e$=(t,e,[n,i,r],s)=>{tf(t[i],[e,n,r],t=>t[0]===e&&t[1]===n,s)},eL=(t,e,[n,i,r],s)=>{let o=t.get(n);void 0===o?t.set(n,new Set([[i,e,r]])):tf(o,[i,e,r],t=>t[0]===i&&t[1]===e,s)},eW=(t,e,n,i)=>$(t[i],t=>t[0]===e&&t[1]===n),eB=new WeakMap,ez=t=>{var e;return null!=(e=eB.get(t))?e:0},eU=((t,e)=>(n,i)=>{let r=e.get(n);if(void 0!==r)return r;let s=t.get(n);if(void 0!==s)return s;try{let r=i();if(r instanceof Promise)return t.set(n,r),r.catch(()=>!1).then(i=>(t.delete(n),e.set(n,i),i));return e.set(n,r),r}catch{return e.set(n,!1),!1}})(new Map,new WeakMap),eX="undefined"==typeof window?null:window,eY=(t,e)=>{let n=t.createAnalyser();if(ei(n,e),!(e.maxDecibels>e.minDecibels))throw Z();return en(n,e,"fftSize"),en(n,e,"maxDecibels"),en(n,e,"minDecibels"),en(n,e,"smoothingTimeConstant"),eU(er,()=>er(n))||es(n),n},eG=t=>{let e=ta(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},eH=((t,e,n)=>async(i,r,s)=>{let o=t(i);await Promise.all(o.activeInputs.map((t,o)=>Array.from(t).map(async([t,a])=>{let l=e(t),u=await l.render(t,r),h=i.context.destination;n(t)||i===h&&n(i)||u.connect(s,a,o)})).reduce((t,e)=>[...t,...e],[]))})(ta,eG,tk),eZ=()=>{let t=new WeakMap,e=async(e,n)=>{let i=tA(e);return G(i,n)||(i=eY(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant})),t.set(n,i),await eH(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},eQ=t=>{let e=M.get(t);if(void 0===e)throw t8();return e},eJ=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(eX),eK=(t=>e=>null!==t&&e instanceof t)(eJ),e0=new WeakMap,e1=class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let i=this._listeners.get(e);void 0===i&&(i=ej(this,e),"function"==typeof e&&this._listeners.set(e,i)),this._nativeEventTarget.addEventListener(t,i,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){let i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}},e2=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(eX),e3=(t=>e=>null!==t&&e instanceof t)(e2),e8=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(eX),e4=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(eX),e6=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(eX),e5=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m)=>class extends u{constructor(e,i,r,s){super(r),this._context=e,this._nativeAudioNode=r;let o=h(e);c(o)&&!0!==n(tM,()=>tM(o,m))&&tN(r),C.set(this,r),O.set(this,new Set),"closed"!==e.state&&i&&B(this),t(this,s,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();let u=f(h(this._context));if(p(t)||d(t))throw s();if(tp(t)){let r=tA(t);try{let e=tv(this._nativeAudioNode,r,n,a),i=tS(this);(u||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&tS(t)&&B(t)}catch(t){if(12===t.code)throw s();throw t}return e(this,t,n,a,u)&&tO(l([this],t),i(u)),t}let c=tC(t);if("playbackRate"===c.name&&1024===c.maxValue)throw o();try{this._nativeAudioNode.connect(c,n),(u||tS(this))&&this._nativeAudioNode.disconnect(c,n)}catch(t){if(12===t.code)throw s();throw t}tD(this,t,n,u)&&tO(l([this],t),i(u))}disconnect(t,e,n){let i,o=f(h(this._context));if(void 0===t)i=tq(this,o);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=tF(this,o,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs)||tp(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(0===(i=tj(this,o,t,e,n)).length)throw s()}for(let t of i)tO(l([this],t),a)}})((t,e,n)=>{let i=[];for(let t=0;t<n.numberOfInputs;t+=1)i.push(new Set);A.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},((t,e,n,i,r,s,o,a,l,u,h,c,p)=>{let d=new WeakMap;return(f,m,g,v,y)=>{let{activeInputs:x,passiveInputs:w}=s(m),{outputs:b}=s(f),T=a(f),A=s=>{let a=l(m),u=l(f);if(s){let e=L(w,f,g,v);t(x,f,e,!1),y||c(f)||n(u,a,g,v),p(m)&&B(m)}else{let t=i(x,f,g,v);e(w,v,t,!1),y||c(f)||r(u,a,g,v);let n=o(m);if(0===n)h(m)&&X(m,x);else{let t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout(()=>{h(m)&&X(m,x)},1e3*n))}}};return!!u(b,[m,g,v],t=>t[0]===m&&t[1]===g&&t[2]===v,!0)&&(T.add(A),h(f)?t(x,f,[g,v,A],!0):e(w,v,[f,g,A],!0),!0)}})(e$,eL,tv,eW,tT,ta,ez,W,tA,tf,K,tk,tS),eU,((t,e,n,i,r,s)=>o=>(a,l)=>{let u=t.get(a);if(void 0===u){if(!o&&s(a)){let t=i(a),{outputs:s}=n(a);for(let n of s)if(td(n))e(t,i(n[0]),n[1],n[2]);else{let e=r(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,u+l)})(E,tT,ta,tA,tC,K),Z,t4,eT,((t,e,n,i,r,s,o,a)=>(l,u)=>{let h=e.get(l);if(void 0===h)throw Error("Missing the expected cycle count.");let c=a(s(l.context));if(h===u){if(e.delete(l),!c&&o(l)){let e=i(l),{outputs:s}=n(l);for(let n of s)if(td(n))t(e,i(n[0]),n[1],n[2]);else{let t=r(n[0]);e.connect(t,n[1])}}}else e.set(l,h-u)})(tv,E,ta,tA,tC,eQ,K,eK),function t(e,n){let i=tp(n)?n:j(e0,n);if(t0(i))return[];if(e[0]===i)return[e];if(e.includes(i))return[];let{outputs:r}=ta(i);return Array.from(r).map(n=>t([...e,i],n[0])).reduce((t,e)=>t.concat(e),[])},e1,eQ,e3,e8,e4,eK,e6),e9=((t,e,n,i,r,s)=>class extends t{constructor(t,n){let o=r(t),a=i(o,{...Y,...n});super(t,!1,a,s(o)?e():null),this._nativeAnalyserNode=a}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){let e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){let e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(e5,eZ,Z,eY,eQ,eK),e7=new WeakSet,nt=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(eX),ne=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),nn=((t,e)=>n=>{n.copyFromChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(a),h=i.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)i[t]=u[t+o]},n.copyToChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(a),h=i.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)u[t+o]=i[t]}})(ne,Z),ni=(t=>e=>{let n,i;n=e.copyFromChannel,e.copyFromChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)},i=e.copyToChannel,e.copyToChannel=(n,r,s=0)=>{let o=t(s),a=t(r);if(o<e.length)return i.call(e,n,a,o)}})(ne),nr=((t,e,n,i,r,s,o,a)=>{let l=null;return class u{constructor(u){if(null===r)throw Error("Missing the native OfflineAudioContext constructor.");let{length:h,numberOfChannels:c,sampleRate:p}={...J,...u};null===l&&(l=new r(1,1,44100));let d=null!==i&&e(s,s)?new i({length:h,numberOfChannels:c,sampleRate:p}):l.createBuffer(c,h,p);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(o(d),Q(d)):e(H,()=>H(d))||a(d),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(e7,eU,eT,nt,eJ,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(nt),nn,ni),ns=(t,e)=>{let n=ex(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);let i=()=>{e.removeEventListener("ended",i),e.disconnect(n),n.disconnect()};e.addEventListener("ended",i)},no=async(t,e,n)=>{let i=tl(t);await Promise.all(Array.from(i.activeInputs).map(async([t,i])=>{let r=eG(t),s=await r.render(t,e);tk(t)||s.connect(n,i)}))},na=(t,e,n)=>no(e,t,n),nl=((t,e,n,i,r,s,o,a,l,u,h)=>(c,p)=>{let d=c.createBufferSource();return ei(d,p),eo(d,p,"playbackRate"),en(d,p,"buffer"),en(d,p,"loop"),en(d,p,"loopEnd"),en(d,p,"loopStart"),e(n,()=>n(c))||ea(d),e(i,()=>i(c))||l(d),e(r,()=>r(c))||u(d,c),e(s,()=>s(c))||el(d),e(o,()=>o(c))||h(d,c),e(a,()=>a(c))||eu(d),t(c,d),d})(ns,eU,t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{let e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100);try{e.start(0,1)}catch{return!1}return!0},t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},eV,eP,eq,t=>{t.start=(e=>(n=0,i=0,r)=>{let s=t.buffer,o=null===s?i:Math.min(s.duration,i);null!==s&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},(t,e)=>{let n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),eI(t,"buffer",e=>()=>{let i=e.call(t);return i===n?null:i},e=>i=>e.call(t,null===i?n:i))},eF),nu=(i=t=>{let e=tl(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},(t,e,n)=>(i(e).replay(n),no(e,t,n))),nh=()=>{let t=new WeakMap,e=null,n=null,i=async(i,r)=>{let s=tA(i),o=G(s,r);return o||(s=nl(r,{buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,loop:s.loop,loopEnd:s.loopEnd,loopStart:s.loopStart,playbackRate:s.playbackRate.value}),null!==e&&s.start(...e),null!==n&&s.stop(n)),t.set(r,s),o?await na(r,i.playbackRate,s.playbackRate):await nu(r,i.playbackRate,s.playbackRate),await eH(i,r,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let r=t.get(n);return void 0!==r?Promise.resolve(r):i(e,n)}}},nc=((t,e,n,i,r,s,o,a,l,u,h,c,p)=>(d,f,m,g=null,v=null)=>{let y=m.value,x=new b.AutomationEventList(y),w=f?i(x):null,T={get defaultValue(){return y},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(value){m.value=value,T.setValueAtTime(value,d.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===w&&x.flush(d.context.currentTime),x.add(r(t)),m.cancelAndHoldAtTime(t);else{let e=Array.from(x).pop();null===w&&x.flush(d.context.currentTime),x.add(r(t));let n=Array.from(x).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return T},cancelScheduledValues:t=>(null===w&&x.flush(d.context.currentTime),x.add(s(t)),m.cancelScheduledValues(t),T),exponentialRampToValueAtTime(t,e){if(0===t||!Number.isFinite(e)||e<0)throw RangeError();let n=d.context.currentTime;return null===w&&x.flush(n),0===Array.from(x).length&&(x.add(u(y,n)),m.setValueAtTime(y,n)),x.add(o(t,e)),m.exponentialRampToValueAtTime(t,e),T},linearRampToValueAtTime(t,e){let n=d.context.currentTime;return null===w&&x.flush(n),0===Array.from(x).length&&(x.add(u(y,n)),m.setValueAtTime(y,n)),x.add(a(t,e)),m.linearRampToValueAtTime(t,e),T},setTargetAtTime:(t,e,n)=>(null===w&&x.flush(d.context.currentTime),x.add(l(t,e,n)),m.setTargetAtTime(t,e,n),T),setValueAtTime:(t,e)=>(null===w&&x.flush(d.context.currentTime),x.add(u(t,e)),m.setValueAtTime(t,e),T),setValueCurveAtTime(t,e,n){let i=t instanceof Float32Array?t:new Float32Array(t);if(null!==c&&"webkitAudioContext"===c.name){let t=e+n,r=d.context.sampleRate,s=Math.ceil(e*r),o=Math.floor(t*r),a=o-s,l=new Float32Array(a);for(let t=0;t<a;t+=1){let o=(i.length-1)/n*((s+t)/r-e),a=Math.floor(o),u=Math.ceil(o);l[t]=a===u?i[a]:(1-(o-a))*i[a]+(1-(u-o))*i[u]}null===w&&x.flush(d.context.currentTime),x.add(h(l,e,n)),m.setValueCurveAtTime(l,e,n);let u=o/r;u<t&&p(T,l[l.length-1],u),p(T,i[i.length-1],t)}else null===w&&x.flush(d.context.currentTime),x.add(h(i,e,n)),m.setValueCurveAtTime(i,e,n);return T}};return n.set(T,m),e.set(T,d),t(T,w),T})((t,e)=>{k.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},e0,S,t=>({replay(e){for(let n of t)if("exponentialRampToValue"===n.type){let{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){let{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){let{startTime:t,target:i,timeConstant:r}=n;e.setTargetAtTime(i,t,r)}else if("setValue"===n.type){let{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else if("setValueCurve"===n.type){let{duration:t,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,t)}else throw Error("Can't apply an unknown automation.")}}),b.createCancelAndHoldAutomationEvent,b.createCancelScheduledValuesAutomationEvent,b.createExponentialRampToValueAutomationEvent,b.createLinearRampToValueAutomationEvent,b.createSetTargetAutomationEvent,b.createSetValueAutomationEvent,b.createSetValueCurveAutomationEvent,e2,eR),np=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){let a=s(t),l={...tt,...i},u=r(a,l),h=o(a),c=h?e():null;super(t,!1,u,c),this._audioBufferSourceNodeRenderer=c,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,h,u.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){let e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;let n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){B(this);let t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),K(this)&&U(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(e5,nh,nc,t8,nl,eQ,eK,ej),nd=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,n){let i=s(t),l=o(i),u=r(i,n,l);super(t,!1,u,l?e(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=u}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(e5,t=>{let e=new WeakMap,n=async(n,i)=>{let r=i.destination;return e.set(i,r),await t(n,i,r),r};return{render(t,i){let r=e.get(i);return void 0!==r?Promise.resolve(r):n(t,i)}}},Z,t8,((t,e)=>(n,i,r)=>{let s=n.destination;if(s.channelCount!==i)try{s.channelCount=i}catch{}r&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:i});let o=t(n,{channelCount:i,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",t=>()=>t.call(o),t=>e=>{t.call(o,e);try{s.channelCount=e}catch(t){if(e>s.maxChannelCount)throw t}}),e(o,"channelCountMode",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelCountMode=e}),e(o,"channelInterpretation",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelInterpretation=e}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(ex,eI),eQ,eK,eH),nf=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=G(l,a);return u||(l=e(a,{Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type})),s.set(a,l),u?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await i(a,o.Q,l.Q),await i(a,o.detune,l.detune),await i(a,o.frequency,l.frequency),await i(a,o.gain,l.gain)),await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(na,em,tA,nu,eH),nm=(t,e)=>eB.set(t,e),n_=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){let l=s(t),u=r(l,{...tY,...i}),h=o(l);super(t,!1,u,h?n():null),this._Q=e(this,h,u.Q,34028234663852886e22,-34028234663852886e22),this._detune=e(this,h,u.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=e(this,h,u.frequency,t.sampleRate/2,0),this._gain=e(this,h,u.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=u,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw i();throw t}if(t.length!==e.length||e.length!==n.length)throw i()}})(e5,nc,nf,t4,em,eQ,eK,nm),ng=((t,e)=>(n,i,r)=>{let s=new Set;return n.connect=(r=>(o,a=0,l=0)=>{let u=0===s.size;if(e(o))return r.call(n,o,a,l),t(s,[o,a,l],t=>t[0]===o&&t[1]===a&&t[2]===l,!0),u&&i(),o;r.call(n,o,a),t(s,[o,a],t=>t[0]===o&&t[1]===a,!0),u&&i()})(n.connect),n.disconnect=(t=>(i,o,a)=>{let l=s.size>0;if(void 0===i)t.apply(n),s.clear();else if("number"==typeof i)for(let e of(t.call(n,i),s))e[1]===i&&s.delete(e);else for(let r of(e(i)?t.call(n,i,o,a):t.call(n,i,o),s))r[0]===i&&(void 0===o||r[1]===o)&&(void 0===a||r[2]===a)&&s.delete(r);let u=0===s.size;l&&u&&r()})(n.disconnect),n})(tf,e8),nv=((t,e)=>(n,i)=>{let r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),ei(r,i),r})(e2,((t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let r=n.createBufferSource();e(i,()=>{let t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)},()=>r.disconnect(i))})(t8,ng)),ny=((t,e,n,i,r)=>class extends t{constructor(t,s){let o=i(t);super(t,!1,n(o,{...tG,...s}),r(o)?e():null)}})(e5,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tA(e);return G(i,n)||(i=nv(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs})),t.set(n,i),await eH(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},nv,eQ,eK),nx=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t);super(t,!1,n(a,s({...tH,...o})),r(a)?e():null)}})(e5,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tA(e);return G(i,n)||(i=eg(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs})),t.set(n,i),await eH(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},eg,eQ,eK,t=>({...t,channelCount:t.numberOfOutputs})),nw=(t,{offset:e,...n})=>{let i=t.createBuffer(1,2,44100),r=nl(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=ex(t,{...n,gain:e}),o=i.getChannelData(0);return o[0]=1,o[1]=1,r.buffer=i,r.loop=!0,ns(t,r),ng(ev({get bufferSize(){return},get channelCount(){return s.channelCount},set channelCount(value){s.channelCount=value},get channelCountMode(){return s.channelCountMode},set channelCountMode(value){s.channelCountMode=value},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(value){s.channelInterpretation=value},get context(){return s.context},get inputs(){return[]},get numberOfInputs(){return r.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get offset(){return s.gain},get onended(){return r.onended},set onended(value){r.onended=value},addEventListener:(...t)=>r.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>r.dispatchEvent(t[0]),removeEventListener:(...t)=>r.removeEventListener(t[0],t[1],t[2]),start(t=0){r.start.call(r,t)},stop(t=0){r.stop.call(r,t)}},s),()=>r.connect(s),()=>r.disconnect(s))},nb=((t,e,n,i,r)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);let a=s.createConstantSource();return ei(a,o),eo(a,o,"offset"),e(i,()=>i(s))||el(a),e(r,()=>r(s))||eu(a),t(s,a),a})(ns,eU,nw,eV,eq),nT=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){let a=r(t),l=i(a,{...tZ,...o}),u=s(a),h=u?n():null;super(t,!1,l,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=l,this._offset=e(this,u,l.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;let n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){B(this);let t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),K(this)&&U(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(e5,nc,()=>{let t=new WeakMap,e=null,n=null,i=async(i,r)=>{let s=tA(i),o=G(s,r);return o||(s=nb(r,{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,offset:s.offset.value}),null!==e&&s.start(e),null!==n&&s.stop(n)),t.set(r,s),o?await na(r,i.offset,s.offset):await nu(r,i.offset,s.offset),await eH(i,r,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let r=t.get(n);return void 0!==r?Promise.resolve(r):i(e,n)}}},nb,eQ,eK,ej),nA=((t,e)=>(n,i)=>{let r=n.createConvolver();if(ei(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),en(r,i,"buffer"),i.channelCount>2||(e(r,"channelCount",t=>()=>t.call(r),e=>n=>{if(n>2)throw t();return e.call(r,n)}),"max"===i.channelCountMode))throw t();return e(r,"channelCountMode",t=>()=>t.call(r),e=>n=>{if("max"===n)throw t();return e.call(r,n)}),r})(eT,eI),nC=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t),l={...tQ,...o},u=n(a,l);super(t,!1,u,r(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&s(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){let t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(e5,((t,e,n)=>()=>{let i=new WeakMap,r=async(r,s)=>{let o=e(r);return G(o,s)||(o=t(s,{buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize})),i.set(s,o),tg(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}})(nA,tA,eH),nA,eQ,eK,nm),nk=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){let l=r(t),u={...tK,...a},h=i(l,u),c=s(l);super(t,!1,h,c?n(u.maxDelayTime):null),this._delayTime=e(this,c,h.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(e5,nc,t=>{let e=new WeakMap,n=async(n,i)=>{let r=tA(n),s=G(r,i);return s||(r=ey(i,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,delayTime:r.delayTime.value,maxDelayTime:t})),e.set(i,r),s?await na(i,n.delayTime,r.delayTime):await nu(i,n.delayTime,r.delayTime),await eH(n,i,r),r};return{render(t,i){let r=e.get(i);return void 0!==r?Promise.resolve(r):n(t,i)}}},ey,eQ,eK,nm),nS=(o=eT,(t,e)=>{let n=t.createDynamicsCompressor();if(ei(n,e),e.channelCount>2||"max"===e.channelCountMode)throw o();return eo(n,e,"attack"),eo(n,e,"knee"),eo(n,e,"ratio"),eo(n,e,"release"),eo(n,e,"threshold"),n}),nM=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,r){let l=s(t),u=i(l,{...t2,...r}),h=o(l);super(t,!1,u,h?n():null),this._attack=e(this,h,u.attack),this._knee=e(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,h,u.ratio),this._release=e(this,h,u.release),this._threshold=e(this,h,u.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){let e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){let e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(e5,nc,((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=G(l,a);return u||(l=e(a,{attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value})),s.set(a,l),u?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await i(a,o.attack,l.attack),await i(a,o.knee,l.knee),await i(a,o.ratio,l.ratio),await i(a,o.release,l.release),await i(a,o.threshold,l.threshold)),await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(na,nS,tA,nu,eH),nS,eT,eQ,eK,nm),nO=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=r(t),l=i(a,{...t3,...o}),u=s(a);super(t,!1,l,u?n():null),this._gain=e(this,u,l.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}})(e5,nc,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tA(e),r=G(i,n);return r||(i=ex(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:i.gain.value})),t.set(n,i),r?await na(n,e.gain,i.gain):await nu(n,e.gain,i.gain),await eH(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},ex,eQ,eK),nE=((t,e,n,i)=>(r,s,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:h})=>{let c=ec(s,r.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),d=h instanceof Float64Array?h:new Float64Array(h),f=p.length,m=d.length,g=Math.min(f,m);if(0===f||f>20)throw i();if(0===p[0])throw e();if(0===m||m>20)throw i();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}let v=n(r,c,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=l;let y=[],x=[],w=[];for(let t=0;t<o;t+=1){y.push(0);let t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),x.push(t),w.push(e)}v.onaudioprocess=t=>{let e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let t=0;t<i;t+=1){let i=e.getChannelData(t),r=n.getChannelData(t);y[t]=t9(p,f,d,m,g,x[t],w[t],y[t],32,i,r)}};let b=r.sampleRate/2;return ev({get bufferSize(){return c},get channelCount(){return v.channelCount},set channelCount(value){v.channelCount=value},get channelCountMode(){return v.channelCountMode},set channelCountMode(value){v.channelCountMode=value},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(value){v.channelInterpretation=value},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener:(...t)=>v.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>v.dispatchEvent(t[0]),getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();let r=e.length;for(let t=0;t<r;t+=1){let r=-Math.PI*(e[t]/b),s=[Math.cos(r),Math.sin(r)],o=function(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(ew(d,s),ew(p,s));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),i[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>v.removeEventListener(t[0],t[1],t[2])},v)})(t4,t8,eb,eT),nN=((t,e,n,i)=>r=>t(ee,()=>ee(r))?Promise.resolve(t(i,i)).then(t=>{if(!t){let t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()}):new Promise(t=>{let n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()}))(eU,ex,eb,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);let n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(ex,eJ)),nD=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t),l=r(a),u={...t5,...o},h=e(a,l?null:t.baseLatency,u);super(t,!1,h,l?n(u.feedback,u.feedforward):null),t6(h),this._nativeIIRFilterNode=h,s(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(e5,(t,e,n)=>{if(void 0===t.createIIRFilter)return nE(t,e,n);let i=t.createIIRFilter(n.feedforward,n.feedback);return ei(i,n),i},((t,e,n,i,r)=>(s,o)=>{let a=new WeakMap,l=null,u=async(u,h)=>{let c=null,p=e(u),d=G(p,h);if(void 0===h.createIIRFilter?c=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=h.createIIRFilter(o,s)),a.set(h,null===c?p:c),null!==c){if(null===l){if(null===n)throw Error("Missing the native OfflineAudioContext constructor.");let t=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(async()=>(await i(u,t,t.destination),t7(await r(t),h,s,o)))()}let t=await l;return c.buffer=t,c.start(0),c}return await i(u,h,p),p};return{render(t,e){let n=a.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(nl,tA,eJ,eH,nN),eQ,eK,nm),nI=((t,e,n,i,r,s,o,a)=>(l,u)=>{let h=u.listener,{forwardX:c,forwardY:p,forwardZ:d,positionX:f,positionY:m,positionZ:g,upX:v,upY:y,upZ:x}=void 0===h.forwardX?(()=>{let c=new Float32Array(1),p=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),d=o(u),f=!1,m=[0,0,-1,0,1,0],g=[0,0,0],v=()=>{if(f)return;f=!0;let t=i(u,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{let e=[s(t,c,0),s(t,c,1),s(t,c,2),s(t,c,3),s(t,c,4),s(t,c,5)];e.some((t,e)=>t!==m[e])&&(h.setOrientation(...e),m=e);let n=[s(t,c,6),s(t,c,7),s(t,c,8)];n.some((t,e)=>t!==g[e])&&(h.setPosition(...n),g=n)},p.connect(t)},y=t=>e=>{e!==m[t]&&(m[t]=e,h.setOrientation(...m))},x=t=>e=>{e!==g[t]&&(g[t]=e,h.setPosition(...g))},w=(e,i,s)=>{var o,h,c,f,m,g,y;let x=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});x.connect(p,0,e),x.start(),Object.defineProperty(x.offset,"defaultValue",{get:()=>i});let w=t({context:l},d,x.offset,34028234663852886e22,-34028234663852886e22);return a(w,"value",t=>()=>t.call(w),t=>e=>{try{t.call(w,e)}catch(t){if(9!==t.code)throw t}v(),d&&s(e)}),o=w.cancelAndHoldAtTime,w.cancelAndHoldAtTime=d?()=>{throw r()}:(...t)=>{let e=o.apply(w,t);return v(),e},h=w.cancelScheduledValues,w.cancelScheduledValues=d?()=>{throw r()}:(...t)=>{let e=h.apply(w,t);return v(),e},c=w.exponentialRampToValueAtTime,w.exponentialRampToValueAtTime=d?()=>{throw r()}:(...t)=>{let e=c.apply(w,t);return v(),e},f=w.linearRampToValueAtTime,w.linearRampToValueAtTime=d?()=>{throw r()}:(...t)=>{let e=f.apply(w,t);return v(),e},m=w.setTargetAtTime,w.setTargetAtTime=d?()=>{throw r()}:(...t)=>{let e=m.apply(w,t);return v(),e},g=w.setValueAtTime,w.setValueAtTime=d?()=>{throw r()}:(...t)=>{let e=g.apply(w,t);return v(),e},y=w.setValueCurveAtTime,w.setValueCurveAtTime=d?()=>{throw r()}:(...t)=>{let e=y.apply(w,t);return v(),e},w};return{forwardX:w(0,0,y(0)),forwardY:w(1,0,y(1)),forwardZ:w(2,-1,y(2)),positionX:w(6,0,x(0)),positionY:w(7,0,x(1)),positionZ:w(8,0,x(2)),upX:w(3,0,y(3)),upY:w(4,1,y(4)),upZ:w(5,0,y(5))}})():h;return{get forwardX(){return c},get forwardY(){return p},get forwardZ(){return d},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return y},get upZ(){return x}}})(nc,nv,nb,eb,eT,eN,eK,eI),nR=new WeakMap,nV=((t,e,n,i,r,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,M.set(this,n),i(n)&&r.set(n,new Set),this._destination=new t(this,s),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){let e="function"==typeof t?s(this,t):null;this._nativeContext.onstatechange=e;let n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(nd,nI,e1,eK,nR,ej),nP=((t,e,n,i,r,s)=>(o,a)=>{let l=o.createOscillator();return ei(l,a),eo(l,a,"detune"),eo(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):en(l,a,"type"),e(n,()=>n(o))||el(l),e(i,()=>i(o))||s(l,o),e(r,()=>r(o))||eu(l),t(o,l),l})(ns,eU,eV,eP,eq,eF),nq=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=null,a=null,l=null,u=async(u,h)=>{let c=n(u),p=G(c,h);return p||(c=e(h,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,periodicWave:null===o?void 0:o,type:c.type}),null!==a&&c.start(a),null!==l&&c.stop(l)),s.set(h,c),p?(await t(h,u.detune,c.detune),await t(h,u.frequency,c.frequency)):(await i(h,u.detune,c.detune),await i(h,u.frequency,c.frequency)),await r(u,h,c),c};return{set periodicWave(value){o=value},set start(value){a=value},set stop(value){l=value},render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(na,nP,tA,nu,eH),nF=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){let a=r(t),l={...eC,...o},u=n(a,l),h=s(a),c=h?i():null,p=t.sampleRate/2;super(t,!1,u,c),this._detune=e(this,h,u.detune,153600,-153600),this._frequency=e(this,h,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=c,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;let n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){B(this);let t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),K(this)&&U(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(e5,nc,nP,nq,eQ,eK,ej),nj=(t,e)=>{let n=nl(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1});return n.buffer=t.createBuffer(1,2,44100),n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}},n$=((t,e,n,i,r)=>(s,{curve:o,oversample:a,...l})=>{let u=s.createWaveShaper(),h=s.createWaveShaper();ei(u,l),ei(h,l);let c=n(s,{...l,gain:1}),p=n(s,{...l,gain:-1}),d=n(s,{...l,gain:1}),f=n(s,{...l,gain:-1}),m=null,g=!1,v=null,y={get bufferSize(){return},get channelCount(){return u.channelCount},set channelCount(value){c.channelCount=value,p.channelCount=value,u.channelCount=value,d.channelCount=value,h.channelCount=value,f.channelCount=value},get channelCountMode(){return u.channelCountMode},set channelCountMode(value){c.channelCountMode=value,p.channelCountMode=value,u.channelCountMode=value,d.channelCountMode=value,h.channelCountMode=value,f.channelCountMode=value},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(value){c.channelInterpretation=value,p.channelInterpretation=value,u.channelInterpretation=value,d.channelInterpretation=value,h.channelInterpretation=value,f.channelInterpretation=value},get context(){return u.context},get curve(){return v},set curve(value){if(null!==value&&value.length<2)throw e();if(null===value)u.curve=value,h.curve=value;else{let t=value.length,e=new Float32Array(t+2-t%2),n=new Float32Array(t+2-t%2);e[0]=value[0],n[0]=-value[t-1];let i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let s=1;s<i;s+=1){let o=s/i*r,a=Math.floor(o),l=Math.ceil(o);e[s]=a===l?value[a]:(1-(o-a))*value[a]+(1-(l-o))*value[l],n[s]=a===l?-value[t-1-a]:-((1-(o-a))*value[t-1-a])-(1-(l-o))*value[t-1-l]}e[i]=t%2==1?value[i-1]:(value[i-2]+value[i-1])/2,u.curve=e,h.curve=n}v=value,g&&(i(v)&&null===m?m=t(s,c):null!==m&&(m(),m=null))},get inputs(){return[c]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(value){u.oversample=value,h.oversample=value},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};return null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a),r(ev(y,d),()=>{c.connect(u).connect(d),c.connect(p).connect(h).connect(f).connect(d),g=!0,i(v)&&(m=t(s,c))},()=>{c.disconnect(u),u.disconnect(d),c.disconnect(p),p.disconnect(h),h.disconnect(f),f.disconnect(d),g=!1,null!==m&&(m(),m=null)})})(nj,t8,ex,eD,ng),nL=((t,e,n,i,r,s,o)=>(a,l)=>{let u=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,l);ei(u,l);let h=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==h&&h.length<2)throw e();en(u,{curve:h},"curve"),en(u,l,"oversample");let c=null,p=!1;return o(u,"curve",t=>()=>t.call(u),e=>n=>(e.call(u,n),p&&(i(n)&&null===c?c=t(a,u):i(n)||null===c||(c(),c=null)),n)),r(u,()=>{p=!0,i(u.curve)&&(c=t(a,u))},()=>{p=!1,null!==c&&(c(),c=null)})})(nj,t8,n$,eD,ng,e2,eI),nW=(r=((t,e,n,i,r,s,o,a,l,u)=>(h,{coneInnerAngle:c,coneOuterAngle:p,coneOuterGain:d,distanceModel:f,maxDistance:m,orientationX:g,orientationY:v,orientationZ:y,panningModel:x,positionX:w,positionY:b,positionZ:T,refDistance:A,rolloffFactor:C,...k})=>{let S=h.createPanner();if(k.channelCount>2||"max"===k.channelCountMode)throw o();ei(S,k);let M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=n(h,{...M,channelInterpretation:"speakers",numberOfInputs:6}),E=i(h,{...k,gain:1}),N=i(h,{...M,gain:1}),D=i(h,{...M,gain:0}),I=i(h,{...M,gain:0}),R=i(h,{...M,gain:0}),V=i(h,{...M,gain:0}),P=i(h,{...M,gain:0}),q=r(h,256,6,1),F=s(h,{...M,curve:new Float32Array([1,1]),oversample:"none"}),j=[g,v,y],$=[w,b,T],L=new Float32Array(1);q.onaudioprocess=({inputBuffer:t})=>{let e=[l(t,L,0),l(t,L,1),l(t,L,2)];e.some((t,e)=>t!==j[e])&&(S.setOrientation(...e),j=e);let n=[l(t,L,3),l(t,L,4),l(t,L,5)];n.some((t,e)=>t!==$[e])&&(S.setPosition(...n),$=n)},Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});let W={get bufferSize(){return},get channelCount(){return S.channelCount},set channelCount(value){if(value>2)throw o();E.channelCount=value,S.channelCount=value},get channelCountMode(){return S.channelCountMode},set channelCountMode(value){if("max"===value)throw o();E.channelCountMode=value,S.channelCountMode=value},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(value){E.channelInterpretation=value,S.channelInterpretation=value},get coneInnerAngle(){return S.coneInnerAngle},set coneInnerAngle(value){S.coneInnerAngle=value},get coneOuterAngle(){return S.coneOuterAngle},set coneOuterAngle(value){S.coneOuterAngle=value},get coneOuterGain(){return S.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw e();S.coneOuterGain=value},get context(){return S.context},get distanceModel(){return S.distanceModel},set distanceModel(value){S.distanceModel=value},get inputs(){return[E]},get maxDistance(){return S.maxDistance},set maxDistance(value){if(value<0)throw RangeError();S.maxDistance=value},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return D.gain},get orientationZ(){return I.gain},get panningModel(){return S.panningModel},set panningModel(value){S.panningModel=value},get positionX(){return R.gain},get positionY(){return V.gain},get positionZ(){return P.gain},get refDistance(){return S.refDistance},set refDistance(value){if(value<0)throw RangeError();S.refDistance=value},get rolloffFactor(){return S.rolloffFactor},set rolloffFactor(value){if(value<0)throw RangeError();S.rolloffFactor=value},addEventListener:(...t)=>E.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>E.dispatchEvent(t[0]),removeEventListener:(...t)=>E.removeEventListener(t[0],t[1],t[2])};return c!==W.coneInnerAngle&&(W.coneInnerAngle=c),p!==W.coneOuterAngle&&(W.coneOuterAngle=p),d!==W.coneOuterGain&&(W.coneOuterGain=d),f!==W.distanceModel&&(W.distanceModel=f),m!==W.maxDistance&&(W.maxDistance=m),g!==W.orientationX.value&&(W.orientationX.value=g),v!==W.orientationY.value&&(W.orientationY.value=v),y!==W.orientationZ.value&&(W.orientationZ.value=y),x!==W.panningModel&&(W.panningModel=x),w!==W.positionX.value&&(W.positionX.value=w),b!==W.positionY.value&&(W.positionY.value=b),T!==W.positionZ.value&&(W.positionZ.value=T),A!==W.refDistance&&(W.refDistance=A),C!==W.rolloffFactor&&(W.rolloffFactor=C),(1!==j[0]||0!==j[1]||0!==j[2])&&S.setOrientation(...j),(0!==$[0]||0!==$[1]||0!==$[2])&&S.setPosition(...$),u(ev(W,S),()=>{E.connect(S),t(E,F,0,0),F.connect(N).connect(O,0,0),F.connect(D).connect(O,0,1),F.connect(I).connect(O,0,2),F.connect(R).connect(O,0,3),F.connect(V).connect(O,0,4),F.connect(P).connect(O,0,5),O.connect(q).connect(h.destination)},()=>{E.disconnect(S),a(E,F,0,0),F.disconnect(N),N.disconnect(O),F.disconnect(D),D.disconnect(O),F.disconnect(I),I.disconnect(O),F.disconnect(R),R.disconnect(O),F.disconnect(V),V.disconnect(O),F.disconnect(P),P.disconnect(O),O.disconnect(q),q.disconnect(h.destination)})})(tv,t8,nv,ex,eb,nL,eT,tT,eN,ng),(t,e)=>{let n=t.createPanner();return void 0===n.orientationX?r(t,e):(ei(n,e),eo(n,e,"orientationX"),eo(n,e,"orientationY"),eo(n,e,"orientationZ"),eo(n,e,"positionX"),eo(n,e,"positionY"),eo(n,e,"positionZ"),en(n,e,"coneInnerAngle"),en(n,e,"coneOuterAngle"),en(n,e,"coneOuterGain"),en(n,e,"distanceModel"),en(n,e,"maxDistance"),en(n,e,"panningModel"),en(n,e,"refDistance"),en(n,e,"rolloffFactor"),n)}),nB=((t,e,n,i,r,s,o,a,l,u)=>()=>{let h=new WeakMap,c=null,p=async(p,d)=>{let f=null,m=s(p),g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=G(m,d);if("bufferSize"in m?f=i(d,{...g,gain:1}):y||(m=r(d,{...v,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value})),h.set(d,null===f?m:f),null!==f){if(null===c){if(null===o)throw Error("Missing the native OfflineAudioContext constructor.");let t=new o(6,p.context.length,d.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),c=(async()=>{let e=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(e,i)=>{let r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:+(0===i)});return await a(t,e,r.offset),r}));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return u(t)})()}let t=await c,s=i(d,{...g,gain:1});await l(p,d,s);let h=[];for(let e=0;e<t.numberOfChannels;e+=1)h.push(t.getChannelData(e));let m=[h[0][0],h[1][0],h[2][0]],y=[h[3][0],h[4][0],h[5][0]],x=i(d,{...g,gain:1}),w=r(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(x).connect(w.inputs[0]),w.connect(f);for(let e=128;e<t.length;e+=128){let t=[h[0][e],h[1][e],h[2][e]],n=[h[3][e],h[4][e],h[5][e]];if(t.some((t,e)=>t!==m[e])||n.some((t,e)=>t!==y[e])){m=t,y=n;let o=e/d.sampleRate;x.gain.setValueAtTime(0,o),x=i(d,{...g,gain:0}),w=r(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),x.gain.setValueAtTime(1,o),s.connect(x).connect(w.inputs[0]),w.connect(f)}}return f}return y?(await t(d,p.orientationX,m.orientationX),await t(d,p.orientationY,m.orientationY),await t(d,p.orientationZ,m.orientationZ),await t(d,p.positionX,m.positionX),await t(d,p.positionY,m.positionY),await t(d,p.positionZ,m.positionZ)):(await a(d,p.orientationX,m.orientationX),await a(d,p.orientationY,m.orientationY),await a(d,p.orientationZ,m.orientationZ),await a(d,p.positionX,m.positionX),await a(d,p.positionY,m.positionY),await a(d,p.positionZ,m.positionZ)),tg(m)?await l(p,d,m.inputs[0]):await l(p,d,m),m};return{render(t,e){let n=h.get(e);return void 0!==n?Promise.resolve(n):p(t,e)}}})(na,nv,nb,ex,nW,tA,eJ,nu,eH,nN),nz=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){let l=r(t),u=n(l,{...ek,...a}),h=s(l);super(t,!1,u,h?i():null),this._nativePannerNode=u,this._orientationX=e(this,h,u.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=e(this,h,u.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=e(this,h,u.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=e(this,h,u.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=e(this,h,u.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=e(this,h,u.positionZ,34028234663852886e22,-34028234663852886e22),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(e5,nc,nW,nB,eQ,eK,nm),nU=((t,e,n,i)=>class r{constructor(r,s){let o=t(e(r),i({...eS,...s}));return n.add(o),o}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===r.prototype||n.has(t)}})((t,{disableNormalization:e,imag:n,real:i})=>{let r=n instanceof Float32Array?n:new Float32Array(n),s=i instanceof Float32Array?i:new Float32Array(i),o=t.createPeriodicWave(s,r,{disableNormalization:e});if(Array.from(n).length<2)throw Z();return o},eQ,new WeakSet,t=>{let{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}}),nX=((t,e)=>(n,i)=>{let r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);let s=n.createStereoPanner();return ei(s,i),eo(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw e()}}),s})(((t,e,n,i,r,s)=>{let o=new Float32Array([1,1]),a=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(t,e,r,s)=>{let h=new Float32Array(16385),c=new Float32Array(16385);for(let t=0;t<16385;t+=1){let e=t/16384*a;h[t]=Math.cos(e),c[t]=Math.sin(e)}let p=n(t,{...l,gain:0}),d=i(t,{...u,curve:h}),f=i(t,{...u,curve:o}),m=n(t,{...l,gain:0}),g=i(t,{...u,curve:c});return{connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(m),f.connect(r),r.connect(void 0===d.inputs?d:d.inputs[0]),r.connect(void 0===g.inputs?g:g.inputs[0]),d.connect(p.gain),g.connect(m.gain),p.connect(s,0,0),m.connect(s,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(m),f.disconnect(r),r.disconnect(void 0===d.inputs?d:d.inputs[0]),r.disconnect(void 0===g.inputs?g:g.inputs[0]),d.disconnect(p.gain),g.disconnect(m.gain),p.disconnect(s,0,0),m.disconnect(s,0,1)}}},c=(t,r,s,h)=>{let c=new Float32Array(16385),p=new Float32Array(16385),d=new Float32Array(16385),f=new Float32Array(16385),m=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>m){let e=(t-m)/(16384-m)*a;c[t]=Math.cos(e),p[t]=Math.sin(e),d[t]=0,f[t]=1}else{let e=t/(16384-m)*a;c[t]=1,p[t]=0,d[t]=Math.cos(e),f[t]=Math.sin(e)}let g=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...l,gain:0}),y=i(t,{...u,curve:c}),x=n(t,{...l,gain:0}),w=i(t,{...u,curve:p}),b=i(t,{...u,curve:o}),T=n(t,{...l,gain:0}),A=i(t,{...u,curve:d}),C=n(t,{...l,gain:0}),k=i(t,{...u,curve:f});return{connectGraph(){r.connect(g),r.connect(void 0===b.inputs?b:b.inputs[0]),g.connect(v,0),g.connect(x,0),g.connect(T,1),g.connect(C,1),b.connect(s),s.connect(void 0===y.inputs?y:y.inputs[0]),s.connect(void 0===w.inputs?w:w.inputs[0]),s.connect(void 0===A.inputs?A:A.inputs[0]),s.connect(void 0===k.inputs?k:k.inputs[0]),y.connect(v.gain),w.connect(x.gain),A.connect(T.gain),k.connect(C.gain),v.connect(h,0,0),T.connect(h,0,0),x.connect(h,0,1),C.connect(h,0,1)},disconnectGraph(){r.disconnect(g),r.disconnect(void 0===b.inputs?b:b.inputs[0]),g.disconnect(v,0),g.disconnect(x,0),g.disconnect(T,1),g.disconnect(C,1),b.disconnect(s),s.disconnect(void 0===y.inputs?y:y.inputs[0]),s.disconnect(void 0===w.inputs?w:w.inputs[0]),s.disconnect(void 0===A.inputs?A:A.inputs[0]),s.disconnect(void 0===k.inputs?k:k.inputs[0]),y.disconnect(v.gain),w.disconnect(x.gain),A.disconnect(T.gain),k.disconnect(C.gain),v.disconnect(h,0,0),T.disconnect(h,0,0),x.disconnect(h,0,1),C.disconnect(h,0,1)}}},p=(t,e,n,i,s)=>{if(1===e)return h(t,n,i,s);if(2===e)return c(t,n,i,s);throw r()};return(e,{channelCount:i,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw r();let u=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),h=n(e,{...l,channelCount:i,channelCountMode:o,gain:1}),c=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a}),{connectGraph:d,disconnectGraph:f}=p(e,i,h,c,u);Object.defineProperty(c.gain,"defaultValue",{get:()=>0}),Object.defineProperty(c.gain,"maxValue",{get:()=>1}),Object.defineProperty(c.gain,"minValue",{get:()=>-1});let m=!1;return s(ev({get bufferSize(){return},get channelCount(){return h.channelCount},set channelCount(value){h.channelCount!==value&&(m&&f(),{connectGraph:d,disconnectGraph:f}=p(e,value,h,c,u),m&&d()),h.channelCount=value},get channelCountMode(){return h.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw r();h.channelCountMode=value},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(value){h.channelInterpretation=value},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return c.gain},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])},u),()=>{d(),m=!0},()=>{f(),m=!1})}})(nv,eg,ex,nL,eT,ng),eT),nY=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=G(l,a);return u||(l=e(a,{channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value})),s.set(a,l),u?await t(a,o.pan,l.pan):await i(a,o.pan,l.pan),tg(l)?await r(o,a,l.inputs[0]):await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(na,nX,tA,nu,eH),nG=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=r(t),l=n(a,{...eM,...o}),u=s(a);super(t,!1,l,u?i():null),this._pan=e(this,u,l.pan)}get pan(){return this._pan}})(e5,nc,nX,nY,eQ,eK),nH=((t,e,n)=>()=>{let i=new WeakMap,r=async(r,s)=>{let o=e(r);return G(o,s)||(o=t(s,{channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample})),i.set(s,o),tg(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}})(nL,tA,eH),nZ=((t,e,n,i,r,s,o)=>class extends t{constructor(t,e){let a=r(t),l=n(a,{...eE,...e});super(t,!0,l,s(a)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(e5,t8,nL,nH,eQ,eK,nm),nQ=(t=>null!==t&&t.isSecureContext)(eX),nJ=(t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(eX),nK=new WeakMap,n0=((t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i})(nK,eJ),n1=nQ?((t,e,n,i,r,s,o,a,l,u,h,c,p)=>{let d=0;return(f,m,g={credentials:"omit"})=>{let v=h.get(f);if(void 0!==v&&v.has(m))return Promise.resolve();let y=u.get(f);if(void 0!==y){let t=y.get(m);if(void 0!==t)return t}let x=s(f),w=void 0===x.audioWorklet?r(m).then(([t,e])=>{let[i,r]=P(t,e);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}
})})(window,'_AWGS')`)}).then(()=>{let t=p._AWGS.pop();if(void 0===t)throw SyntaxError();i(x.currentTime,x.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();let i=N.get(x);if(void 0!==i){if(i.has(t))throw e();F(n),q(n.parameterDescriptors),i.set(t,n)}else F(n),q(n.parameterDescriptors),N.set(x,new Map([[t,n]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(t(c,c))]).then(([[t,e],n])=>{let i=d+1;d=i;let[r,s]=P(t,e),u=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${s}
})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(u);return x.audioWorklet.addModule(h,g).then(()=>{if(a(x))return x;let t=o(x);return t.audioWorklet.addModule(h,g).then(()=>t)}).then(t=>{if(null===l)throw SyntaxError();try{new l(t,`__sac${i}`)}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(h))});return void 0===y?u.set(f,new Map([[m,w]])):y.set(m,w),w.then(()=>{let t=h.get(f);void 0===t?h.set(f,new Set([m])):t.add(m)}).finally(()=>{let t=u.get(f);void 0!==t&&t.delete(m)}),w}})(eU,eT,(t=>e=>new Promise((n,i)=>{if(null===t)return void i(SyntaxError());let r=t.document.head;if(null===r)i(SyntaxError());else{let s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,r,s,o)=>n===a||n===t.location.href&&1===r&&1===s?(u(),i(o),!1):null!==l?l(e,n,r,s,o):void 0,s.onerror=()=>{u(),i(SyntaxError())},s.onload=()=>{u(),n()},s.src=a,s.type="module",r.appendChild(s)}}))(eX),nJ,(s=()=>new DOMException("","AbortError"),async t=>{try{let e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw s()}),eQ,n0,eK,e6,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(n),s=!1,o=!1;try{await i.audioWorklet.addModule(r);let e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>s=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await i.startRendering(),await new Promise(t=>setTimeout(t))}catch{}finally{URL.revokeObjectURL(r)}return s&&!o})(e6,eJ),eX):void 0,n2=t=>e3(t)||eK(t),n3=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m,g,v,y,x)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new s(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(t=1){return new h(this,{maxDelayTime:t})}createDynamicsCompressor(){return new c(this)}createGain(){return new p(this)}createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new v(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new x(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t),t=>{throw"function"==typeof n&&n(t),t})}})(n1,e9,nr,np,n_,ny,nx,nT,nC,((t,e,n,i,r,s,o,a,l,u,h)=>(c,p)=>{let d=o(c)?c:s(c);if(r.has(p))return Promise.reject(n());try{r.add(p)}catch{}return e(l,()=>l(d))?d.decodeAudioData(p).then(n=>(tJ(p).catch(()=>{}),e(a,()=>a(n))||h(n),t.add(n),n)):new Promise((e,n)=>{let r=async()=>{try{await tJ(p)}catch{}},s=t=>{n(t),r()};try{d.decodeAudioData(p,n=>{"function"!=typeof n.copyFromChannel&&(u(n),Q(n)),t.add(n),r().then(()=>e(n))},t=>{null===t?s(i()):s(t)})}catch(t){s(t)}})})(e7,eU,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,eQ,n2,H,ee,nn,ni),nk,nM,nO,nD,nV,nF,nz,nU,nG,nZ),n8=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t),o=e(s,r);if(i(s))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(e5,(t,e)=>t.createMediaElementSource(e.mediaElement),eQ,eK),n4=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t);if(i(s))throw TypeError();let o=e(s,{...et,...r});super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(e5,(t,e)=>{let n=t.createMediaStreamDestination();return ei(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},eQ,eK),n6=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t),o=e(s,r);if(i(s))throw TypeError();super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(e5,(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:+(t.id>e.id));let i=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r},eQ,eK),n5=((t,e,n)=>class extends t{constructor(t,i){super(t,!0,e(n(t),i),null)}})(e5,(t,{mediaStreamTrack:e})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(e);let n=new MediaStream([e]),i=t.createMediaStreamSource(n);if("audio"!==e.kind)throw t8();if(eK(t))throw TypeError();return i},eQ),n9=((t,e,n,i,r,s,o,a,l)=>class extends t{constructor(t={}){let e;if(null===l)throw Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw i();if(!tc(t.latencyHint))throw TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);let{latencyHint:r}=t,{sampleRate:s}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===r?512/s:"interactive"===r||void 0===r?256/s:"playback"===r?1024/s:128*Math.max(2,Math.min(128,Math.round(r*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";let t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),th(this)}))}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{let n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}})(n3,t8,eT,eO,n8,n4,n6,n5,e2),n7=t=>{let e=nR.get(t);if(void 0===e)throw Error("The context has no set of AudioWorkletNodes.");return e},it=(t,e)=>{n7(t).add(e)},ie=(t,e,n=0,i=0)=>{let r=t[n];if(void 0===r)throw Z();return tE(e)?r.connect(e,0,i):r.connect(e,0)},ii=(t,e)=>{n7(t).delete(e)},ir=(t=>(e,n,i,r=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?t1(t,e,n).disconnect():tE(n)?void 0===i?e.forEach(t=>t.disconnect(n)):void 0===r?t1(t,e,i).disconnect(n,0):t1(t,e,i).disconnect(n,0,r):void 0===i?e.forEach(t=>t.disconnect(n)):t1(t,e,i).disconnect(n,0))(Z),is=new WeakMap,io=((t,e,n,i,r,s,o,a,l,u,h,c,p)=>(d,f,m,g)=>{let v,y;if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();let x=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(x.some(t=>t<1))throw l();if(x.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();let w=g.channelCount*g.numberOfInputs,b=x.reduce((t,e)=>t+e,0),T=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(w+T>6||b>6)throw l();let A=new MessageChannel,C=[],k=[];for(let t=0;t<g.numberOfInputs;t+=1)C.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let S=[];if(void 0!==m.parameterDescriptors)for(let{defaultValue:t,maxValue:e,minValue:n,name:i}of m.parameterDescriptors){let r=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),S.push(r)}let M=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+T)}),O=ec(f,d.sampleRate),E=a(d,O,w+T,Math.max(1,b)),N=r(d,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),D=[];for(let t=0;t<g.numberOfOutputs;t+=1)D.push(i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[t]}));for(let t=0;t<g.numberOfInputs;t+=1){C[t].connect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[t].connect(M,e,t*g.channelCount+e)}let I=new t$(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{let n=S[e];return n.connect(M,0,w+e),n.start(0),[t,n.offset]}));M.connect(E);let R=g.channelInterpretation,V=null,P=0===g.numberOfOutputs?[E]:D,q={get bufferSize(){return O},get channelCount(){return g.channelCount},set channelCount(_){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){throw n()},get channelInterpretation(){return R},set channelInterpretation(value){for(let t of C)t.channelInterpretation=value;R=value},get context(){return E.context},get inputs(){return C},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return V},set onprocessorerror(value){"function"==typeof V&&q.removeEventListener("processorerror",V),"function"==typeof(V="function"==typeof value?value:null)&&q.addEventListener("processorerror",V)},get parameters(){return I},get port(){return A.port2},addEventListener:(...t)=>E.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,P),disconnect:u.bind(null,P),dispatchEvent:(...t)=>E.dispatchEvent(t[0]),removeEventListener:(...t)=>E.removeEventListener(t[0],t[1],t[2])},F=new Map;A.port1.addEventListener=(v=A.port1.addEventListener,(...t)=>{if("message"===t[0]){let e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){let n=F.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(d.currentTime,d.sampleRate,()=>e(t))},F.set(e,t[1]))}}return v.call(A.port1,t[0],t[1],t[2])}),A.port1.removeEventListener=(y=A.port1.removeEventListener,(...t)=>{if("message"===t[0]){let e=F.get(t[1]);void 0!==e&&(F.delete(t[1]),t[1]=e)}return y.call(A.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(A.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&A.port1.removeEventListener("message",j),"function"==typeof(j="function"==typeof t?t:null)&&(A.port1.addEventListener("message",j),A.port1.start())}}),m.prototype.port=A.port1;let $=null;ef(d,q,m,g).then(t=>$=t);let L=tz(g.numberOfInputs,g.channelCount),W=tz(g.numberOfOutputs,x),B=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{}),z=!0,U=()=>{g.numberOfOutputs>0&&E.disconnect(N);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=D[t];for(let i=0;i<x[t];i+=1)N.disconnect(n,e+i,i);e+=x[t]}},X=new Map;E.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==$){let n=c(q);for(let i=0;i<O;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)tW(t,L[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{tW(t,B,e,w+n,i)});for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<x[t];e+=1)0===W[t][e].byteLength&&(W[t][e]=new Float32Array(128));try{let t=L.map((t,e)=>{if(n[e].size>0)return X.set(e,O/128),t;let i=X.get(e);return void 0===i?[]:(t.every(t=>t.every(t=>0===t))&&(1===i?X.delete(e):X.set(e,i-1)),t)});z=h(d.currentTime+i/d.sampleRate,d.sampleRate,()=>$.process(t,W,B));for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let r=0;r<x[t];r+=1)tB(e,W[t],r,n+r,i);n+=x[t]}}catch(t){z=!1,q.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!z){for(let t=0;t<g.numberOfInputs;t+=1){C[t].disconnect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[i].disconnect(M,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){let t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){let t=S[e];t.disconnect(M,0,w+e),t.stop()}}M.disconnect(E),E.onaudioprocess=null,Y?U():Z();break}}}};let Y=!1,G=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),H=()=>E.connect(G).connect(d.destination),Z=()=>{E.disconnect(G),G.disconnect()};return H(),p(q,()=>{if(z){Z(),g.numberOfOutputs>0&&E.connect(N);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=D[t];for(let i=0;i<x[t];i+=1)N.connect(n,e+i,i);e+=x[t]}}Y=!0},()=>{z&&(H(),U()),Y=!1})})(ie,Z,t8,nv,eg,nb,ex,eb,eT,ir,nJ,t=>j(is,t),ng),ia=((t,e,n,i,r)=>(s,o,a,l,u,h)=>{if(null!==a)try{let e=new a(s,l,h),i=new Map,o=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t="function"==typeof n[1]?n[1]:"object"==typeof n[1]&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){let e=i.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},i.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t=i.get(n[1]);void 0!==t&&(i.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==h.numberOfOutputs){let t=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(s.destination),r(e,()=>t.disconnect(),()=>t.connect(s.destination))}return e}catch(t){if(11===t.code)throw i();throw t}if(void 0===u)throw i();return eh(h),e(s,o,u,h)})(t8,io,ex,eT,ng),il=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m)=>(g,v,y)=>{let x=new WeakMap,w=null,b=async(a,b)=>{let T=h(a),A=null,C=G(T,b),k=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===c){let t=k.reduce((t,e)=>t+e,0),n=r(b,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[t]}));let u=o(b,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});u.connect=e.bind(null,s),u.disconnect=l.bind(null,s),A=[n,s,u]}else C||(T=new c(b,g));if(x.set(b,null===A?T:A[2]),null!==A){if(null===w){if(void 0===y)throw Error("Missing the processor constructor.");if(null===p)throw Error("Missing the native OfflineAudioContext constructor.");let t=a.channelCount*a.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,l=async()=>{let l=new p(n,128*Math.ceil(a.context.length/128),b.sampleRate),u=[],h=[];for(let t=0;t<v.numberOfInputs;t+=1)u.push(o(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),h.push(r(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let c=await Promise.all(Array.from(a.parameters.values()).map(async t=>{let e=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(l,t,e.offset),e})),g=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<v.numberOfInputs;t+=1){u[t].connect(h[t]);for(let e=0;e<v.channelCount;e+=1)h[t].connect(g,e,t*v.channelCount+e)}for(let[e,n]of c.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map(t=>f(a,l,t))),m(l)};w=tX(a,0===n?null:await l(),b,v,k,y,u)}let t=await w,e=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,c]=A;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){let n=h[t];for(let i=0;i<k[t];i+=1)l.connect(n,e+i,i);e+=k[t]}return c}if(C)for(let[e,n]of a.parameters.entries())await t(b,n,T.parameters.get(e));else for(let[t,e]of a.parameters.entries())await d(b,e,T.parameters.get(t));return await f(a,b,T),T};return{render(t,e){a(e,t);let n=x.get(e);return void 0!==n?Promise.resolve(n):b(t,e)}}})(na,ie,nl,nv,eg,nb,ex,ii,ir,nJ,tA,e6,eJ,nu,eH,nN),iu=t=>nK.get(t),ih=(t,e)=>{is.set(t,e)},ic=nQ?((t,e,n,i,r,s,o,a,l,u,h,c,p,d)=>class extends e{constructor(e,d,f){var m;let g=a(e),v=l(g),y=h({...tL,...f});p(y);let x=N.get(g),w=null==x?void 0:x.get(d),b=r(v||"closed"!==g.state?g:null!=(m=o(g))?m:g,v?null:e.baseLatency,u,d,w,y);super(e,!0,b,v?i(d,y,w):null);let T=[];b.parameters.forEach((t,e)=>{let i=n(this,v,t);T.push([e,i])}),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new t$(T),v&&t(g,this);let{activeInputs:A}=s(this);c(b,A)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){let e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;let n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(it,e5,nc,il,ia,ta,iu,eQ,eK,e6,t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),ih,t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},ej):void 0,ip=((t,e)=>(n,i,r)=>{if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(eT,eJ),id=((t,e,n,i,r,s,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(i(u)).map(t=>n(t).render(t,u)))).then(()=>r(u)).then(n=>("function"!=typeof n.copyFromChannel?(o(n),Q(n)):e(s,()=>s(n))||a(n),t.add(n),n)))(e7,eU,eG,n7,nN,H,nn,ni),im=((t,e,n,i,r)=>class extends t{constructor(t,n,r){let s;if("number"==typeof t&&void 0!==n&&void 0!==r)s={length:n,numberOfChannels:t,sampleRate:r};else if("object"==typeof t)s=t;else throw Error("The given parameters are not valid.");let{length:o,numberOfChannels:a,sampleRate:l}={...eA,...s},u=i(a,o,l);e(ee,()=>ee(u))||u.addEventListener("statechange",(()=>{let t=0,e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,th(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}})(n3,eU,t8,ip,id),i_=((t,e)=>n=>e(t.get(n))||e(n))(M,e3),ig=t=>C.has(t)||e8(t),iv=t=>S.has(t)||e4(t),iy=((t,e)=>n=>e(t.get(n))||e(n))(M,eK);function ix(t){return void 0===t}function iw(t){return void 0!==t}function ib(t){return"number"==typeof t}function iT(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function iA(t){return Array.isArray(t)}function iC(t){return"string"==typeof t}function ik(t){return iC(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function iS(t,e){if(!t)throw Error(e)}function iM(t,e,n=1/0){if(!(e<=t&&t<=n))throw RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function iO(t){t.isOffline||"running"===t.state||iI('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let iE=!1,iN=!1,iD=console;function iI(...t){iD.warn(...t)}let iR="object"==typeof self?self:null,iV=iR&&(iR.hasOwnProperty("AudioContext")||iR.hasOwnProperty("webkitAudioContext"));function iP(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function iq(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class iF{constructor(t,e,n,i){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){let t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=new Worker(URL.createObjectURL(t));e.onmessage=this._callback.bind(this),this._worker=e}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null==(e=this._worker)||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function ij(t,...e){if(!e.length)return t;let n=e.shift();if(iT(t)&&iT(n))for(let e in n){var i,r;(i=e,r=n[e],"value"===i||iv(r)||ig(r)||r instanceof nr)?t[e]=n[e]:iT(n[e])?(t[e]||Object.assign(t,{[e]:{}}),ij(t[e],n[e])):Object.assign(t,{[e]:n[e]})}return ij(t,...e)}function i$(t,e,n=[],i){let r={},s=Array.from(e);if(iT(s[0])&&i&&!Reflect.has(s[0],i)&&(Object.keys(s[0]).some(e=>Reflect.has(t,e))||(ij(r,{[i]:s[0]}),n.splice(n.indexOf(i),1),s.shift())),1===s.length&&iT(s[0]))ij(r,s[0]);else for(let t=0;t<n.length;t++)iw(s[t])&&(r[n[t]]=s[t]);return ij(t,r)}function iL(t,e){return ix(t)?e:t}function iW(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}class iB{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||iR&&this.toString()===iR.TONE_DEBUG_CLASS)&&function(...t){iD.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function iz(t,e){return t>e+1e-6}function iU(t,e){return iz(t,e)||iY(t,e)}function iX(t,e){return t+1e-6<e}function iY(t,e){return 1e-6>Math.abs(t-e)}function iG(t,e,n){return Math.max(Math.min(t,n),e)}iB.version=v;class iH extends iB{constructor(){super(),this.name="Timeline",this._timeline=[];let t=i$(iH.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(iS(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let e=this._timeline[this.length-1];iS(iU(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){let e=this._timeline.indexOf(t);return -1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){let n=this._search(t,e);return -1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){let n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){let e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];let n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(iY(this._timeline[e].time,t)){for(let n=e;n>=0;n--)if(iY(this._timeline[n].time,t))e=n;else break;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&iU(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){let e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){let e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return -1;let n=0,i=this._timeline.length,r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<r;){let i=Math.floor(n+(r-n)/2),s=this._timeline[i],o=this._timeline[i+1];if(iY(s[e],t)){for(let n=i;n<this._timeline.length;n++)if(iY(this._timeline[n][e],t))i=n;else break;return i}if(iX(s[e],t)&&iz(o[e],t))return i;iz(s[e],t)?r=i:n=i+1}return -1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){let n=this._search(t);return -1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){let n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),r=this._search(e);return -1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){let n=this._search(t);if(-1!==n&&iY(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0;e--)if(iY(this._timeline[e].time,t))i=e;else break;this._iterate(t=>{e(t)},i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let iZ=[];function iQ(t){iZ.push(t)}let iJ=[];function iK(t){iJ.push(t)}class i0 extends iB{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(t=>{ix(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){let n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach(t=>{if(ix(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(ix(e))this._events[t]=[];else{let n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){let n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{let n=Object.getOwnPropertyDescriptor(i0.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class i1 extends i0{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class i2 extends i1{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new iH,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let n=i$(i2.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null==(t=arguments[0])?void 0:t.latencyHint)||""):(this._context=new n9({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new iF(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null==(e=arguments[0])?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){if(!this._initialized){var t;t=this,iZ.forEach(e=>e(t)),this._initialized=!0}return this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return iS(i_(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return iS(i_(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return iS(i_(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){iS(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){iS(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){iS(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){iS(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){var n;return n=this.rawContext,iS(iw(ic),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(null==iR?void 0:iR.BaseAudioContext)?null==iR?void 0:iR.AudioWorkletNode:ic)(n,t,e)}addAudioWorkletModule(t){return iq(this,void 0,void 0,function*(){iS(iw(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return iq(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return i_(this._context)?this._context.resume():Promise.resolve()}close(){return iq(this,void 0,void 0,function*(){var t;i_(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,iJ.forEach(e=>e(t)))})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;let i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){let t=this.now();this._timeouts.forEachBefore(t,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(t,e){this._timeoutIds++;let n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){let n=++this._timeoutIds,i=()=>{let r=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:r+e})};return i(),n}}class i3 extends i1{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return iq(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function i8(t,e){iA(e)?e.forEach(e=>i8(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}let i4=()=>{};class i6 extends iB{constructor(){super(),this.name="ToneAudioBuffer",this.onload=i4;let t=i$(i6.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,iC(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:i4,onload:i4,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:rt().sampleRate}set(t){return t instanceof i6?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return iq(this,void 0,void 0,function*(){let e=i6.load(t).then(t=>{this.set(t),this.onload(this)});i6.downloads.push(e);try{yield e}finally{let t=i6.downloads.indexOf(e);i6.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let e=iA(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=rt(),s=r.createBuffer(n,i,r.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)s.copyToChannel(o[t],t);return this._buffer=s,this}toMono(t){if(ib(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length),e=this.numberOfChannels;for(let n=0;n<e;n++){let e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(ib(t))return this.getChannelData(t);{if(1===this.numberOfChannels)return this.toArray(0);let t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){iS(this.loaded,"Buffer is not loaded");let n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);iS(n<i,"The start time must be less than the end time");let r=rt().createBuffer(this.numberOfChannels,i-n,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)r.copyToChannel(this.getChannelData(t).subarray(n,i),t);return new i6(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new i6().fromArray(t)}static fromUrl(t){return iq(this,void 0,void 0,function*(){let e=new i6;return yield e.load(t)})}static load(t){return iq(this,void 0,void 0,function*(){let e=""===i6.baseUrl||i6.baseUrl.endsWith("/")?i6.baseUrl:i6.baseUrl+"/",n=yield fetch(e+t);if(!n.ok)throw Error(`could not load url: ${t}`);let i=yield n.arrayBuffer();return yield rt().decodeAudioData(i)})}static supportsType(t){let e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return iq(this,void 0,void 0,function*(){for(yield Promise.resolve();i6.downloads.length;)yield i6.downloads[0]})}}i6.baseUrl="",i6.downloads=[];class i5 extends i2{constructor(){var t,e,n,i,r,s;super({clockSource:"offline",context:(t=arguments[0],iy(t))?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],i=arguments[2],new im(e,n,i)),lookAhead:0,updateInterval:(r=arguments[0],iy(r))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,s=arguments[0],this._duration=iy(s)?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return iq(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;let n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(){return iq(this,arguments,void 0,function*(t=!0){return yield this.workletsAreReady(),yield this._renderClock(t),new i6((yield this._context.startRendering()))})}close(){return Promise.resolve()}}let i9=new i3,i7=i9;function rt(){return i7===i9&&iV&&function(t,e=!1){e&&i7.dispose(),i7=i_(t)?new i2(t):iy(t)?new i5(t):t}(new i2),i7}function re(){return i7.resume()}if(iR&&!iR.TONE_SILENCE_LOGGING){let t=` * Tone.js v${v} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function rn(t){return Math.pow(2,t/12)}let ri=440;function rr(t){return Math.round(rs(t))}function rs(t){return 69+12*Math.log2(t/ri)}function ro(t){return ri*Math.pow(2,(t-69)/12)}class ra extends iB{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{let n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ra&&this.fromType(this._val),ix(this._val))return this._noArg();if(iC(this._val)&&ix(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(iT(this._val)){let t=0;for(let e in this._val)if(iw(this._val[e])){let n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(iw(this._units)){let t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return iC(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class rl extends ra{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let e=new rl(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){let n=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),r=Math.round(i/n);return i+(r*n-i)*e}toNotation(){let t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){let n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],i=new rl(this.context,e[0]).toSeconds();return e.forEach(e=>{let r=new rl(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(i-t)&&(n=e,i=r)}),n}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),e=this.valueOf()/t,n=Math.floor((e=parseFloat(e.toFixed(4)))/this._getTimeSignature()),i=e%1*4;e=Math.floor(e)%this._getTimeSignature();let r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[n,e,i].join(":")}toTicks(){let t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return rr(this.toFrequency())}_now(){return this.context.now()}}class ru extends rl{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ri}static set A4(t){ri=t}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:ru.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){let n=rh[t.toLowerCase()]+(parseInt(e,10)+1)*12;return"midi"===this.defaultUnits?n:ru.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new ru(this.context,this.valueOf()*rn(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return rr(this.valueOf())}toNote(){let t=Math.round(12*Math.log2(this.toFrequency()/ru.A4))+57,e=Math.floor(t/12);return e<0&&(t+=-12*e),rc[t%12]+e.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1);return Math.floor(this.valueOf()/t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return ro(t)}static ftom(t){return rr(t)}}let rh={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},rc=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class rp extends rl{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class rd extends iB{constructor(){super();let t=i$(rd.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:rt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return ix(t)&&iE&&!iN&&(iN=!0,iI("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing")),new rl(this.context,t).toSeconds()}toFrequency(t){return new ru(this.context,t).toFrequency()}toTicks(t){return new rp(this.context,t).toTicks()}_getPartialProperties(t){let e=this.get();return Object.keys(e).forEach(n=>{ix(t[n])&&delete e[n]}),e}get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){let n=this[e];iw(n)&&iw(n.value)&&iw(n.setValueAtTime)?t[e]=n.value:n instanceof rd?t[e]=n._getPartialProperties(t[e]):iA(n)||ib(n)||iC(n)||"boolean"==typeof n?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&iw(this[e])&&(this[e]&&iw(this[e].value)&&iw(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof rd?this[e].set(t[e]):this[e]=t[e])}),this}}class rf extends iH{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return iM(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){let n=this._search(e);for(let e=n;e>=0;e--){let n=this._timeline[e];if(n.state===t)return n}}getNextState(t,e){let n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){let n=this._timeline[e];if(n.state===t)return n}}}class rm extends rd{constructor(){let t=i$(rm.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,iS(iw(t.param)&&(iv(t.param)||t.param instanceof rm),"param must be an AudioParam");!iv(t.param);)t.param=t.param._param;this._swappable=!!iw(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new iH(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,iw(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rd.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return iw(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return iw(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return iw(this.maxValue)&&iw(this.minValue)&&iM(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){if(this.convert&&!this.overridden)if(this._is(t,"time"))return this.toSeconds(t);else if(this._is(t,"decibels"))return Math.pow(10,t/20);else if(this._is(t,"frequency"))return this.toFrequency(t);else return t;return this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Math.log(t)/Math.LN10*20:t}setValueAtTime(t,e){let n=this.toSeconds(e),i=this._fromType(t);return iS(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){let e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e),r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"===i.type&&(null===n||"setValueAtTime"===n.type)){let t,n=this._events.getBefore(i.time);t=null===n?this._initialValue:n.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,t,i.value,i.constant,e))}else if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){let e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else r=i.value;return this._toType(r)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){let n=this._fromType(t),i=this.toSeconds(e);return iS(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=iY(n,0)?this._minOutput:n,this._assertRange(n);let i=this.toSeconds(e);return iS(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e);let i=Math.log((n=this.toSeconds(n))+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){let i=this._fromType(t);iS(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");let r=this.toSeconds(e);return this._assertRange(i),iS(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);let r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);let s=n/(t.length-1);for(let n=1;n<t.length;n++){let r=this._fromType(t[n])*i;this.linearRampToValueAtTime(this._toType(r),e+n*s)}return this}cancelScheduledValues(t){let e=this.toSeconds(t);return iS(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){let e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));iS(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);let i=this._events.get(e),r=this._events.getAfter(e);return i&&iY(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){let e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);let n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){let i=this._events.getAfter(n.time),r=i?i.time:e+2,s=(r-e)/10;for(let n=e;n<r;n+=s)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){iS(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}_linearInterpolate(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}class r_ extends rd{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return iw(this.input)?iv(this.input)||this.input instanceof rm?1:this.input.numberOfInputs:0}get numberOfOutputs(){return iw(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return iw(t)&&(t instanceof r_||ig(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();iS(t.length>0,"ToneAudioNode does not have any internal nodes");let e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return rv(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return iI("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,i=0){if(iw(e))for(;e instanceof r_;)e=e.input;for(;!ig(t);)iw(t.output)&&(t=t.output);iv(e)?t.disconnect(e,n):ig(e)?t.disconnect(e,n,i):t.disconnect()}(this,t,e,n),this}chain(...t){return rg(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),iw(this.input)&&(this.input instanceof r_?this.input.dispose():ig(this.input)&&this.input.disconnect()),iw(this.output)&&(this.output instanceof r_?this.output.dispose():ig(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rg(...t){let e=t.shift();t.reduce((t,e)=>(t instanceof r_?t.connect(e):ig(t)&&rv(t,e),e),e)}function rv(t,e,n=0,i=0){for(iS(iw(t),"Cannot connect from undefined node"),iS(iw(e),"Cannot connect to undefined node"),(e instanceof r_||ig(e))&&iS(e.numberOfInputs>0,"Cannot connect to node with no inputs"),iS(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof r_||e instanceof rm;)iw(e.input)&&(e=e.input);for(;t instanceof r_;)iw(t.output)&&(t=t.output);iv(e)?t.connect(e,n):t.connect(e,n,i)}class ry extends r_{constructor(){let t=i$(ry.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new rm({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),i8(this,"gain")}static getDefaults(){return Object.assign(r_.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class rx extends r_{constructor(t){super(t),this.onended=i4,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ry({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let e=this.toSeconds(t);return -1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(r_.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:i4})}_startGain(t,e=1){iS(-1===this._startTime,"Source cannot be started more than once");let n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){iS(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();let e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==i4&&(this.onended(this),this.onended=i4,!this.context.isOffline)){let t=()=>this.dispose();"undefined"!=typeof requestIdleCallback?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),iS(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=i4,this}}class rw extends rx{constructor(){let t=i$(rw.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),rv(this._source,this._gainNode),this.offset=new rm({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(rx.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class rb extends r_{constructor(){let t=i$(rb.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new rw({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(r_.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return rT(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function rT(t,e,n,i){(e instanceof rm||iv(e)||e instanceof rb&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof rb&&(e.overridden=!0)),rv(t,e,n,i)}class rA extends rm{constructor(){let t=i$(rA.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new iH(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rm.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);let i=this._fromType(t),r=this._events.get(e),s=Math.round(Math.max(1/n,1));for(let t=0;t<=s;t++){let s=n*t+e,o=this._exponentialApproach(r.time,r.value,i,n,s);this.linearRampToValueAtTime(this._toType(o),s)}return this}setValueAtTime(t,e){let n=this.toSeconds(e);super.setValueAtTime(t,e);let i=this._events.get(n),r=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(r,n),0),this}linearRampToValueAtTime(t,e){let n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);let i=this._events.get(n),r=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(r,n),0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);let n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max((e-i.time)*10,1)),s=(e-i.time)/r;for(let t=0;t<=r;t++){let r=s*t+i.time,o=this._exponentialInterpolate(i.time,i.value,e,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ix(t.ticks)){let e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}let n=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){let e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){let e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){let i=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),s=Math.sqrt(Math.pow(i,2)-2*r*(e.ticks-t)),o=(-i+s)/r;return(o>0?o:(-i-s)/r)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){let n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-r}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class rC extends rb{constructor(){let t=i$(rC.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new rA({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(rb.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class rk extends rd{constructor(){let t=i$(rk.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new rf,this._tickOffset=new iH,this._ticksAtTime=new iH,this._secondsAtTime=new iH,this.frequency=new rC({context:this.context,units:t.units,value:t.frequency}),i8(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rd.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){let n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),iw(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){let e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){let t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){let e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i=this._ticksAtTime.get(e),r={state:"paused",time:e};this._state.add(r);let s=i||n,o=i?i.ticks:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,t=>{let e=s.time,n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(o=n.ticks,e=n.time),"started"===s.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==r.time&&(a={state:t.state,time:t.time,ticks:o})),s=t}),this._state.remove(r),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);let e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=this._secondsAtTime.get(t),r=i||e,s=i?i.seconds:0,o=null;return this._state.forEachBetween(r.time,t+this.sampleTime,t=>{let e=r.time,i=this._tickOffset.get(t.time);i&&i.time>=r.time&&(s=i.seconds,e=i.time),"started"===r.state&&"started"!==t.state&&(s+=t.time-e,t.time!==n.time&&(o={state:t.state,time:t.time,seconds:s})),r=t}),this._state.remove(n),o&&this._secondsAtTime.add(o),s}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){let n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),s=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e});let r=null;if(i&&"started"===i.state){let s=Math.max(i.time,t),o=this.frequency.getTicksAtTime(s),a=o-this.frequency.getTicksAtTime(i.time),l=Math.ceil(a)-a;l=iY(l,1)?0:l;let u=this.frequency.getTimeOfTick(o+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){r=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class rS extends rd{constructor(){let t=i$(rS.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=i4,this._lastUpdate=0,this._state=new rf("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new rk({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,i8(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rd.getDefaults(),{callback:i4,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){iO(this.context);let n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){let e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){let t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":let e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}i0.mixin(rS);class rM extends r_{constructor(){let t=i$(rM.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ry({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,i8(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(r_.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class rO extends r_{constructor(){let t=i$(rO.getDefaults(),arguments);super(t),this.name="Destination",this.input=new rM({context:this.context}),this.output=new ry({context:this.context}),this.volume=this.input.volume,rg(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(r_.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),rg(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}iQ(t=>{t.destination=new rO({context:t})}),iK(t=>{t.destination.dispose()});class rE extends r_{constructor(){super(...arguments),this.name="Listener",this.positionX=new rm({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new rm({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new rm({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new rm({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new rm({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new rm({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new rm({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new rm({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new rm({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(r_.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}iQ(t=>{t.listener=new rE({context:t})}),iK(t=>{t.listener.dispose()});class rN extends iB{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let t=i$(rN.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;let n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:i4,onload:i4,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return iS(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=i4,i=i4){return iC(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new i6(this.baseUrl+e,n,i))):this._buffers.set(t.toString(),new i6(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class rD extends ru{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return rr(super._frequencyToUnits(t))}_ticksToUnits(t){return rr(super._ticksToUnits(t))}_beatsToUnits(t){return rr(super._beatsToUnits(t))}_secondsToUnits(t){return rr(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return ro(this.toMidi())}transpose(t){return new rD(this.context,this.toMidi()+t)}}class rI extends rp{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class rR extends rd{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new iH,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}iQ(t=>{t.draw=new rR({context:t})}),iK(t=>{t.draw.dispose()});class rV extends iB{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){iS(iw(t.time),"Events must have a time property"),iS(iw(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rP(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){let e=[];for(let n of(this._root.search(t.time,e),e))if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=t.getBalance(),i=null;if(n>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){let e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){let e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){let e=t.getBalance();e>1&&t.left?0>t.left.getBalance()?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){let e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){let e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){let n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){let n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rP{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){!(t>this.max)&&(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class rq extends iB{constructor(t){super(),this.name="TimelineValue",this._timeline=new iH({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){let e=this._timeline.get(t);return e?e.value:this._initialValue}}class rF extends r_{constructor(){super(i$(rF.getDefaults(),arguments,["context"]))}connect(t,e=0,n=0){return rT(this,t,e,n),this}}class rj extends rF{constructor(){let t=i$(rj.getDefaults(),arguments,["mapping","length"]);(super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,iA(t.mapping)||t.mapping instanceof Float32Array)?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(rb.getDefaults(),{length:1024})}setMap(t,e=1024){let n=new Float32Array(e);for(let i=0;i<e;i++){let r=i/(e-1)*2-1;n[i]=t(r,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){iS(["none","2x","4x"].some(e=>e.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class r$ extends rF{constructor(){let t=i$(r$.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new rj({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(rF.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class rL{constructor(t,e){this.id=rL._eventId++,this._remainderTime=0;let n=Object.assign(rL.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:i4,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){let e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}rL._eventId=0;class rW extends rL{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let n=Object.assign(rW.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},rL.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return iX(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new rI(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){iX(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new rI(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let e=this.transport.getTicksAtTime(t);iz(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class rB extends rd{constructor(){let t=i$(rB.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new rq(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new iH,this._repeatedEvents=new rV,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new rS({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),i8(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(rd.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){let n=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new rI(this.context,2*this._swingTicks/3).toSeconds()*n}iE=!0,this._timeline.forEachAtTime(e,e=>e.invoke(t)),iE=!1}schedule(t,e){let n=new rL(this,{callback:t,time:new rp(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){let r=new rW(this,{callback:t,duration:new rl(this.context,i).toTicks(),interval:new rl(this.context,e).toTicks(),time:new rp(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(t,e){let n=new rL(this,{callback:t,once:!0,time:new rp(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){let e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new rI(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),iw(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){iA(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new rl(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new rl(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new rI(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),e=this._clock.getTicksAtTime(t);return new rI(this.context,e).toBarsBeatsSixteenths()}set position(t){let e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){let e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(!this.loop)return 0;{let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let e=this.now();if("started"===this.state){let n=this._clock.getTicksAtTime(e),i=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),r=e+i;this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{let e=this.now(),n=this.getTicksAtTime(e),i=t-n%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){let n=this.now(),i=this.bpm,r=1/(60/i.getValueAtTime(n)/this.PPQ),s=[];if("time"===t.units){let t=1/64/r,e=new ry(t),n=new r$(-1),o=new ry(t);i.chain(e,n,o),i=o,r=1/r,s=[e,n,o]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/r:0);let o=new ry(e);return i.connect(o),o.connect(t._param),s.push(o),this._syncedSignals.push({initial:t.value,nodes:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){let n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach(t=>t.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),!function t(e,n){iA(n)?n.forEach(n=>t(e,n)):Object.defineProperty(e,n,{writable:!0})}(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}i0.mixin(rB),iQ(t=>{t.transport=new rB({context:t})}),iK(t=>{t.transport.dispose()});class rz extends r_{constructor(t){super(t),this.input=void 0,this._state=new rf("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=i4,this._syncedStop=i4,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new rM({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,i8(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(r_.getDefaults(),{mute:!1,onstop:i4,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=ix(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){var r;let t=this._state.get(i);t&&(t.offset=this.toSeconds(ix(r=e)?0:r),t.duration=n?this.toSeconds(n):void 0);let s=this.context.transport.schedule(t=>{this._start(t,e,n)},i);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else iO(this.context),this._start(i,e,n);else iS(iz(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=ix(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||iw(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){let t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(iz(e,0)){let n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){let i,r=e-this.toSeconds(n.time);n.duration&&(i=this.toSeconds(n.duration)-r),this._start(t,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=t=>{let e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=i4,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class rU extends rx{constructor(){let t=i$(rU.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,rv(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new rm({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new i6(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(rx.getDefaults(),{url:new i6,loop:!1,loopEnd:0,loopStart:0,onload:i4,onerror:i4,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){var r,s,o;iS(this.buffer.loaded,"buffer is either not set or not loaded");let a=this.toSeconds(t);this._startGain(a,i),e=this.loop?(r=e,s=this.loopStart,ix(r)?s:r):ix(o=e)?0:o;let l=Math.max(this.toSeconds(e),0);if(this.loop){let t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;iU(l,t)&&(l=(l-e)%n+e),iY(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,iX(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,l)),iw(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(a+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class rX extends rz{constructor(){let t=i$(rX.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(rz.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(iS(t in rG,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){let t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){let e=rG[this._type];this._source=new rU({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}let rY={brown:null,pink:null,white:null},rG={get brown(){if(!rY.brown){let t=[];for(let e=0;e<2;e++){let n=new Float32Array(220500);t[e]=n;let i=0;for(let t=0;t<220500;t++){let e=2*Math.random()-1;n[t]=(i+.02*e)/1.02,i=n[t],n[t]*=3.5}}rY.brown=new i6().fromArray(t)}return rY.brown},get pink(){if(!rY.pink){let t=[];for(let e=0;e<2;e++){let n,i,r,s,o,a,l,u=new Float32Array(220500);t[e]=u,n=i=r=s=o=a=l=0;for(let t=0;t<220500;t++){let e=2*Math.random()-1;n=.99886*n+.0555179*e,i=.99332*i+.0750759*e,r=.969*r+.153852*e,s=.8665*s+.3104856*e,o=.55*o+.5329522*e,a=-.7616*a-.016898*e,u[t]=n+i+r+s+o+a+l+.5362*e,u[t]*=.11,l=.115926*e}}rY.pink=new i6().fromArray(t)}return rY.pink},get white(){if(!rY.white){let t=[];for(let e=0;e<2;e++){let n=new Float32Array(220500);t[e]=n;for(let t=0;t<220500;t++)n[t]=2*Math.random()-1}rY.white=new i6().fromArray(t)}return rY.white}};function rH(t,e){return iq(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,i=new i5(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class rZ extends rx{constructor(){let t=i$(rZ.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],rv(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new rm({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new rm({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),i8(this,["frequency","detune"])}static getDefaults(){return Object.assign(rx.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class rQ extends rz{constructor(){let t=i$(rQ.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new rb({context:this.context,units:"frequency",value:t.frequency}),i8(this,"frequency"),this.detune=new rb({context:this.context,units:"cents",value:t.detune}),i8(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(rz.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let e=this.toSeconds(t),n=new rZ({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){let e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){let e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return rQ._periodicWaveCache.find(t=>{var e,n;return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every((t,e)=>n[e]===t))});{let t=rQ._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{let e=this._getCachedPeriodicWave();if(iw(e)){let{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),rQ._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),rQ._periodicWaveCache.length>100&&rQ._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){iM(t,0);let e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)0===t?this.type=e:this.type=e+t.toString();else{let e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048,i=new Float32Array(2048),r=new Float32Array(n),s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[i,r]}else{let e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(s=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],n=s=Math.max(s,2)):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){let n,a=2/(o*Math.PI);switch(t){case"sine":n=+(o<=s),this._partials[o-1]=n;break;case"square":n=1&o?2*a:0,this._partials[o-1]=n;break;case"sawtooth":n=a*(1&o?1:-1),this._partials[o-1]=n;break;case"triangle":n=1&o?a*a*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=n;break;case"custom":n=this._partials[o-1];break;default:throw TypeError("Oscillator: invalid type: "+t)}0!==n?(i[o]=-n*Math.sin(e*o),r[o]=n*Math.cos(e*o)):(i[o]=0,r[o]=0)}return[i,r]}_inverseFFT(t,e,n){let i=0,r=t.length;for(let s=0;s<r;s++)i+=t[s]*Math.cos(s*n)+e[s]*Math.sin(s*n);return i}getInitialValue(){let[t,e]=this._getRealImaginary(this._type,0),n=0,i=2*Math.PI;for(let r=0;r<32;r++)n=Math.max(this._inverseFFT(t,e,r/32*i),n);return iG(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}rQ._periodicWaveCache=[];class rJ extends rF{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new rj({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class rK extends rb{constructor(){let t=i$(rK.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ry({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rb.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class r0 extends rz{constructor(){let t=i$(r0.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new rJ({context:this.context}),this._modulationNode=new ry({context:this.context}),this._carrier=new rQ({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new rQ({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new rK({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),i8(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rQ.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class r1 extends rz{constructor(){let t=i$(r1.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ry({context:this.context,gain:0}),this._carrier=new rQ({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new rb({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new rQ({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new rK({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new rK({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),i8(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rQ.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class r2 extends rz{constructor(){let t=i$(r2.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ry({context:this.context,gain:0}),this._thresh=new rj({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new rb({context:this.context,units:"audioRange",value:t.width}),this._triangle=new rQ({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),i8(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(rz.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class r3 extends rz{constructor(){let t=i$(r3.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new rb({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rb({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,i8(this,["frequency","detune"])}static getDefaults(){return Object.assign(rQ.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,i)=>t.detune.value=e+n*i)}}get count(){return this._oscillators.length}set count(t){if(iM(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){let n=new rQ({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):i4});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class r8 extends rz{constructor(){let t=i$(r8.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new rK({context:this.context,value:2}),this._pulse=new r2({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new rQ({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),i8(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(rz.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let r4={am:r0,fat:r3,fm:r1,oscillator:rQ,pulse:r2,pwm:r8};class r6 extends rz{constructor(){let t=i$(r6.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new rb({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rb({context:this.context,units:"cents",value:t.detune}),i8(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(rQ.getDefaults(),r1.getDefaults(),r0.getDefaults(),r3.getDefaults(),r2.getDefaults(),r8.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let e=r4[t],n=this.now();if(this._oscillator){let t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof r4[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&ib(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&ib(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&iC(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return iq(this,arguments,void 0,function*(t=1024){return rH(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function r5(t,e=1/0){let n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){iM(i,t,e),n.set(this,i)}})}}function r9(t,e=1/0){let n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){iM(this.toSeconds(i),t,e),n.set(this,i)}})}}class r7 extends rz{constructor(){let t=i$(r7.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new i6({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(rz.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:i4,onerror:i4,playbackRate:1,reverse:!1})}load(t){return iq(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=i4){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){var i,r,s,o,a;e=this._loop?(i=e,r=this._loopStart,ix(i)?r:i):ix(s=e)?0:s;let l=this.toSeconds(e),u=n;o=n,a=Math.max(this._buffer.duration-l,0),n=ix(o)?a:o;let h=this.toSeconds(n);h/=this._playbackRate,t=this.toSeconds(t);let c=new rU({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+h),this._state.setStateAtTime("stopped",t+h,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&ix(u)?c.start(t,l):c.start(t,l,h-this.toSeconds(this.fadeOut))}_stop(t){let e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var i;null==(i=[...this._activeSources].pop())||i.stop(t),this._start(t,e,n)}seek(t,e){let n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){let e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&iM(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&iM(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}iP([r9(0)],r7.prototype,"fadeIn",void 0),iP([r9(0)],r7.prototype,"fadeOut",void 0);class st extends rF{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new rj({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class se extends r_{constructor(){let t=i$(se.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new rb({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(r_.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(iC(t))return t;{let n;for(n in sn)if(sn[n][e]===t)return n;return t}}_setCurve(t,e,n){if(iC(n)&&Reflect.has(sn,n)){let i=sn[n];iT(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else if(iA(n)&&"_decayCurve"!==t)this[t]=n;else throw Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack),i=this.toSeconds(this.decay),r=this.getValueAtTime(t);if(r>0&&(n=(1-r)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let i=this._attackCurve;for(let t=1;t<i.length;t++)if(i[t-1]<=r&&r<=i[t]){(i=this._attackCurve.slice(t))[0]=r;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(i&&this.sustain<1){let r=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,i+s):this._sig.exponentialApproachValueAtTime(r,s,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let e=this.getValueAtTime(t);if(e>0){let n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(iS(iA(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return rT(this,t,e,n),this}asArray(){return iq(this,arguments,void 0,function*(t=1024){let e=t/this.context.sampleRate,n=new i5(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),s=.1*r,o=r+s,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(i+s)/o,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}iP([r9(0)],se.prototype,"attack",void 0),iP([r9(0)],se.prototype,"decay",void 0),iP([r5(0,1)],se.prototype,"sustain",void 0),iP([r9(0)],se.prototype,"release",void 0);let sn=(()=>{let t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));let i=[];for(t=0;t<127;t++){let n=Math.sin(2*Math.PI*(e=t/127)*6.4-Math.PI/2)+1;i[t]=n/10+.83*e}i[127]=1;let r=[];for(t=0;t<128;t++)r[t]=Math.ceil(t/127*5)/5;let s=[];for(t=0;t<128;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));let o=[];for(t=0;t<128;t++){let n=Math.cos((4*Math.pow(e=t/127,3)+.2)*Math.PI*2*e);o[t]=Math.abs(n*(1-e))}function a(t){let e=Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:a(o),Out:o},cosine:{In:n,Out:n.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:i,Out:a(i)},sine:{In:s,Out:a(s)},step:{In:r,Out:a(r)}}})();class si extends r_{constructor(){let t=i$(si.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new rM({context:this.context,volume:t.volume}),this.volume=this._volume.volume,i8(this,"volume")}static getDefaults(){return Object.assign(r_.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){let n=this["_original_"+t]=this[t];this[t]=(...t)=>{let i=t[e],r=this.context.transport.schedule(i=>{t[e]=i,n.apply(this,t)},i);this._scheduledEvents.push(r)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,i){let r=this.toSeconds(n),s=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class sr extends si{constructor(){let t=i$(sr.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(si.getDefaults(),{detune:0,onsilence:i4,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);let i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);let e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){let n=this.toSeconds(e),i=t instanceof ru?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){let t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}iP([r9(0)],sr.prototype,"portamento",void 0);class ss extends se{constructor(){super(i$(ss.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ry({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class so extends sr{constructor(){let t=i$(so.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new r6(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ss(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),i8(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(sr.getDefaults(),{envelope:Object.assign(iW(se.getDefaults(),Object.keys(r_.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(iW(r6.getDefaults(),[...Object.keys(rz.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){let e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class sa extends so{constructor(){let t=i$(sa.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,i8(this,["oscillator","envelope"])}static getDefaults(){return ij(sr.getDefaults(),so.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){let n=this.toSeconds(e),i=this.toFrequency(t instanceof ru?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}iP([r5(0)],sa.prototype,"octaves",void 0),iP([r9(0)],sa.prototype,"pitchDecay",void 0);let sl=new Set;function su(t,e){let n=`registerProcessor("${t}", ${e})`;sl.add(n)}y=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`,sl.add(y),x=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`,sl.add(x),w=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`,sl.add(w),su("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class sh extends si{constructor(){let t=i$(sh.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t),iS(!ib(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(si.getDefaults(),{maxPolyphony:32,options:{},voice:so})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);let e=this._activeVoices.findIndex(e=>e.voice===t);this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return iS(t instanceof sr,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}iI("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach(t=>{let i=new rD(this.context,t).toMidi(),r=this._getNextAvailableVoice();r&&(r.triggerAttack(t,e,n),this._activeVoices.push({midi:i,voice:r,released:!1}),this.log("triggerAttack",t,e))})}_triggerRelease(t,e){t.forEach(t=>{let n=new rD(this.context,t).toMidi(),i=this._activeVoices.find(({midi:t,released:e})=>t===n&&!e);i&&(i.voice.triggerRelease(e),i.released=!0,this.log("triggerRelease",t,e))})}_scheduleEvent(t,e,n,i){iS(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,i):this._triggerRelease(e,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,e,n,i)},n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);let i=this.toSeconds(e);return this._scheduleEvent("attack",t,i,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);let n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,i){let r=this.toSeconds(n);if(this.triggerAttack(t,r,i),iA(e)){iS(iA(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){let i=e[Math.min(n,e.length-1)],s=this.toSeconds(i);iS(s>0,"The duration must be greater than 0"),this.triggerRelease(t[n],r+s)}}else{let n=this.toSeconds(e);iS(n>0,"The duration must be greater than 0"),this.triggerRelease(t,r+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){let e=iW(t,["onsilence","context"]);return this.options=ij(this.options,e),this._voices.forEach(t=>t.set(e)),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){let e=this.toSeconds(t);return this._activeVoices.forEach(({voice:t})=>{t.triggerRelease(e)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class sc extends si{constructor(){let t=i$(sc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;let e={};Object.keys(t.urls).forEach(n=>{let i=parseInt(n,10);iS(ik(n)||ib(i)&&isFinite(i),`url key is neither a note or midi pitch: ${n}`),ik(n)?e[new ru(this.context,n).toMidi()]=t.urls[n]:ib(i)&&isFinite(i)&&(e[i]=t.urls[i])}),this._buffers=new rN({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(si.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:i4,onerror:i4,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{let i=rs(new ru(this.context,t).toFrequency()),r=Math.round(i),s=i-r,o=this._findClosest(r),a=r-o,l=this._buffers.get(a),u=rn(o+s),h=new rU({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);h.start(e,0,l.duration/u,n),iA(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){let t=this._activeSources.get(r),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{let n=new ru(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){let t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){let e=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){let r=this.toSeconds(n);return this.triggerAttack(t,r,i),iA(e)?(iS(iA(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{let i=e[Math.min(n,e.length-1)];this.triggerRelease(t,r+this.toSeconds(i))})):this.triggerRelease(t,r+this.toSeconds(e)),this}add(t,e,n){if(iS(ik(t)||isFinite(t),`note must be a pitch or midi: ${t}`),ik(t)){let i=new ru(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}iP([r9(0)],sc.prototype,"attack",void 0),iP([r9(0)],sc.prototype,"release",void 0);class sp extends r_{constructor(){let t=i$(sp.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new st({context:this.context}),this.a=new ry({context:this.context,gain:0}),this.b=new ry({context:this.context,gain:0}),this.output=new ry({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new rb({context:this.context,units:"normalRange",value:t.fade}),i8(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",rv(this._split,this.a.gain,0),rv(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(r_.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class sd extends r_{constructor(t){super(t),this.name="Effect",this._dryWet=new sp({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ry({context:this.context}),this.effectReturn=new ry({context:this.context}),this.input=new ry({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],i8(this,"wet")}static getDefaults(){return Object.assign(r_.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class sf extends r_{constructor(){let t=i$(sf.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new rm({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",i8(this,"pan")}static getDefaults(){return Object.assign(r_.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}su("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class sm extends r_{constructor(){let t=i$(sm.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(r_.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class s_ extends sd{constructor(){let t=i$(s_.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();let e=this.toSeconds(t.decay);iM(e,.001),this._decay=e;let n=this.toSeconds(t.preDelay);iM(n,0),this._preDelay=n,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(sd.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){iM(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){iM(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return iq(this,void 0,void 0,function*(){let t=this.ready,e=new i5(2,this._decay+this._preDelay,this.context.sampleRate),n=new rX({context:e}),i=new rX({context:e}),r=new sm({context:e});n.connect(r,0,0),i.connect(r,0,1);let s=new ry({context:e}).toDestination();r.connect(s),n.start(0),i.start(0),s.gain.setValueAtTime(0,0),s.gain.setValueAtTime(1,this._preDelay),s.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);let o=e.render();return this.ready=o.then(i4),yield t,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class sg extends r_{constructor(){let t=i$(sg.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ry({context:this.context}),sg._allSolos.has(this.context)||sg._allSolos.set(this.context,new Set),sg._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(r_.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),sg._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){sg._soloed.has(this.context)||sg._soloed.set(this.context,new Set),sg._soloed.get(this.context).add(this)}_removeSolo(){sg._soloed.has(this.context)&&sg._soloed.get(this.context).delete(this)}_isSoloed(){return sg._soloed.has(this.context)&&sg._soloed.get(this.context).has(this)}_noSolos(){return!sg._soloed.has(this.context)||sg._soloed.has(this.context)&&0===sg._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),sg._allSolos.get(this.context).delete(this),this._removeSolo(),this}}sg._allSolos=new Map,sg._soloed=new Map;class sv extends r_{constructor(){let t=i$(sv.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new sf({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new rM({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,i8(this,["pan","volume"])}static getDefaults(){return Object.assign(r_.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class sy extends r_{constructor(){let t=i$(sy.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new sg({solo:t.solo,context:this.context}),this._panVol=this.output=new sv({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),i8(this,["pan","volume"])}static getDefaults(){return Object.assign(r_.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return sy.buses.has(t)||sy.buses.set(t,new ry({context:this.context})),sy.buses.get(t)}send(t,e=0){let n=this._getBus(t),i=new ry({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}sy.buses=new Map,rt().transport,rt().destination,rt().destination,rt().listener,rt().draw,rt()},7034:t=>{t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},7382:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8919:(t,e,n)=>{var i=n(7382).default;t.exports=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}}]);